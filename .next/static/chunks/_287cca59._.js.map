{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAI/B,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,6LAAC,wKAAA,CAAA,OAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;;AAIf,UAAU,WAAW,GAAG,wKAAA,CAAA,OAAuB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/editor/offer-editor/page.tsx"],"sourcesContent":["\n'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Loader2, ShieldCheck, FileText } from 'lucide-react'; // Added FileText\nimport { useToast } from '@/hooks/use-toast';\nimport type { SiteSettings } from '@/types';\nimport { Separator } from '@/components/ui/separator';\n\nconst contentSchema = z.object({\n  offer_page_content: z.string().optional().nullable(),\n  rules_page_content: z.string().optional().nullable(), // Added rules content\n});\n\ntype ContentFormValues = z.infer<typeof contentSchema>;\n\nexport default function AdminOfferAndRulesEditorPage() {\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isFetching, setIsFetching] = useState(true);\n\n  const form = useForm<ContentFormValues>({\n    resolver: zodResolver(contentSchema),\n    defaultValues: {\n      offer_page_content: '',\n      rules_page_content: '',\n    },\n  });\n\n  const fetchContent = useCallback(async () => {\n    setIsFetching(true);\n    try {\n      const response = await fetch('/api/admin/site-settings'); // Fetch all site settings\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ message: 'Не удалось загрузить контент.' }));\n        throw new Error(errorData.message);\n      }\n      const data: SiteSettings = await response.json();\n      form.reset({\n        offer_page_content: data.offer_page_content || '',\n        rules_page_content: data.rules_page_content || '',\n      });\n    } catch (error: any) {\n      toast({ title: \"Ошибка загрузки\", description: error.message, variant: \"destructive\" });\n    } finally {\n      setIsFetching(false);\n    }\n  }, [form, toast]);\n\n  useEffect(() => {\n    fetchContent();\n  }, [fetchContent]);\n\n  const onSubmit = async (data: ContentFormValues) => {\n    setIsLoading(true);\n    try {\n      // Fetch existing settings to merge with the new content\n      const existingSettingsRes = await fetch('/api/admin/site-settings');\n      if (!existingSettingsRes.ok) throw new Error('Could not fetch existing settings to merge.');\n      const existingSettings: SiteSettings = await existingSettingsRes.json();\n      \n      const payload = { \n        ...existingSettings, \n        offer_page_content: data.offer_page_content,\n        rules_page_content: data.rules_page_content \n      };\n\n      const response = await fetch('/api/admin/site-settings', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      const result = await response.json();\n      if (!response.ok) throw new Error(result.message || 'Не удалось сохранить контент.');\n      toast({ title: \"Контент обновлен\", description: \"Содержимое страниц успешно обновлено.\" });\n      if(result.settings) {\n        form.reset({ \n            offer_page_content: result.settings.offer_page_content || '',\n            rules_page_content: result.settings.rules_page_content || ''\n        });\n      }\n    } catch (error: any) {\n      toast({ title: \"Ошибка сохранения\", description: error.message, variant: \"destructive\" });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (isFetching) {\n    return (\n      <div className=\"flex items-center justify-center p-10\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n        <p className=\"ml-3 text-muted-foreground\">Загрузка редактора...</p>\n      </div>\n    );\n  }\n\n  return (\n    <Card className=\"shadow-lg\">\n      <CardHeader>\n        <CardTitle className=\"text-xl font-bold text-primary flex items-center\">\n          <ShieldCheck className=\"mr-2 h-5 w-5\" />\n          Редактор страниц \"Оферта\" и \"Правила\"\n        </CardTitle>\n        <CardDescription className=\"text-muted-foreground\">\n          Введите или отредактируйте HTML-содержимое для страниц публичной оферты и правил сайта.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n          \n          <div>\n            <Label htmlFor=\"offer_page_content\" className=\"text-foreground flex items-center mb-1\">\n                <ShieldCheck className=\"mr-2 h-4 w-4 text-primary/80\"/> HTML-контент Оферты\n            </Label>\n            <Textarea\n              id=\"offer_page_content\"\n              {...form.register(\"offer_page_content\")}\n              placeholder=\"<p>Ваша публичная оферта здесь...</p> <h4>Раздел 1</h4> <p>...</p>\"\n              className=\"mt-1 min-h-[300px] font-mono text-sm bg-muted/30 border-border\"\n              disabled={isLoading}\n            />\n            {form.formState.errors.offer_page_content && (\n              <p className=\"text-sm text-destructive mt-1\">{form.formState.errors.offer_page_content.message}</p>\n            )}\n          </div>\n\n          <Separator className=\"my-8\" />\n\n          <div>\n            <Label htmlFor=\"rules_page_content\" className=\"text-foreground flex items-center mb-1\">\n                <FileText className=\"mr-2 h-4 w-4 text-primary/80\"/> HTML-контент Правил Сайта\n            </Label>\n            <Textarea\n              id=\"rules_page_content\"\n              {...form.register(\"rules_page_content\")}\n              placeholder=\"<p>Ваши правила сайта здесь...</p> <h3>Заголовок</h3> <ul><li>Пункт 1</li></ul>\"\n              className=\"mt-1 min-h-[300px] font-mono text-sm bg-muted/30 border-border\"\n              disabled={isLoading}\n            />\n            {form.formState.errors.rules_page_content && (\n              <p className=\"text-sm text-destructive mt-1\">{form.formState.errors.rules_page_content.message}</p>\n            )}\n          </div>\n\n          <div className=\"flex justify-end pt-4\">\n            <Button type=\"submit\" className=\"bg-primary hover:bg-primary/90 text-primary-foreground\" disabled={isLoading || isFetching}>\n              {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n              Сохранить контент\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n    "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 433, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/node_modules/%40radix-ui/react-separator/src/separator.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Primitive } from '@radix-ui/react-primitive';\n\n/* -------------------------------------------------------------------------------------------------\n *  Separator\n * -----------------------------------------------------------------------------------------------*/\n\nconst NAME = 'Separator';\nconst DEFAULT_ORIENTATION = 'horizontal';\nconst ORIENTATIONS = ['horizontal', 'vertical'] as const;\n\ntype Orientation = (typeof ORIENTATIONS)[number];\ntype SeparatorElement = React.ElementRef<typeof Primitive.div>;\ntype PrimitiveDivProps = React.ComponentPropsWithoutRef<typeof Primitive.div>;\ninterface SeparatorProps extends PrimitiveDivProps {\n  /**\n   * Either `vertical` or `horizontal`. Defaults to `horizontal`.\n   */\n  orientation?: Orientation;\n  /**\n   * Whether or not the component is purely decorative. When true, accessibility-related attributes\n   * are updated so that that the rendered element is removed from the accessibility tree.\n   */\n  decorative?: boolean;\n}\n\nconst Separator = React.forwardRef<SeparatorElement, SeparatorProps>((props, forwardedRef) => {\n  const { decorative, orientation: orientationProp = DEFAULT_ORIENTATION, ...domProps } = props;\n  const orientation = isValidOrientation(orientationProp) ? orientationProp : DEFAULT_ORIENTATION;\n  // `aria-orientation` defaults to `horizontal` so we only need it if `orientation` is vertical\n  const ariaOrientation = orientation === 'vertical' ? orientation : undefined;\n  const semanticProps = decorative\n    ? { role: 'none' }\n    : { 'aria-orientation': ariaOrientation, role: 'separator' };\n\n  return (\n    <Primitive.div\n      data-orientation={orientation}\n      {...semanticProps}\n      {...domProps}\n      ref={forwardedRef}\n    />\n  );\n});\n\nSeparator.displayName = NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\nfunction isValidOrientation(orientation: any): orientation is Orientation {\n  return ORIENTATIONS.includes(orientation);\n}\n\nconst Root = Separator;\n\nexport {\n  Separator,\n  //\n  Root,\n};\nexport type { SeparatorProps };\n"],"names":[],"mappings":";;;;;AAAA,YAAY,WAAW;AACvB,SAAS,iBAAiB;AAmCtB;;;;AA7BJ,IAAM,OAAO;AACb,IAAM,sBAAsB;AAC5B,IAAM,eAAe;IAAC;IAAc,UAAU;CAAA;AAiB9C,IAAM,8KAAkB,aAAA,EAA6C,CAAC,OAAO,iBAAiB;IAC5F,MAAM,EAAE,UAAA,EAAY,aAAa,kBAAkB,mBAAA,EAAqB,GAAG,SAAS,CAAA,GAAI;IACxF,MAAM,cAAc,mBAAmB,eAAe,IAAI,kBAAkB;IAE5E,MAAM,kBAAkB,gBAAgB,aAAa,cAAc,KAAA;IACnE,MAAM,gBAAgB,aAClB;QAAE,MAAM;IAAO,IACf;QAAE,oBAAoB;QAAiB,MAAM;IAAY;IAE7D,OACE,aAAA,GAAA,CAAA,GAAA,sKAAA,CAAA,MAAA,2KAAC,YAAA,CAAU,GAAA,EAAV;QACC,oBAAkB;QACjB,GAAG,aAAA;QACH,GAAG,QAAA;QACJ,KAAK;IAAA;AAGX,CAAC;AAED,UAAU,WAAA,GAAc;AAIxB,SAAS,mBAAmB,WAAA,EAA8C;IACxE,OAAO,aAAa,QAAA,CAAS,WAAW;AAC1C;AAEA,IAAM,OAAO","ignoreList":[0],"debugId":null}}]
}