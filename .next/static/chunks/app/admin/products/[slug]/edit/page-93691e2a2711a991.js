(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2902],{18763:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});let i=(0,t(40157).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},43086:(e,s,t)=>{Promise.resolve().then(t.bind(t,93552))},93552:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var i=t(95155),l=t(12115),a=t(62177),r=t(90221),n=t(55594),o=t(30285),c=t(62523),d=t(85057),m=t(88539),u=t(66695),p=t(59409),x=t(87481),h=t(35695),_=t(25318),g=t(50172),j=t(18763),f=t(12543),v=t(60960),b=t(79311),y=t(15300),N=t(82733),w=t(56013),k=t(6160),S=t(77223),A=t(34301),L=t(26126),F=t(17313);let Y=n.Ik({id:n.ai().optional(),duration_days:n.au.number().min(1,"Длительность должна быть не менее 1 дня."),price_rub:n.au.number().min(0,"Цена RUB не может быть отрицательной."),price_gh:n.au.number().min(0,"Цена GH не может быть отрицательной."),payment_link:n.Yj().url({message:"Неверный URL ссылки на оплату."}).optional().or(n.eu("")).nullable(),mode_label:n.Yj().optional().nullable()}),E=n.Ik({name:n.Yj().min(1,"Название обязательно."),slug:n.Yj().min(1,"Slug обязателен.").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Slug может содержать только строчные буквы, цифры и дефисы."),game_slug:n.Yj().min(1,"Категория (игра) обязательна."),status:n.k5(["safe","updating","risky","unknown"],{required_error:"Статус обязателен."}),status_text:n.Yj().optional().nullable(),price_text:n.Yj().optional().nullable(),short_description:n.Yj().optional().nullable(),long_description:n.Yj().optional().nullable(),image_url:n.Yj().url({message:"Неверный URL изображения."}).optional().or(n.eu("")).nullable(),data_ai_hint:n.Yj().optional().nullable(),mode:n.k5(["PVE","PVP","BOTH"]).nullable().optional(),gallery_image_urls:n.Yj().optional().nullable(),functions_aim_title:n.Yj().optional().nullable(),functions_aim:n.Yj().optional().nullable(),functions_aim_description:n.Yj().optional().nullable(),functions_esp_title:n.Yj().optional().nullable(),functions_wallhack:n.Yj().optional().nullable(),functions_esp_description:n.Yj().optional().nullable(),functions_misc_title:n.Yj().optional().nullable(),functions_misc:n.Yj().optional().nullable(),functions_misc_description:n.Yj().optional().nullable(),system_os:n.Yj().optional().nullable(),system_build:n.Yj().optional().nullable(),system_gpu:n.Yj().optional().nullable(),system_cpu:n.Yj().optional().nullable(),pricing_options:n.YO(Y).optional().default([])}),P="__NULL_VALUE__";function C(){let{toast:e}=(0,x.dj)(),s=(0,h.useRouter)(),t=(0,h.useParams)().slug,[n,Y]=(0,l.useState)(!1),[C,V]=(0,l.useState)(!0),[R,B]=(0,l.useState)([]),[U,T]=(0,l.useState)(!0),[H,z]=(0,l.useState)(null),[M,I]=(0,l.useState)(""),[O,W]=(0,l.useState)([]),[Z,$]=(0,l.useState)(""),[X,q]=(0,l.useState)([]),[D,G]=(0,l.useState)(""),[J,K]=(0,l.useState)([]),Q=(0,a.mN)({resolver:(0,r.u)(E),defaultValues:{name:"",slug:t,game_slug:"",status:"unknown",pricing_options:[],functions_aim_title:"Aimbot Функции",functions_aim_description:"",functions_esp_title:"ESP/Wallhack Функции",functions_esp_description:"",functions_misc_title:"Прочие Функции (Misc)",functions_misc_description:"",mode:null}}),{fields:ee,append:es,remove:et,replace:ei}=(0,a.jz)({control:Q.control,name:"pricing_options"}),el=(0,l.useCallback)(async()=>{T(!0);try{let e=await fetch("/api/categories");if(!e.ok)throw Error("Failed to fetch categories");let s=await e.json();B(s)}catch(s){console.error("Error fetching categories:",s),e({title:"Ошибка",description:"Не удалось загрузить категории.",variant:"destructive"})}finally{T(!1)}},[e]),ea=(0,l.useCallback)(async t=>{V(!0);try{var i;let e=await fetch("/api/products/".concat(t));if(!e.ok){let s=await e.json().catch(()=>({message:"Failed to fetch product"}));throw Error(s.message||"Failed to fetch product")}let s=await e.json();z(s);let l=e=>Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e):"string"==typeof e?e.split(",").map(e=>e.trim()).filter(e=>e):[];W(l(s.functions_aim)),q(l(s.functions_wallhack)),K(l(s.functions_misc)),Q.reset({name:s.name,slug:s.slug,game_slug:s.game_slug,status:s.status,status_text:s.status_text||"",price_text:s.price_text||"",short_description:s.short_description||"",long_description:s.long_description||"",image_url:s.image_url||"",data_ai_hint:s.data_ai_hint||"",mode:s.mode||null,gallery_image_urls:Array.isArray(s.gallery_image_urls)?s.gallery_image_urls.join(","):s.gallery_image_urls||"",functions_aim_title:s.functions_aim_title||"Aimbot Функции",functions_aim:Array.isArray(s.functions_aim)?s.functions_aim.join(","):s.functions_aim||"",functions_aim_description:s.functions_aim_description||"",functions_esp_title:s.functions_esp_title||"ESP/Wallhack Функции",functions_wallhack:Array.isArray(s.functions_wallhack)?s.functions_wallhack.join(","):s.functions_wallhack||"",functions_esp_description:s.functions_esp_description||"",functions_misc_title:s.functions_misc_title||"Прочие Функции (Misc)",functions_misc:Array.isArray(s.functions_misc)?s.functions_misc.join(","):s.functions_misc||"",functions_misc_description:s.functions_misc_description||"",system_os:s.system_os||"",system_build:s.system_build||"",system_gpu:s.system_gpu||"",system_cpu:s.system_cpu||"",pricing_options:(null===(i=s.pricing_options)||void 0===i?void 0:i.map(e=>({...e,payment_link:e.payment_link||"",mode_label:e.mode_label||""})))||[]}),s.pricing_options&&ei(s.pricing_options.map(e=>({...e,payment_link:e.payment_link||"",mode_label:e.mode_label||""})))}catch(t){console.error("Error fetching product data:",t),e({title:"Ошибка",description:"Не удалось загрузить данные товара: ".concat(t.message),variant:"destructive"}),s.push("/admin/products")}finally{V(!1)}},[e,Q,s,ei]);(0,l.useEffect)(()=>{el(),t&&ea(t)},[el,ea,t]),(0,l.useEffect)(()=>{Q.setValue("functions_aim",O.join(","))},[O,Q]),(0,l.useEffect)(()=>{Q.setValue("functions_wallhack",X.join(","))},[X,Q]),(0,l.useEffect)(()=>{Q.setValue("functions_misc",J.join(","))},[J,Q]);let er=e=>{"aim"===e&&M.trim()?(O.includes(M.trim())||W(e=>[...e,M.trim()]),I("")):"wh"===e&&Z.trim()?(X.includes(Z.trim())||q(e=>[...e,Z.trim()]),$("")):"misc"===e&&D.trim()&&(J.includes(D.trim())||K(e=>[...e,D.trim()]),G(""))},en=(e,s)=>{"aim"===e&&W(e=>e.filter((e,t)=>t!==s)),"wh"===e&&q(e=>e.filter((e,t)=>t!==s)),"misc"===e&&K(e=>e.filter((e,t)=>t!==s))},eo=(e,s,t,l,a,r)=>(0,i.jsxs)("div",{className:"space-y-3 p-4 border border-border/30 rounded-md bg-card/50 shadow-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:a,className:"text-foreground font-semibold",children:"Заголовок секции"}),(0,i.jsx)(c.p,{id:a,...Q.register(a),placeholder:"functions_aim_title"===a?"Aimbot Функции":"functions_esp_title"===a?"ESP/Wallhack Функции":"Прочие Функции (Misc)",className:"mt-1 h-9",disabled:n})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:r,className:"text-foreground",children:"Описание секции"}),(0,i.jsx)(m.T,{id:r,...Q.register(r),placeholder:"Краткое описание этой группы функций...",className:"mt-1 min-h-[60px]",disabled:n})]}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)(d.Label,{className:"text-xs text-muted-foreground",children:"Добавить функцию"}),(0,i.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,i.jsx)(c.p,{value:s,onChange:e=>t(e.target.value),placeholder:"Новая функция",className:"flex-grow h-9",disabled:n,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),er(l))}}),(0,i.jsx)(o.$,{type:"button",variant:"outline",size:"sm",onClick:()=>er(l),disabled:n||!s.trim(),className:"h-9 border-primary text-primary hover:bg-primary/10",children:"Добавить"})]})]}),e.length>0&&(0,i.jsx)("div",{className:"flex flex-wrap gap-2 mt-2 p-2 border border-input rounded-md min-h-[40px] bg-background",children:e.map((e,s)=>(0,i.jsxs)(L.E,{variant:"outline",className:"text-sm py-1 px-2 flex items-center border-primary/50 text-foreground",children:[e,(0,i.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",className:"ml-1.5 h-4 w-4 p-0 text-muted-foreground hover:text-destructive",onClick:()=>en(l,s),disabled:n,children:(0,i.jsx)(_.A,{className:"h-3 w-3"})})]},"".concat(l,"-").concat(s,"-").concat(e)))})]}),ec=async i=>{var l;if(!H||!t)return;Y(!0);let a={...i,mode:i.mode===P?null:i.mode,functions_aim:O.join(","),functions_wallhack:X.join(","),functions_misc:J.join(","),gallery_image_urls:i.gallery_image_urls?i.gallery_image_urls.split(",").map(e=>e.trim()).filter(e=>e):[],pricing_options:null===(l=i.pricing_options)||void 0===l?void 0:l.map(e=>({...e,payment_link:e.payment_link||null,mode_label:e.mode_label||null}))};try{let l=await fetch("/api/admin/products/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),r=await l.json();if(!l.ok)throw Error(r.message||"Не удалось обновить товар.");e({title:"Товар обновлен",description:'Товар "'.concat(i.name,'" был успешно обновлен.')}),s.push("/admin/products")}catch(s){e({title:"Ошибка",description:s.message||"Произошла ошибка при обновлении товара.",variant:"destructive"})}finally{Y(!1)}};return C||U?(0,i.jsxs)("div",{className:"flex items-center justify-center h-full",children:[(0,i.jsx)(g.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,i.jsx)("p",{className:"ml-3 text-muted-foreground",children:"Загрузка данных товара..."})]}):H?(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("h1",{className:"text-2xl font-bold text-primary flex items-center",children:[(0,i.jsx)(j.A,{className:"mr-2 h-6 w-6"}),"Редактировать товар: ",Q.getValues("name")]}),(0,i.jsxs)(o.$,{onClick:()=>s.push("/admin/products"),variant:"outline",className:"border-primary text-primary hover:bg-primary/10",children:[(0,i.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"К списку товаров"]})]}),(0,i.jsx)(u.Zp,{className:"shadow-lg",children:(0,i.jsx)(u.Wu,{className:"pt-6",children:(0,i.jsxs)("form",{onSubmit:Q.handleSubmit(ec),children:[(0,i.jsxs)(F.tU,{defaultValue:"general",className:"w-full",children:[(0,i.jsxs)(F.j7,{className:"grid w-full grid-cols-2 md:grid-cols-3 lg:grid-cols-6 mb-6",children:[(0,i.jsxs)(F.Xi,{value:"general",children:[(0,i.jsx)(v.A,{className:"mr-1.5 h-4 w-4"}),"Общие"]}),(0,i.jsxs)(F.Xi,{value:"gallery",children:[(0,i.jsx)(b.A,{className:"mr-1.5 h-4 w-4"}),"Галерея"]}),(0,i.jsxs)(F.Xi,{value:"description",children:[(0,i.jsx)(y.A,{className:"mr-1.5 h-4 w-4"}),"Описание"]}),(0,i.jsxs)(F.Xi,{value:"features",children:[(0,i.jsx)(N.A,{className:"mr-1.5 h-4 w-4"}),"Функции"]}),(0,i.jsxs)(F.Xi,{value:"os",children:[(0,i.jsx)(w.A,{className:"mr-1.5 h-4 w-4"}),"ОС"]}),(0,i.jsxs)(F.Xi,{value:"pricing",children:[(0,i.jsx)(k.A,{className:"mr-1.5 h-4 w-4"}),"Стоимость"]})]}),(0,i.jsxs)(F.av,{value:"general",className:"space-y-4",children:[(0,i.jsx)(u.aR,{className:"px-0 py-2",children:(0,i.jsxs)(u.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,i.jsx)(v.A,{className:"mr-2 h-5 w-5 text-primary"})," Основная информация"]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-name",className:"text-foreground",children:"Название товара"}),(0,i.jsx)(c.p,{id:"edit-name",...Q.register("name"),placeholder:"UnitHack для Warface",className:"mt-1",disabled:n}),Q.formState.errors.name&&(0,i.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.name.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-slug",className:"text-foreground",children:"Slug (URL)"}),(0,i.jsx)(c.p,{id:"edit-slug",...Q.register("slug"),placeholder:"unithack-warface",className:"mt-1",disabled:n}),Q.formState.errors.slug&&(0,i.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.slug.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-game_slug",className:"text-foreground",children:"Категория (Игра)"}),(0,i.jsx)(a.xI,{control:Q.control,name:"game_slug",render:e=>{let{field:s}=e;return(0,i.jsxs)(p.l6,{onValueChange:s.onChange,value:s.value||"",disabled:n||U,children:[(0,i.jsx)(p.bq,{className:"w-full mt-1",children:(0,i.jsx)(p.yv,{placeholder:U?"Загрузка категорий...":"Выберите игру"})}),(0,i.jsx)(p.gC,{children:R.map(e=>(0,i.jsx)(p.eb,{value:e.slug,children:e.name},e.id))})]})}}),Q.formState.errors.game_slug&&(0,i.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.game_slug.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-status",className:"text-foreground",children:"Статус"}),(0,i.jsx)(a.xI,{control:Q.control,name:"status",render:e=>{let{field:s}=e;return(0,i.jsxs)(p.l6,{onValueChange:s.onChange,value:s.value,disabled:n,children:[(0,i.jsx)(p.bq,{className:"w-full mt-1",children:(0,i.jsx)(p.yv,{placeholder:"Выберите статус"})}),(0,i.jsxs)(p.gC,{children:[(0,i.jsx)(p.eb,{value:"safe",children:"Безопасен (safe)"}),(0,i.jsx)(p.eb,{value:"updating",children:"Обновляется (updating)"}),(0,i.jsx)(p.eb,{value:"risky",children:"Рискованно (risky)"}),(0,i.jsx)(p.eb,{value:"unknown",children:"Неизвестно (unknown)"})]})]})}}),Q.formState.errors.status&&(0,i.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.status.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-status_text",className:"text-foreground",children:"Текст статуса (опционально)"}),(0,i.jsx)(c.p,{id:"edit-status_text",...Q.register("status_text"),placeholder:"Например, Безопасен с 01.01.2024",className:"mt-1",disabled:n})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-price_text",className:"text-foreground",children:'Текст цены (напр. "от 100₽")'}),(0,i.jsx)(c.p,{id:"edit-price_text",...Q.register("price_text"),placeholder:"от 150₽",className:"mt-1",disabled:n}),Q.formState.errors.price_text&&(0,i.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.price_text.message})]})]}),(0,i.jsxs)(F.av,{value:"gallery",className:"space-y-4",children:[(0,i.jsx)(u.aR,{className:"px-0 py-2",children:(0,i.jsxs)(u.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,i.jsx)(b.A,{className:"mr-2 h-5 w-5 text-primary"})," Медиафайлы"]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-image_url",className:"text-foreground",children:"URL основного изображения"}),(0,i.jsx)(c.p,{id:"edit-image_url",...Q.register("image_url"),placeholder:"https://example.com/image.jpg",className:"mt-1",disabled:n}),Q.formState.errors.image_url&&(0,i.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.image_url.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-data_ai_hint",className:"text-foreground",children:"Подсказка для AI (для фото)"}),(0,i.jsx)(c.p,{id:"edit-data_ai_hint",...Q.register("data_ai_hint"),placeholder:"warface cheat icon",className:"mt-1",disabled:n})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-gallery_image_urls",className:"text-foreground",children:"URL изображений галереи (через запятую)"}),(0,i.jsx)(m.T,{id:"edit-gallery_image_urls",...Q.register("gallery_image_urls"),placeholder:"url1.jpg,url2.png,url3.webp",className:"mt-1 min-h-[60px]",disabled:n})]})]}),(0,i.jsxs)(F.av,{value:"description",className:"space-y-4",children:[(0,i.jsxs)(u.aR,{className:"px-0 py-2",children:[(0,i.jsxs)(u.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,i.jsx)(y.A,{className:"mr-2 h-5 w-5 text-primary"})," Описание"]}),(0,i.jsx)(u.BT,{className:"text-muted-foreground",children:"Эти поля являются общими для товара. PVE/PVP специфичные детали можно указать в описании ниже или создать отдельные товары."})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-short_description",className:"text-foreground",children:"Краткое описание"}),(0,i.jsx)(m.T,{id:"edit-short_description",...Q.register("short_description"),placeholder:"Краткое описание товара...",className:"mt-1 min-h-[60px]",disabled:n}),Q.formState.errors.short_description&&(0,i.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.short_description.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-long_description",className:"text-foreground",children:"Полное описание (Поддержка HTML)"}),(0,i.jsx)(m.T,{id:"edit-long_description",...Q.register("long_description"),placeholder:"Детальное описание товара, его особенности и преимущества...",className:"mt-1 min-h-[120px]",disabled:n})]})]}),(0,i.jsxs)(F.av,{value:"features",className:"space-y-6",children:[(0,i.jsxs)(u.aR,{className:"px-0 py-2",children:[(0,i.jsxs)(u.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,i.jsx)(N.A,{className:"mr-2 h-5 w-5 text-primary"})," Функционал (Общий)"]}),(0,i.jsx)(u.BT,{className:"text-muted-foreground",children:"Укажите общие функции товара."})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-mode",className:"text-foreground",children:"Основной режим товара (для фильтрации)"}),(0,i.jsx)(a.xI,{control:Q.control,name:"mode",render:e=>{let{field:s}=e;return(0,i.jsxs)(p.l6,{onValueChange:e=>s.onChange(e===P?null:e),value:s.value||P,disabled:n,children:[(0,i.jsx)(p.bq,{className:"w-full mt-1",children:(0,i.jsx)(p.yv,{placeholder:"Выберите режим"})}),(0,i.jsxs)(p.gC,{children:[(0,i.jsx)(p.eb,{value:P,children:"Не указан"}),(0,i.jsx)(p.eb,{value:"PVE",children:"PVE"}),(0,i.jsx)(p.eb,{value:"PVP",children:"PVP"}),(0,i.jsx)(p.eb,{value:"BOTH",children:"BOTH (Оба)"})]})]})}}),Q.formState.errors.mode&&(0,i.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.mode.message})]}),eo(O,M,I,"aim","functions_aim_title","functions_aim_description"),eo(X,Z,$,"wh","functions_esp_title","functions_esp_description"),eo(J,D,G,"misc","functions_misc_title","functions_misc_description")]}),(0,i.jsxs)(F.av,{value:"os",className:"space-y-4",children:[(0,i.jsx)(u.aR,{className:"px-0 py-2",children:(0,i.jsxs)(u.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,i.jsx)(w.A,{className:"mr-2 h-5 w-5 text-primary"})," Системные требования"]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-system_os",className:"text-foreground",children:"ОС"}),(0,i.jsx)(c.p,{id:"edit-system_os",...Q.register("system_os"),placeholder:"Windows 10/11",className:"mt-1",disabled:n})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-system_build",className:"text-foreground",children:"Сборка Windows"}),(0,i.jsx)(c.p,{id:"edit-system_build",...Q.register("system_build"),placeholder:"2004 - 22H2",className:"mt-1",disabled:n})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-system_gpu",className:"text-foreground",children:"Видеокарта"}),(0,i.jsx)(c.p,{id:"edit-system_gpu",...Q.register("system_gpu"),placeholder:"Nvidia / AMD",className:"mt-1",disabled:n})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"edit-system_cpu",className:"text-foreground",children:"Процессор"}),(0,i.jsx)(c.p,{id:"edit-system_cpu",...Q.register("system_cpu"),placeholder:"Intel / AMD",className:"mt-1",disabled:n})]})]})]}),(0,i.jsxs)(F.av,{value:"pricing",className:"space-y-4",children:[(0,i.jsx)(u.aR,{className:"px-0 py-2",children:(0,i.jsxs)(u.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,i.jsx)(k.A,{className:"mr-2 h-5 w-5 text-primary"})," Варианты цен"]})}),ee.map((e,s)=>{var t,l,a,r,m,u,p,x,h,_,g,j,f,v,b,y,N,w,k,A,L,F,Y,E,P;return(0,i.jsxs)("div",{className:"space-y-3 p-4 border border-border/30 rounded-md bg-muted/20 shadow-sm",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"pricing_options.".concat(s,".duration_days"),className:"text-xs text-muted-foreground",children:"Длительность (дни)"}),(0,i.jsx)(c.p,{type:"number",...Q.register("pricing_options.".concat(s,".duration_days")),className:"mt-1 h-9",disabled:n}),(null===(l=Q.formState.errors.pricing_options)||void 0===l?void 0:null===(t=l[s])||void 0===t?void 0:t.duration_days)&&(0,i.jsx)("p",{className:"text-xs text-destructive mt-1",children:null===(m=Q.formState.errors.pricing_options)||void 0===m?void 0:null===(r=m[s])||void 0===r?void 0:null===(a=r.duration_days)||void 0===a?void 0:a.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"pricing_options.".concat(s,".mode_label"),className:"text-xs text-muted-foreground",children:"Название режима (опционально)"}),(0,i.jsx)(c.p,{...Q.register("pricing_options.".concat(s,".mode_label")),placeholder:"PVP / BattleRoyale",className:"mt-1 h-9",disabled:n}),(null===(p=Q.formState.errors.pricing_options)||void 0===p?void 0:null===(u=p[s])||void 0===u?void 0:u.mode_label)&&(0,i.jsx)("p",{className:"text-xs text-destructive mt-1",children:null===(_=Q.formState.errors.pricing_options)||void 0===_?void 0:null===(h=_[s])||void 0===h?void 0:null===(x=h.mode_label)||void 0===x?void 0:x.message})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"pricing_options.".concat(s,".price_gh"),className:"text-xs text-muted-foreground",children:"Цена (GH)"}),(0,i.jsx)(c.p,{type:"number",step:"0.01",...Q.register("pricing_options.".concat(s,".price_gh")),className:"mt-1 h-9",disabled:n}),(null===(j=Q.formState.errors.pricing_options)||void 0===j?void 0:null===(g=j[s])||void 0===g?void 0:g.price_gh)&&(0,i.jsx)("p",{className:"text-xs text-destructive mt-1",children:null===(b=Q.formState.errors.pricing_options)||void 0===b?void 0:null===(v=b[s])||void 0===v?void 0:null===(f=v.price_gh)||void 0===f?void 0:f.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"pricing_options.".concat(s,".price_rub"),className:"text-xs text-muted-foreground",children:"Цена (RUB)"}),(0,i.jsx)(c.p,{type:"number",step:"0.01",...Q.register("pricing_options.".concat(s,".price_rub")),className:"mt-1 h-9",disabled:n}),(null===(N=Q.formState.errors.pricing_options)||void 0===N?void 0:null===(y=N[s])||void 0===y?void 0:y.price_rub)&&(0,i.jsx)("p",{className:"text-xs text-destructive mt-1",children:null===(A=Q.formState.errors.pricing_options)||void 0===A?void 0:null===(k=A[s])||void 0===k?void 0:null===(w=k.price_rub)||void 0===w?void 0:w.message})]}),(0,i.jsx)("div",{className:"flex items-center justify-end",children:(0,i.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>et(s),className:"text-destructive hover:bg-destructive/10 h-9 w-9",disabled:n||ee.length<=1,children:(0,i.jsx)(S.A,{className:"h-4 w-4"})})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Label,{htmlFor:"pricing_options.".concat(s,".payment_link"),className:"text-xs text-muted-foreground",children:"Ссылка на оплату (для RUB)"}),(0,i.jsx)(c.p,{type:"url",...Q.register("pricing_options.".concat(s,".payment_link")),placeholder:"https://yoomoney.ru/...",className:"mt-1 h-9",disabled:n}),(null===(F=Q.formState.errors.pricing_options)||void 0===F?void 0:null===(L=F[s])||void 0===L?void 0:L.payment_link)&&(0,i.jsx)("p",{className:"text-xs text-destructive mt-1",children:null===(P=Q.formState.errors.pricing_options)||void 0===P?void 0:null===(E=P[s])||void 0===E?void 0:null===(Y=E.payment_link)||void 0===Y?void 0:Y.message})]})]},e.id||"new-".concat(s))}),(0,i.jsxs)(o.$,{type:"button",variant:"outline",size:"sm",onClick:()=>es({duration_days:1,price_rub:0,price_gh:0,payment_link:"",mode_label:""}),disabled:n,className:"border-primary text-primary hover:bg-primary/10",children:[(0,i.jsx)(A.A,{className:"mr-2 h-4 w-4"})," Добавить вариант цены"]})]})]}),(0,i.jsx)("div",{className:"flex justify-end pt-8",children:(0,i.jsxs)(o.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",disabled:n||U||C,children:[n?(0,i.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,n?"Сохранение...":"Сохранить изменения"]})})]})})})]}):(0,i.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,i.jsx)("p",{className:"text-destructive",children:"Не удалось загрузить товар для редактирования."})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[4277,7576,5521,5756,9205,8897,8991,5015,8441,1684,7358],()=>s(43086)),_N_E=e.O()}]);