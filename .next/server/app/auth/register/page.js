(()=>{var e={};e.id=983,e.ids=[983],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3515:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(61120);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(...e)=>e.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:d,...c},m)=>(0,s.createElement)("svg",{ref:m,...n,width:r,height:r,stroke:e,strokeWidth:a?24*Number(t)/Number(r):t,className:i("lucide",o),...c},[...d.map(([e,r])=>(0,s.createElement)(e,r)),...Array.isArray(l)?l:[l]])),l=(e,r)=>{let t=(0,s.forwardRef)(({className:t,...n},l)=>(0,s.createElement)(o,{ref:l,iconNode:r,className:i(`lucide-${a(e)}`,t),...n}));return t.displayName=`${e}`,t}},3662:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9479:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,4536,23)),Promise.resolve().then(t.bind(t,16584))},9929:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=t(65239),a=t(48088),i=t(88170),n=t.n(i),o=t(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d={children:["",{children:["auth",{children:["register",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,33371)),"/var/www/html/src/app/auth/register/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,96394)),"/var/www/html/src/app/auth/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/var/www/html/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/var/www/html/src/app/auth/register/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/auth/register/page",pathname:"/auth/register",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10974:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var s=t(75986),a=t(8974);function i(...e){return(0,a.QP)((0,s.$)(e))}},14761:(e,r,t)=>{"use strict";t.d(r,{default:()=>b});var s=t(60687),a=t(27605),i=t(63442),n=t(45880),o=t(29523),l=t(89667),d=t(71669),c=t(29867),m=t(63213),u=t(43210),p=t(16189);let f=(0,t(82614).A)("BadgeHelp",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["line",{x1:"12",x2:"12.01",y1:"17",y2:"17",key:"io3f8k"}]]);var x=t(11516),h=t(3662),v=t(72963),g=t(76242);function j(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)e[s]=t[s]}return e}var w=function e(r,t){function s(e,s,a){if("undefined"!=typeof document){"number"==typeof(a=j({},t,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var n in a){if(a[n])i+="; "+n,!0!==a[n]&&(i+="="+a[n].split(";")[0])}return document.cookie=e+"="+r.write(s,e)+i}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],s={},a=0;a<t.length;a++){var i=t[a].split("="),n=i.slice(1).join("=");try{var o=decodeURIComponent(i[0]);if(s[o]=r.read(n,o),e===o)break}catch(e){}}return e?s[e]:s}},remove:function(e,r){s(e,"",j({},r,{expires:-1}))},withAttributes:function(r){return e(this.converter,j({},this.attributes,r))},withConverter:function(r){return e(j({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(r)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});let y=n.Ik({username:n.Yj().min(3,{message:"Имя пользователя должно быть не менее 3 символов."}),email:n.Yj().email({message:"Неверный формат email."}),password:n.Yj().min(6,{message:"Пароль должен быть не менее 6 символов."}),confirmPassword:n.Yj(),referralCode:n.Yj().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Пароли не совпадают.",path:["confirmPassword"]});function b(){let{toast:e}=(0,c.dj)(),{register:r}=(0,m.A)();(0,p.useRouter)(),(0,p.useSearchParams)();let[t,n]=(0,u.useState)(!1),[j,b]=(0,u.useState)(""),[N,C]=(0,u.useState)("idle"),[k,R]=(0,u.useState)(null);(0,u.useRef)(null);let P=(0,a.mN)({resolver:(0,i.u)(y),defaultValues:{username:"",email:"",password:"",confirmPassword:"",referralCode:""}});(0,u.useCallback)(async e=>{if(!e.trim())return C("idle"),R(null),P.clearErrors("referralCode"),!0;C("checking");try{let r=await fetch(`/api/referral/check?code=${encodeURIComponent(e)}`),t=await r.json();if(r.ok&&t.isValid)return C("valid"),R(t.referrerName||"Неизвестный пригласитель"),P.clearErrors("referralCode"),!0;return C("invalid"),R(null),P.setError("referralCode",{type:"manual",message:t.message||"Реферальный код недействителен."}),!1}catch(e){return console.error("Error checking referral code:",e),C("invalid"),R(null),P.setError("referralCode",{type:"manual",message:"Ошибка проверки кода."}),!1}},[P]);let A=async t=>{n(!0);let s=t.referralCode?.trim();if(s&&"invalid"===N){e({title:"Ошибка регистрации",description:"Пожалуйста, исправьте или удалите недействительный реферальный код.",variant:"destructive"}),n(!1);return}try{let a={...t,referralCode:"valid"===N&&s?s:void 0};await r(a.username,a.email,a.password,a.referralCode),a.referralCode&&w.remove("gh_referral_code",{path:"/"}),e({title:"Регистрация успешна!",description:"Вы успешно зарегистрированы. Теперь можете войти.",variant:"default"})}catch(r){console.error("Registration error in form:",r),e({title:"Ошибка регистрации",description:r.message||"Произошла ошибка при регистрации.",variant:"destructive"})}finally{n(!1)}};return(0,s.jsx)(d.lV,{...P,children:(0,s.jsxs)("form",{onSubmit:P.handleSubmit(A),className:"space-y-6",children:[(0,s.jsx)(d.zB,{control:P.control,name:"username",render:({field:e})=>(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{className:"text-foreground",children:"Имя пользователя (Логин)"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(l.p,{placeholder:"username",...e,disabled:t})}),(0,s.jsx)(d.C5,{})]})}),(0,s.jsx)(d.zB,{control:P.control,name:"email",render:({field:e})=>(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{className:"text-foreground",children:"Email"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(l.p,{placeholder:"you@example.com",...e,disabled:t})}),(0,s.jsx)(d.C5,{})]})}),(0,s.jsx)(d.zB,{control:P.control,name:"password",render:({field:e})=>(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{className:"text-foreground",children:"Пароль"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(l.p,{type:"password",placeholder:"••••••••",...e,disabled:t})}),(0,s.jsx)(d.C5,{})]})}),(0,s.jsx)(d.zB,{control:P.control,name:"confirmPassword",render:({field:e})=>(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{className:"text-foreground",children:"Подтвердите пароль"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(l.p,{type:"password",placeholder:"••••••••",...e,disabled:t})}),(0,s.jsx)(d.C5,{})]})}),(0,s.jsx)(d.zB,{control:P.control,name:"referralCode",render:({field:e})=>(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d.lR,{className:"text-foreground",children:"Реферальный код (необязательно)"}),(0,s.jsx)(g.Bc,{children:(0,s.jsxs)(g.m_,{children:[(0,s.jsx)(g.k$,{asChild:!0,children:(0,s.jsx)(f,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),(0,s.jsx)(g.ZI,{children:(0,s.jsx)("p",{children:"Если вас пригласил друг, введите его код."})})]})})]}),(0,s.jsx)(d.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.p,{placeholder:"ABC-1234",...e,disabled:t||"valid"===N,className:"valid"===N?"border-green-500 focus-visible:ring-green-500":"invalid"===N&&e.value.length>0?"border-destructive focus-visible:ring-destructive":""}),"checking"===N&&(0,s.jsx)(x.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin text-muted-foreground"}),"valid"===N&&(0,s.jsx)(h.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-green-500"}),"invalid"===N&&e.value.length>0&&(0,s.jsx)(v.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-destructive"})]})}),"valid"===N&&k&&(0,s.jsxs)("p",{className:"text-xs text-green-600",children:["Код действителен. Пригласитель: ",k]}),(0,s.jsx)(d.C5,{})," "]})}),(0,s.jsx)(o.$,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:t||"checking"===N,children:t?"Регистрация...":"Зарегистрироваться"})]})})}},16584:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/var/www/html/src/components/auth/RegisterForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/var/www/html/src/components/auth/RegisterForm.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33371:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var s=t(37413),a=t(16584),i=t(78963),n=t(4536),o=t.n(n),l=t(61120);let d=(0,t(3515).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function c(){return(0,s.jsx)("div",{className:"flex items-center justify-center py-10",children:(0,s.jsx)(d,{className:"h-8 w-8 animate-spin text-primary"})})}function m(){return(0,s.jsxs)(i.Zp,{className:"w-full max-w-md shadow-xl bg-card/80 backdrop-blur-md border-border/30",children:[" ",(0,s.jsxs)(i.aR,{className:"text-center",children:[(0,s.jsx)(i.ZB,{className:"text-3xl font-bold text-primary",children:"Регистрация"}),(0,s.jsx)(i.BT,{className:"text-muted-foreground",children:"Создайте новый аккаунт Green Hack"})]}),(0,s.jsxs)(i.Wu,{children:[(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)(c,{}),children:(0,s.jsx)(a.default,{})}),(0,s.jsxs)("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Уже есть аккаунт?"," ",(0,s.jsx)(o(),{href:"/auth/login",className:"font-semibold text-primary hover:underline",children:"Войти"})]})]})]})}},33873:e=>{"use strict";e.exports=require("path")},48799:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,85814,23)),Promise.resolve().then(t.bind(t,14761))},56671:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,46533,23))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},71669:(e,r,t)=>{"use strict";t.d(r,{C5:()=>v,MJ:()=>h,eI:()=>f,lR:()=>x,lV:()=>d,zB:()=>m});var s=t(60687),a=t(43210),i=t(8730),n=t(27605),o=t(4780),l=t(80013);let d=n.Op,c=a.createContext({}),m=({...e})=>(0,s.jsx)(c.Provider,{value:{name:e.name},children:(0,s.jsx)(n.xI,{...e})}),u=()=>{let e=a.useContext(c),r=a.useContext(p),{getFieldState:t,formState:s}=(0,n.xW)(),i=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...i}},p=a.createContext({}),f=a.forwardRef(({className:e,...r},t)=>{let i=a.useId();return(0,s.jsx)(p.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",e),...r})})});f.displayName="FormItem";let x=a.forwardRef(({className:e,...r},t)=>{let{error:a,formItemId:i}=u();return(0,s.jsx)(l.Label,{ref:t,className:(0,o.cn)(a&&"text-destructive",e),htmlFor:i,...r})});x.displayName="FormLabel";let h=a.forwardRef(({...e},r)=>{let{error:t,formItemId:a,formDescriptionId:n,formMessageId:o}=u();return(0,s.jsx)(i.DX,{ref:r,id:a,"aria-describedby":t?`${n} ${o}`:`${n}`,"aria-invalid":!!t,...e})});h.displayName="FormControl",a.forwardRef(({className:e,...r},t)=>{let{formDescriptionId:a}=u();return(0,s.jsx)("p",{ref:t,id:a,className:(0,o.cn)("text-sm text-muted-foreground",e),...r})}).displayName="FormDescription";let v=a.forwardRef(({className:e,children:r,...t},a)=>{let{error:i,formMessageId:n}=u(),l=i?String(i?.message??""):r;return l?(0,s.jsx)("p",{ref:a,id:n,className:(0,o.cn)("text-sm font-medium text-destructive",e),...t,children:l}):null});v.displayName="FormMessage"},72963:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},76242:(e,r,t)=>{"use strict";t.d(r,{Bc:()=>o,ZI:()=>c,k$:()=>d,m_:()=>l});var s=t(60687),a=t(43210),i=t(9989),n=t(4780);let o=({delayDuration:e=300,...r})=>(0,s.jsx)(i.Kq,{delayDuration:e,...r});o.displayName=i.Kq.displayName;let l=i.bL,d=i.l9,c=a.forwardRef(({className:e,sideOffset:r=4,...t},a)=>(0,s.jsx)(i.UC,{ref:a,sideOffset:r,className:(0,n.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));c.displayName=i.UC.displayName},78963:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>o});var s=t(37413),a=t(61120),i=t(10974);let n=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let o=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));o.displayName="CardHeader";let l=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("text-xl font-normal uppercase tracking-wider leading-none",e),...r}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent",a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},79551:e=>{"use strict";e.exports=require("url")},91175:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,49603,23))},96394:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var s=t(37413);t(61120);var a=t(53384);function i({children:e}){return(0,s.jsxs)("div",{className:"relative flex items-center justify-center min-h-screen p-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 z-[-1]",children:[(0,s.jsx)(a.default,{src:"https://i.ytimg.com/vi/gvRUaKW6Uyg/maxresdefault.jpg",alt:"Abstract background",layout:"fill",objectFit:"cover",quality:85,className:"blur-sm scale-105","data-ai-hint":"abstract background"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-xs"})," "]}),e]})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,6724,377,1658,8030,9989,4017,8559,4519],()=>t(9929));module.exports=s})();