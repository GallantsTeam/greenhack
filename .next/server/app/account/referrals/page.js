(()=>{var e={};e.id=3179,e.ids=[3179],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19866:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var s=t(60687),a=t(44493),n=t(29523),d=t(89667);let i=(0,t(82614).A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var l=t(58450),o=t(92477),c=t(48206),m=t(24482),x=t(63213),p=t(43210),u=t(29867);function h(){let{currentUser:e}=(0,x.A)(),{toast:r}=(0,u.dj)(),[t,h]=(0,p.useState)(e?.referral_code||"ЗАГРУЗКА..."),[f,y]=(0,p.useState)(""),[j,g]=(0,p.useState)([]),[v,w]=(0,p.useState)(!0),[N,b]=(0,p.useState)(!1),[k,_]=(0,p.useState)(!1),A=async(e,t)=>{try{await navigator.clipboard.writeText(e),"code"===t&&b(!0),"link"===t&&_(!0),r({title:"Скопировано!",description:"code"===t?"Реферальный код скопирован.":"Реферальная ссылка скопирована."}),setTimeout(()=>{"code"===t&&b(!1),"link"===t&&_(!1)},2e3)}catch(e){r({title:"Ошибка",description:"Не удалось скопировать.",variant:"destructive"})}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-primary tracking-tight",children:"Реферальная Система"}),(0,s.jsxs)(a.Zp,{className:"shadow-lg",children:[(0,s.jsxs)(a.aR,{children:[(0,s.jsxs)(a.ZB,{className:"text-xl text-primary flex items-center",children:[(0,s.jsx)(i,{className:"mr-2 h-6 w-6"}),"Пригласите Друзей"]}),(0,s.jsx)(a.BT,{className:"text-muted-foreground",children:"Поделитесь своим реферальным кодом или ссылкой и получайте GH за каждую покупку ваших друзей!"})]}),(0,s.jsxs)(a.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Ваш реферальный код:"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)(d.p,{type:"text",value:t,readOnly:!0,className:"font-mono bg-muted text-foreground"}),(0,s.jsx)(n.$,{variant:"outline",size:"sm",className:"border-primary text-primary hover:bg-primary/10",onClick:()=>A(t,"code"),children:N?(0,s.jsx)(l.A,{className:"h-4 w-4"}):(0,s.jsx)(o.A,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Ваша реферальная ссылка:"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)(d.p,{type:"text",value:f,readOnly:!0,className:"font-mono text-xs bg-muted text-foreground"}),(0,s.jsx)(n.$,{variant:"outline",size:"sm",className:"border-primary text-primary hover:bg-primary/10",onClick:()=>A(f,"link"),children:k?(0,s.jsx)(l.A,{className:"h-4 w-4"}):(0,s.jsx)(o.A,{className:"h-4 w-4"})})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)(a.Zp,{className:"shadow-md",children:[(0,s.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(a.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Приглашено Друзей"}),(0,s.jsx)(c.A,{className:"h-5 w-5 text-primary"})]}),(0,s.jsxs)(a.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:v?"...":j.length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground pt-1",children:"Всего приглашенных пользователей"})]})]}),(0,s.jsxs)(a.Zp,{className:"shadow-md",children:[(0,s.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(a.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Заработано GH"}),(0,s.jsx)(m.A,{className:"h-5 w-5 text-primary"})]}),(0,s.jsxs)(a.Wu,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:[v?"...":j.reduce((e,r)=>e+("completed"===r.status&&r.reward_amount_gh||0),0).toFixed(2)," GH"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground pt-1",children:"С реферальной программы"})]})]})]}),(0,s.jsxs)(a.Zp,{className:"shadow-lg",children:[(0,s.jsxs)(a.aR,{children:[(0,s.jsx)(a.ZB,{className:"text-xl text-primary",children:"Список ваших рефералов"}),(0,s.jsx)(a.BT,{className:"text-muted-foreground",children:"Пользователи, зарегистрировавшиеся по вашему коду."})]}),(0,s.jsx)(a.Wu,{children:v?(0,s.jsx)("p",{className:"text-muted-foreground",children:"Загрузка списка рефералов..."}):j.length>0?(0,s.jsx)("ul",{className:"space-y-2",children:j.map(e=>(0,s.jsxs)("li",{className:"p-3 bg-muted/50 rounded-md text-sm",children:[(0,s.jsx)("span",{className:"font-semibold text-foreground",children:e.referred_username||`Пользователь #${e.referred_user_id}`})," - Статус: ",(0,s.jsx)("span",{className:`font-medium ${"completed"===e.status?"text-primary":"text-muted-foreground"}`,children:"completed"===e.status?"Завершен":"pending_purchase"===e.status?"Ожидает покупки":"Истек"}),"completed"===e.status&&e.reward_amount_gh&&(0,s.jsxs)("span",{className:"text-xs text-primary",children:[" (+",e.reward_amount_gh," GH)"]})]},e.id))}):(0,s.jsx)("div",{className:"min-h-[100px] flex items-center justify-center border-2 border-dashed border-border rounded-lg",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"У вас пока нет рефералов."})})})]})]})}},24482:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35133:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>d.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o});var s=t(65239),a=t(48088),n=t(88170),d=t.n(n),i=t(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let o={children:["",{children:["account",{children:["referrals",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,57733)),"/var/www/html/src/app/account/referrals/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,96779)),"/var/www/html/src/app/account/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/var/www/html/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/var/www/html/src/app/account/referrals/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/account/referrals/page",pathname:"/account/referrals",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},44493:(e,r,t)=>{"use strict";t.d(r,{BT:()=>o,Wu:()=>c,ZB:()=>l,Zp:()=>d,aR:()=>i,wL:()=>m});var s=t(60687),a=t(43210),n=t(4780);let d=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));d.displayName="Card";let i=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let l=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-xl font-normal uppercase tracking-wider leading-none",e),...r}));l.displayName="CardTitle";let o=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...r}));o.displayName="CardDescription";let c=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent";let m=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r}));m.displayName="CardFooter"},57733:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/var/www/html/src/app/account/referrals/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/var/www/html/src/app/account/referrals/page.tsx","default")},58450:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},62245:(e,r,t)=>{Promise.resolve().then(t.bind(t,57733))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},75397:(e,r,t)=>{Promise.resolve().then(t.bind(t,19866))},79551:e=>{"use strict";e.exports=require("url")},92477:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,6724,377,1658,8030,9989,4519,1208],()=>t(35133));module.exports=s})();