(()=>{var e={};e.id=1295,e.ids=[1295],e.modules={3163:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/var/www/html/src/app/admin/products/add/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/var/www/html/src/app/admin/products/add/page.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15079:(e,s,t)=>{"use strict";t.d(s,{bq:()=>p,eb:()=>_,gC:()=>h,l6:()=>c,yv:()=>m});var a=t(60687),r=t(43210),l=t(22670),i=t(61662),n=t(89743),o=t(58450),d=t(4780);let c=l.bL;l.YJ;let m=l.WT,p=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.l9,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=l.l9.displayName;let u=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})}));u.displayName=l.PP.displayName;let x=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})}));x.displayName=l.wn.displayName;let h=r.forwardRef(({className:e,children:s,position:t="popper",...r},i)=>(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:i,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[(0,a.jsx)(u,{}),(0,a.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(x,{})]})}));h.displayName=l.UC.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=l.JU.displayName;let _=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.q7,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:s})]}));_.displayName=l.q7.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.wv.displayName},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34729:(e,s,t)=>{"use strict";t.d(s,{T:()=>i});var a=t(60687),r=t(43210),l=t(4780);let i=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...s}));i.displayName="Textarea"},35115:(e,s,t)=>{Promise.resolve().then(t.bind(t,45313))},45313:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>F});var a=t(60687),r=t(43210),l=t(27605),i=t(63442),n=t(45880),o=t(29523),d=t(89667),c=t(80013),m=t(34729),p=t(15079),u=t(44493),x=t(85763),h=t(29867),_=t(16189),g=t(78726);let f=(0,t(82614).A)("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);var j=t(55817),b=t(8872),v=t(73595),y=t(36644),N=t(88853),w=t(56737),k=t(29596),S=t(57207),L=t(35265),P=t(11516),A=t(96834);let Y=n.Ik({id:n.ai().optional(),duration_days:n.au.number().min(1,"Длительность должна быть не менее 1 дня.").optional().default(1),price_rub:n.au.number().min(0,"Цена RUB не может быть отрицательной.").optional().default(0),price_gh:n.au.number().min(0,"Цена GH не может быть отрицательной.").optional().default(0),payment_link:n.Yj().url({message:"Неверный URL ссылки на оплату."}).optional().or(n.eu("")).nullable(),mode_label:n.Yj().optional().nullable()}),R=n.Ik({name:n.Yj().min(1,"Название обязательно."),slug:n.Yj().min(1,"Slug обязателен.").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Slug может содержать только строчные буквы, цифры и дефисы."),game_slug:n.Yj().min(1,"Категория (игра) обязательна."),status:n.k5(["safe","updating","risky","unknown"],{required_error:"Статус обязателен."}).default("unknown"),status_text:n.Yj().optional().nullable(),price_text:n.Yj().optional().nullable(),short_description:n.Yj().optional().nullable(),long_description:n.Yj().optional().nullable(),image_url:n.Yj().url({message:"Неверный URL изображения."}).optional().or(n.eu("")).nullable(),data_ai_hint:n.Yj().optional().nullable(),mode:n.k5(["PVE","PVP","BOTH"]).nullable().optional(),gallery_image_urls:n.Yj().optional().nullable(),functions_aim_title:n.Yj().optional().nullable(),functions_aim:n.Yj().optional().nullable(),functions_aim_description:n.Yj().optional().nullable(),functions_esp_title:n.Yj().optional().nullable(),functions_wallhack:n.Yj().optional().nullable(),functions_esp_description:n.Yj().optional().nullable(),functions_misc_title:n.Yj().optional().nullable(),functions_misc:n.Yj().optional().nullable(),functions_misc_description:n.Yj().optional().nullable(),system_os:n.Yj().optional().nullable(),system_build:n.Yj().optional().nullable(),system_gpu:n.Yj().optional().nullable(),system_cpu:n.Yj().optional().nullable(),retrieval_modal_intro_text:n.Yj().optional().nullable(),retrieval_modal_antivirus_text:n.Yj().optional().nullable(),retrieval_modal_antivirus_link_text:n.Yj().max(255).optional().nullable(),retrieval_modal_antivirus_link_url:n.Yj().url({message:"Неверный URL"}).optional().or(n.eu("")).nullable(),retrieval_modal_launcher_text:n.Yj().optional().nullable(),retrieval_modal_launcher_link_text:n.Yj().max(255).optional().nullable(),retrieval_modal_launcher_link_url:n.Yj().url({message:"Неверный URL"}).optional().or(n.eu("")).nullable(),retrieval_modal_key_paste_text:n.Yj().optional().nullable(),retrieval_modal_support_text:n.Yj().optional().nullable(),retrieval_modal_support_link_text:n.Yj().max(255).optional().nullable(),retrieval_modal_support_link_url:n.Yj().url({message:"Неверный URL"}).optional().or(n.eu("")).nullable(),retrieval_modal_how_to_run_link:n.Yj().url({message:"Неверный URL"}).optional().or(n.eu("")).nullable(),pricing_options:n.YO(Y).optional().default([{duration_days:1,price_rub:0,price_gh:0,payment_link:"",mode_label:""}])}),C="__NULL_VALUE__";function F(){let{toast:e}=(0,h.dj)(),s=(0,_.useRouter)(),[t,n]=(0,r.useState)(!1),[Y,F]=(0,r.useState)([]),[U,$]=(0,r.useState)(!0),[M,V]=(0,r.useState)(""),[q,B]=(0,r.useState)([]),[T,E]=(0,r.useState)(""),[z,I]=(0,r.useState)([]),[Z,H]=(0,r.useState)(""),[G,X]=(0,r.useState)([]),O=(0,l.mN)({resolver:(0,i.u)(R),defaultValues:{name:"",slug:"",game_slug:"",status:"unknown",status_text:"",price_text:"",short_description:"",long_description:"",image_url:"",data_ai_hint:"",mode:null,gallery_image_urls:"",functions_aim_title:"Aimbot Функции",functions_aim:"",functions_aim_description:"",functions_esp_title:"ESP/Wallhack Функции",functions_wallhack:"",functions_esp_description:"",functions_misc_title:"Прочие Функции",functions_misc:"",functions_misc_description:"",system_os:"",system_build:"",system_gpu:"",system_cpu:"",retrieval_modal_intro_text:"",retrieval_modal_antivirus_text:"",retrieval_modal_antivirus_link_text:"",retrieval_modal_antivirus_link_url:"",retrieval_modal_launcher_text:"",retrieval_modal_launcher_link_text:"",retrieval_modal_launcher_link_url:"",retrieval_modal_key_paste_text:"",retrieval_modal_support_text:"",retrieval_modal_support_link_text:"",retrieval_modal_support_link_url:"",retrieval_modal_how_to_run_link:"",pricing_options:[{duration_days:1,price_rub:0,price_gh:0,payment_link:"",mode_label:""}]}}),{fields:W,append:D,remove:J}=(0,l.jz)({control:O.control,name:"pricing_options"});(0,r.useCallback)(async()=>{$(!0);try{let e=await fetch("/api/categories");if(!e.ok)throw Error("Failed to fetch categories");let s=await e.json();F(s)}catch(s){e({title:"Ошибка",description:"Не удалось загрузить категории.",variant:"destructive"})}finally{$(!1)}},[e]),O.watch("name");let K=e=>{"aim"===e&&M.trim()?(q.includes(M.trim())||B(e=>[...e,M.trim()]),V("")):"wh"===e&&T.trim()?(z.includes(T.trim())||I(e=>[...e,T.trim()]),E("")):"misc"===e&&Z.trim()&&(G.includes(Z.trim())||X(e=>[...e,Z.trim()]),H(""))},Q=(e,s)=>{"aim"===e&&B(e=>e.filter((e,t)=>t!==s)),"wh"===e&&I(e=>e.filter((e,t)=>t!==s)),"misc"===e&&X(e=>e.filter((e,t)=>t!==s))},ee=(e,s,r,l,i,n)=>(0,a.jsxs)("div",{className:"space-y-3 p-4 border border-border/30 rounded-md bg-card/50 shadow-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:i,className:"text-foreground font-semibold",children:"Заголовок секции"}),(0,a.jsx)(d.p,{id:i,...O.register(i),placeholder:"functions_aim_title"===i?"Aimbot Функции":"functions_esp_title"===i?"ESP/Wallhack Функции":"Прочие Функции",className:"mt-1 h-9",disabled:t})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:n,className:"text-foreground",children:"Описание секции (опционально)"}),(0,a.jsx)(m.T,{id:n,...O.register(n),placeholder:"Краткое описание этой группы функций...",className:"mt-1 min-h-[60px]",disabled:t})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(c.Label,{className:"text-xs text-muted-foreground",children:"Добавить функцию"}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(d.p,{value:s,onChange:e=>r(e.target.value),placeholder:"Новая функция",className:"flex-grow h-9",disabled:t,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),K(l))}}),(0,a.jsx)(o.$,{type:"button",variant:"outline",size:"sm",onClick:()=>K(l),disabled:t||!s.trim(),className:"h-9 border-primary text-primary hover:bg-primary/10",children:"Добавить"})]})]}),e.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2 p-2 border border-input rounded-md min-h-[40px] bg-background",children:e.map((e,s)=>(0,a.jsxs)(A.E,{variant:"outline",className:"text-sm py-1 px-2 flex items-center border-primary/50 text-foreground",children:[e,(0,a.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",className:"ml-1.5 h-4 w-4 p-0 text-muted-foreground hover:text-destructive",onClick:()=>Q(l,s),disabled:t,children:(0,a.jsx)(g.A,{className:"h-3 w-3"})})]},`${l}-${s}-${e}`))})]}),es=async t=>{n(!0);try{let a={...t,mode:t.mode===C?null:t.mode,functions_aim:q.join(","),functions_wallhack:z.join(","),functions_misc:G.join(","),gallery_image_urls:t.gallery_image_urls?t.gallery_image_urls.split(",").map(e=>e.trim()).filter(e=>e):[],pricing_options:t.pricing_options?.map(e=>({...e,payment_link:e.payment_link||null,mode_label:e.mode_label||null}))},r=await fetch("/api/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),l=await r.json();if(!r.ok)throw Error(l.message||"Не удалось добавить товар.");e({title:"Товар добавлен",description:`Товар "${t.name}" был успешно создан.`}),s.push("/admin/products")}catch(s){e({title:"Ошибка",description:s.message||"Произошла ошибка при добавлении товара.",variant:"destructive"})}finally{n(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-primary flex items-center",children:[(0,a.jsx)(f,{className:"mr-2 h-6 w-6"}),"Добавить новый товар"]}),(0,a.jsxs)(o.$,{onClick:()=>s.push("/admin/products"),variant:"outline",className:"border-primary text-primary hover:bg-primary/10",children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"К списку товаров"]})]}),(0,a.jsx)(u.Zp,{className:"shadow-lg",children:(0,a.jsx)(u.Wu,{className:"pt-6",children:(0,a.jsxs)("form",{onSubmit:O.handleSubmit(es),children:[(0,a.jsxs)(x.tU,{defaultValue:"general",className:"w-full",children:[(0,a.jsxs)(x.j7,{className:"grid w-full grid-cols-2 md:grid-cols-3 lg:grid-cols-6 mb-6",children:[(0,a.jsxs)(x.Xi,{value:"general",children:[(0,a.jsx)(b.A,{className:"mr-1.5 h-4 w-4"}),"Общие"]}),(0,a.jsxs)(x.Xi,{value:"gallery",children:[(0,a.jsx)(v.A,{className:"mr-1.5 h-4 w-4"}),"Галерея"]}),(0,a.jsxs)(x.Xi,{value:"description",children:[(0,a.jsx)(y.A,{className:"mr-1.5 h-4 w-4"}),"Описание"]}),(0,a.jsxs)(x.Xi,{value:"features",children:[(0,a.jsx)(N.A,{className:"mr-1.5 h-4 w-4"}),"Функции"]}),(0,a.jsxs)(x.Xi,{value:"os",children:[(0,a.jsx)(w.A,{className:"mr-1.5 h-4 w-4"}),"ОС"]}),(0,a.jsxs)(x.Xi,{value:"pricing",children:[(0,a.jsx)(k.A,{className:"mr-1.5 h-4 w-4"}),"Стоимость"]})]}),(0,a.jsxs)(x.av,{value:"general",className:"space-y-4",children:[(0,a.jsx)(u.aR,{className:"px-0 py-2",children:(0,a.jsxs)(u.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,a.jsx)(b.A,{className:"mr-2 h-5 w-5 text-primary"})," Основная информация"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"name",className:"text-foreground",children:"Название товара"}),(0,a.jsx)(d.p,{id:"name",...O.register("name"),placeholder:"UnitHack для Warface",className:"mt-1",disabled:t}),O.formState.errors.name&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"slug",className:"text-foreground",children:"Slug (URL)"}),(0,a.jsx)(d.p,{id:"slug",...O.register("slug"),placeholder:"unithack-warface",className:"mt-1",disabled:t}),O.formState.errors.slug&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.slug.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"game_slug",className:"text-foreground",children:"Категория (Игра)"}),(0,a.jsx)(l.xI,{control:O.control,name:"game_slug",render:({field:e})=>(0,a.jsxs)(p.l6,{onValueChange:e.onChange,value:e.value||"",disabled:t||U,children:[(0,a.jsx)(p.bq,{className:"w-full mt-1",children:(0,a.jsx)(p.yv,{placeholder:U?"Загрузка категорий...":"Выберите игру"})}),(0,a.jsx)(p.gC,{children:Y.map(e=>(0,a.jsx)(p.eb,{value:e.slug,children:e.name},e.id))})]})}),O.formState.errors.game_slug&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.game_slug.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"status",className:"text-foreground",children:"Статус"}),(0,a.jsx)(l.xI,{control:O.control,name:"status",render:({field:e})=>(0,a.jsxs)(p.l6,{onValueChange:e.onChange,value:e.value,disabled:t,children:[(0,a.jsx)(p.bq,{className:"w-full mt-1",children:(0,a.jsx)(p.yv,{placeholder:"Выберите статус"})}),(0,a.jsxs)(p.gC,{children:[(0,a.jsx)(p.eb,{value:"safe",children:"Безопасен (safe)"}),(0,a.jsx)(p.eb,{value:"updating",children:"На обновлении (updating)"}),(0,a.jsx)(p.eb,{value:"risky",children:"Рискованно (risky)"}),(0,a.jsx)(p.eb,{value:"unknown",children:"Неизвестно (unknown)"})]})]})}),O.formState.errors.status&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.status.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"status_text",className:"text-foreground",children:"Текст статуса (опционально)"}),(0,a.jsx)(d.p,{id:"status_text",...O.register("status_text"),placeholder:"Например, Безопасен с 01.01.2024",className:"mt-1",disabled:t})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"price_text",className:"text-foreground",children:'Текст цены (напр. "от 100₽")'}),(0,a.jsx)(d.p,{id:"price_text",...O.register("price_text"),placeholder:"от 150₽",className:"mt-1",disabled:t}),O.formState.errors.price_text&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.price_text.message})]})]}),(0,a.jsxs)(x.av,{value:"gallery",className:"space-y-4",children:[(0,a.jsx)(u.aR,{className:"px-0 py-2",children:(0,a.jsxs)(u.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,a.jsx)(v.A,{className:"mr-2 h-5 w-5 text-primary"})," Медиафайлы"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"image_url",className:"text-foreground",children:"URL основного изображения"}),(0,a.jsx)(d.p,{id:"image_url",...O.register("image_url"),placeholder:"https://example.com/image.jpg",className:"mt-1",disabled:t}),O.formState.errors.image_url&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.image_url.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"data_ai_hint",className:"text-foreground",children:"Подсказка для AI (для фото)"}),(0,a.jsx)(d.p,{id:"data_ai_hint",...O.register("data_ai_hint"),placeholder:"warface cheat icon",className:"mt-1",disabled:t})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"gallery_image_urls",className:"text-foreground",children:"URL изображений галереи (через запятую)"}),(0,a.jsx)(m.T,{id:"gallery_image_urls",...O.register("gallery_image_urls"),placeholder:"url1.jpg,url2.png,url3.webp",className:"mt-1 min-h-[60px]",disabled:t})]})]}),(0,a.jsxs)(x.av,{value:"description",className:"space-y-4",children:[(0,a.jsxs)(u.aR,{className:"px-0 py-2",children:[(0,a.jsxs)(u.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,a.jsx)(y.A,{className:"mr-2 h-5 w-5 text-primary"})," Описание"]}),(0,a.jsx)(u.BT,{className:"text-muted-foreground",children:"Эти поля являются общими для товара. PVE/PVP специфичные детали можно указать в описании ниже или создать отдельные товары."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"short_description",className:"text-foreground",children:"Краткое описание"}),(0,a.jsx)(m.T,{id:"short_description",...O.register("short_description"),placeholder:"Краткое описание товара...",className:"mt-1 min-h-[60px]",disabled:t}),O.formState.errors.short_description&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.short_description.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"long_description",className:"text-foreground",children:"Полное описание (Поддержка HTML)"}),(0,a.jsx)(m.T,{id:"long_description",...O.register("long_description"),placeholder:"Детальное описание товара, его особенности и преимущества...",className:"mt-1 min-h-[120px]",disabled:t})]})]}),(0,a.jsxs)(x.av,{value:"features",className:"space-y-6",children:[(0,a.jsxs)(u.aR,{className:"px-0 py-2",children:[(0,a.jsxs)(u.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,a.jsx)(N.A,{className:"mr-2 h-5 w-5 text-primary"})," Функционал (Общий)"]}),(0,a.jsx)(u.BT,{className:"text-muted-foreground",children:"Укажите общие функции товара."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"mode",className:"text-foreground",children:"Основной режим товара (для фильтрации)"}),(0,a.jsx)(l.xI,{control:O.control,name:"mode",render:({field:e})=>(0,a.jsxs)(p.l6,{onValueChange:s=>e.onChange(s===C?null:s),value:e.value||C,disabled:t,children:[(0,a.jsx)(p.bq,{className:"w-full mt-1",children:(0,a.jsx)(p.yv,{placeholder:"Выберите режим"})}),(0,a.jsxs)(p.gC,{children:[(0,a.jsx)(p.eb,{value:C,children:"Не указан"}),(0,a.jsx)(p.eb,{value:"PVE",children:"PVE"}),(0,a.jsx)(p.eb,{value:"PVP",children:"PVP"}),(0,a.jsx)(p.eb,{value:"BOTH",children:"BOTH (Оба)"})]})]})}),O.formState.errors.mode&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.mode.message})]}),ee(q,M,V,"aim","functions_aim_title","functions_aim_description"),ee(z,T,E,"wh","functions_esp_title","functions_esp_description"),ee(G,Z,H,"misc","functions_misc_title","functions_misc_description")]}),(0,a.jsxs)(x.av,{value:"os",className:"space-y-4",children:[(0,a.jsx)(u.aR,{className:"px-0 py-2",children:(0,a.jsxs)(u.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,a.jsx)(w.A,{className:"mr-2 h-5 w-5 text-primary"})," Системные требования"]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"system_os",className:"text-foreground",children:"ОС"}),(0,a.jsx)(d.p,{id:"system_os",...O.register("system_os"),placeholder:"Windows 10/11",className:"mt-1",disabled:t})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"system_build",className:"text-foreground",children:"Сборка Windows"}),(0,a.jsx)(d.p,{id:"system_build",...O.register("system_build"),placeholder:"2004 - 22H2",className:"mt-1",disabled:t})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"system_gpu",className:"text-foreground",children:"Видеокарта"}),(0,a.jsx)(d.p,{id:"system_gpu",...O.register("system_gpu"),placeholder:"Nvidia / AMD",className:"mt-1",disabled:t})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:"system_cpu",className:"text-foreground",children:"Процессор"}),(0,a.jsx)(d.p,{id:"system_cpu",...O.register("system_cpu"),placeholder:"Intel / AMD",className:"mt-1",disabled:t})]})]})]}),(0,a.jsxs)(x.av,{value:"pricing",className:"space-y-4",children:[(0,a.jsx)(u.aR,{className:"px-0 py-2",children:(0,a.jsxs)(u.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,a.jsx)(k.A,{className:"mr-2 h-5 w-5 text-primary"})," Варианты цен"]})}),W.map((e,s)=>(0,a.jsxs)("div",{className:"space-y-3 p-4 border border-border/30 rounded-md bg-muted/20 shadow-sm",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:`pricing_options.${s}.duration_days`,className:"text-xs text-muted-foreground",children:"Длительность (дни)"}),(0,a.jsx)(d.p,{type:"number",...O.register(`pricing_options.${s}.duration_days`),className:"mt-1 h-9",disabled:t}),O.formState.errors.pricing_options?.[s]?.duration_days&&(0,a.jsx)("p",{className:"text-xs text-destructive mt-1",children:O.formState.errors.pricing_options?.[s]?.duration_days?.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:`pricing_options.${s}.mode_label`,className:"text-xs text-muted-foreground",children:"Название режима (опционально)"}),(0,a.jsx)(d.p,{...O.register(`pricing_options.${s}.mode_label`),placeholder:"PVP / BattleRoyale",className:"mt-1 h-9",disabled:t}),O.formState.errors.pricing_options?.[s]?.mode_label&&(0,a.jsx)("p",{className:"text-xs text-destructive mt-1",children:O.formState.errors.pricing_options?.[s]?.mode_label?.message})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:`pricing_options.${s}.price_gh`,className:"text-xs text-muted-foreground",children:"Цена (GH)"}),(0,a.jsx)(d.p,{type:"number",step:"0.01",...O.register(`pricing_options.${s}.price_gh`),className:"mt-1 h-9",disabled:t}),O.formState.errors.pricing_options?.[s]?.price_gh&&(0,a.jsx)("p",{className:"text-xs text-destructive mt-1",children:O.formState.errors.pricing_options?.[s]?.price_gh?.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:`pricing_options.${s}.price_rub`,className:"text-xs text-muted-foreground",children:"Цена (RUB)"}),(0,a.jsx)(d.p,{type:"number",step:"0.01",...O.register(`pricing_options.${s}.price_rub`),className:"mt-1 h-9",disabled:t}),O.formState.errors.pricing_options?.[s]?.price_rub&&(0,a.jsx)("p",{className:"text-xs text-destructive mt-1",children:O.formState.errors.pricing_options?.[s]?.price_rub?.message})]}),(0,a.jsx)("div",{className:"flex items-center justify-end",children:(0,a.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>J(s),className:"text-destructive hover:bg-destructive/10 h-9 w-9",disabled:t||W.length<=1,children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Label,{htmlFor:`pricing_options.${s}.payment_link`,className:"text-xs text-muted-foreground",children:"Ссылка на оплату (для RUB)"}),(0,a.jsx)(d.p,{type:"url",...O.register(`pricing_options.${s}.payment_link`),placeholder:"https://yoomoney.ru/...",className:"mt-1 h-9",disabled:t}),O.formState.errors.pricing_options?.[s]?.payment_link&&(0,a.jsx)("p",{className:"text-xs text-destructive mt-1",children:O.formState.errors.pricing_options?.[s]?.payment_link?.message})]})]},e.id)),(0,a.jsxs)(o.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D({duration_days:1,price_rub:0,price_gh:0,payment_link:"",mode_label:""}),disabled:t,className:"border-primary text-primary hover:bg-primary/10",children:[(0,a.jsx)(L.A,{className:"mr-2 h-4 w-4"})," Добавить вариант цены"]})]})]}),(0,a.jsx)("div",{className:"flex justify-end pt-8",children:(0,a.jsxs)(o.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",disabled:t||U,children:[t?(0,a.jsx)(P.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,t?"Добавление...":"Добавить товар"]})})]})})})]})}},56737:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(82614).A)("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]])},57207:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(82614).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70817:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=t(65239),r=t(48088),l=t(88170),i=t.n(l),n=t(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let d={children:["",{children:["admin",{children:["products",{children:["add",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3163)),"/var/www/html/src/app/admin/products/add/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,99111)),"/var/www/html/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/var/www/html/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/var/www/html/src/app/admin/products/add/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/admin/products/add/page",pathname:"/admin/products/add",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},73595:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(82614).A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},79551:e=>{"use strict";e.exports=require("url")},85763:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>n});var a=t(60687),r=t(43210),l=t(41360),i=t(4780);let n=l.bL,o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.B8,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));o.displayName=l.B8.displayName;let d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.l9,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=l.l9.displayName;let c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.UC,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));c.displayName=l.UC.displayName},98163:(e,s,t)=>{Promise.resolve().then(t.bind(t,3163))}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[4447,6724,377,1658,8123,8030,4670,2340,4519,5524],()=>t(70817));module.exports=a})();