(()=>{var e={};e.id=2902,e.ids=[2902],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15079:(e,s,t)=>{"use strict";t.d(s,{bq:()=>p,eb:()=>g,gC:()=>h,l6:()=>c,yv:()=>m});var r=t(60687),a=t(43210),i=t(22670),l=t(61662),n=t(89743),o=t(58450),d=t(4780);let c=i.bL;i.YJ;let m=i.WT,p=a.forwardRef(({className:e,children:s,...t},a)=>(0,r.jsxs)(i.l9,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,(0,r.jsx)(i.In,{asChild:!0,children:(0,r.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=i.l9.displayName;let u=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}));u.displayName=i.PP.displayName;let x=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})}));x.displayName=i.wn.displayName;let h=a.forwardRef(({className:e,children:s,position:t="popper",...a},l)=>(0,r.jsx)(i.ZL,{children:(0,r.jsxs)(i.UC,{ref:l,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...a,children:[(0,r.jsx)(u,{}),(0,r.jsx)(i.LM,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(x,{})]})}));h.displayName=i.UC.displayName,a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=i.JU.displayName;let g=a.forwardRef(({className:e,children:s,...t},a)=>(0,r.jsxs)(i.q7,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})}),(0,r.jsx)(i.p4,{children:s})]}));g.displayName=i.q7.displayName,a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=i.wv.displayName},17666:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/var/www/html/src/app/admin/products/[slug]/edit/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/var/www/html/src/app/admin/products/[slug]/edit/page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27786:(e,s,t)=>{Promise.resolve().then(t.bind(t,17666))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34729:(e,s,t)=>{"use strict";t.d(s,{T:()=>l});var r=t(60687),a=t(43210),i=t(4780);let l=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...s}));l.displayName="Textarea"},35137:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},43152:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Y});var r=t(60687),a=t(43210),i=t(27605),l=t(63442),n=t(45880),o=t(29523),d=t(89667),c=t(80013),m=t(34729),p=t(44493),u=t(15079),x=t(29867),h=t(16189),g=t(78726),f=t(11516),_=t(35137),j=t(55817),b=t(8872),y=t(73595),v=t(36644),N=t(88853),w=t(56737),k=t(29596),A=t(57207),S=t(35265),P=t(96834),L=t(85763);let C=n.Ik({id:n.ai().optional(),duration_days:n.au.number().min(1,"Длительность должна быть не менее 1 дня."),price_rub:n.au.number().min(0,"Цена RUB не может быть отрицательной."),price_gh:n.au.number().min(0,"Цена GH не может быть отрицательной."),payment_link:n.Yj().url({message:"Неверный URL ссылки на оплату."}).optional().or(n.eu("")).nullable(),mode_label:n.Yj().optional().nullable()}),R=n.Ik({name:n.Yj().min(1,"Название обязательно."),slug:n.Yj().min(1,"Slug обязателен.").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Slug может содержать только строчные буквы, цифры и дефисы."),game_slug:n.Yj().min(1,"Категория (игра) обязательна."),status:n.k5(["safe","updating","risky","unknown"],{required_error:"Статус обязателен."}),status_text:n.Yj().optional().nullable(),price_text:n.Yj().optional().nullable(),short_description:n.Yj().optional().nullable(),long_description:n.Yj().optional().nullable(),image_url:n.Yj().url({message:"Неверный URL изображения."}).optional().or(n.eu("")).nullable(),data_ai_hint:n.Yj().optional().nullable(),mode:n.k5(["PVE","PVP","BOTH"]).nullable().optional(),gallery_image_urls:n.Yj().optional().nullable(),functions_aim_title:n.Yj().optional().nullable(),functions_aim:n.Yj().optional().nullable(),functions_aim_description:n.Yj().optional().nullable(),functions_esp_title:n.Yj().optional().nullable(),functions_wallhack:n.Yj().optional().nullable(),functions_esp_description:n.Yj().optional().nullable(),functions_misc_title:n.Yj().optional().nullable(),functions_misc:n.Yj().optional().nullable(),functions_misc_description:n.Yj().optional().nullable(),system_os:n.Yj().optional().nullable(),system_build:n.Yj().optional().nullable(),system_gpu:n.Yj().optional().nullable(),system_cpu:n.Yj().optional().nullable(),pricing_options:n.YO(C).optional().default([])}),F="__NULL_VALUE__";function Y(){let{toast:e}=(0,x.dj)(),s=(0,h.useRouter)(),t=(0,h.useParams)().slug,[n,C]=(0,a.useState)(!1),[Y,$]=(0,a.useState)(!0),[M,E]=(0,a.useState)([]),[U,q]=(0,a.useState)(!0),[V,B]=(0,a.useState)(null),[T,z]=(0,a.useState)(""),[H,I]=(0,a.useState)([]),[Z,G]=(0,a.useState)(""),[W,X]=(0,a.useState)([]),[O,D]=(0,a.useState)(""),[J,K]=(0,a.useState)([]),Q=(0,i.mN)({resolver:(0,l.u)(R),defaultValues:{name:"",slug:t,game_slug:"",status:"unknown",pricing_options:[],functions_aim_title:"Aimbot Функции",functions_aim_description:"",functions_esp_title:"ESP/Wallhack Функции",functions_esp_description:"",functions_misc_title:"Прочие Функции (Misc)",functions_misc_description:"",mode:null}}),{fields:ee,append:es,remove:et,replace:er}=(0,i.jz)({control:Q.control,name:"pricing_options"});(0,a.useCallback)(async()=>{q(!0);try{let e=await fetch("/api/categories");if(!e.ok)throw Error("Failed to fetch categories");let s=await e.json();E(s)}catch(s){console.error("Error fetching categories:",s),e({title:"Ошибка",description:"Не удалось загрузить категории.",variant:"destructive"})}finally{q(!1)}},[e]),(0,a.useCallback)(async t=>{$(!0);try{let e=await fetch(`/api/products/${t}`);if(!e.ok){let s=await e.json().catch(()=>({message:"Failed to fetch product"}));throw Error(s.message||"Failed to fetch product")}let s=await e.json();B(s);let r=e=>Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e):"string"==typeof e?e.split(",").map(e=>e.trim()).filter(e=>e):[];I(r(s.functions_aim)),X(r(s.functions_wallhack)),K(r(s.functions_misc)),Q.reset({name:s.name,slug:s.slug,game_slug:s.game_slug,status:s.status,status_text:s.status_text||"",price_text:s.price_text||"",short_description:s.short_description||"",long_description:s.long_description||"",image_url:s.image_url||"",data_ai_hint:s.data_ai_hint||"",mode:s.mode||null,gallery_image_urls:Array.isArray(s.gallery_image_urls)?s.gallery_image_urls.join(","):s.gallery_image_urls||"",functions_aim_title:s.functions_aim_title||"Aimbot Функции",functions_aim:Array.isArray(s.functions_aim)?s.functions_aim.join(","):s.functions_aim||"",functions_aim_description:s.functions_aim_description||"",functions_esp_title:s.functions_esp_title||"ESP/Wallhack Функции",functions_wallhack:Array.isArray(s.functions_wallhack)?s.functions_wallhack.join(","):s.functions_wallhack||"",functions_esp_description:s.functions_esp_description||"",functions_misc_title:s.functions_misc_title||"Прочие Функции (Misc)",functions_misc:Array.isArray(s.functions_misc)?s.functions_misc.join(","):s.functions_misc||"",functions_misc_description:s.functions_misc_description||"",system_os:s.system_os||"",system_build:s.system_build||"",system_gpu:s.system_gpu||"",system_cpu:s.system_cpu||"",pricing_options:s.pricing_options?.map(e=>({...e,payment_link:e.payment_link||"",mode_label:e.mode_label||""}))||[]}),s.pricing_options&&er(s.pricing_options.map(e=>({...e,payment_link:e.payment_link||"",mode_label:e.mode_label||""})))}catch(t){console.error("Error fetching product data:",t),e({title:"Ошибка",description:`Не удалось загрузить данные товара: ${t.message}`,variant:"destructive"}),s.push("/admin/products")}finally{$(!1)}},[e,Q,s,er]);let ea=e=>{"aim"===e&&T.trim()?(H.includes(T.trim())||I(e=>[...e,T.trim()]),z("")):"wh"===e&&Z.trim()?(W.includes(Z.trim())||X(e=>[...e,Z.trim()]),G("")):"misc"===e&&O.trim()&&(J.includes(O.trim())||K(e=>[...e,O.trim()]),D(""))},ei=(e,s)=>{"aim"===e&&I(e=>e.filter((e,t)=>t!==s)),"wh"===e&&X(e=>e.filter((e,t)=>t!==s)),"misc"===e&&K(e=>e.filter((e,t)=>t!==s))},el=(e,s,t,a,i,l)=>(0,r.jsxs)("div",{className:"space-y-3 p-4 border border-border/30 rounded-md bg-card/50 shadow-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:i,className:"text-foreground font-semibold",children:"Заголовок секции"}),(0,r.jsx)(d.p,{id:i,...Q.register(i),placeholder:"functions_aim_title"===i?"Aimbot Функции":"functions_esp_title"===i?"ESP/Wallhack Функции":"Прочие Функции (Misc)",className:"mt-1 h-9",disabled:n})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:l,className:"text-foreground",children:"Описание секции"}),(0,r.jsx)(m.T,{id:l,...Q.register(l),placeholder:"Краткое описание этой группы функций...",className:"mt-1 min-h-[60px]",disabled:n})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c.Label,{className:"text-xs text-muted-foreground",children:"Добавить функцию"}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(d.p,{value:s,onChange:e=>t(e.target.value),placeholder:"Новая функция",className:"flex-grow h-9",disabled:n,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),ea(a))}}),(0,r.jsx)(o.$,{type:"button",variant:"outline",size:"sm",onClick:()=>ea(a),disabled:n||!s.trim(),className:"h-9 border-primary text-primary hover:bg-primary/10",children:"Добавить"})]})]}),e.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mt-2 p-2 border border-input rounded-md min-h-[40px] bg-background",children:e.map((e,s)=>(0,r.jsxs)(P.E,{variant:"outline",className:"text-sm py-1 px-2 flex items-center border-primary/50 text-foreground",children:[e,(0,r.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",className:"ml-1.5 h-4 w-4 p-0 text-muted-foreground hover:text-destructive",onClick:()=>ei(a,s),disabled:n,children:(0,r.jsx)(g.A,{className:"h-3 w-3"})})]},`${a}-${s}-${e}`))})]}),en=async r=>{if(!V||!t)return;C(!0);let a={...r,mode:r.mode===F?null:r.mode,functions_aim:H.join(","),functions_wallhack:W.join(","),functions_misc:J.join(","),gallery_image_urls:r.gallery_image_urls?r.gallery_image_urls.split(",").map(e=>e.trim()).filter(e=>e):[],pricing_options:r.pricing_options?.map(e=>({...e,payment_link:e.payment_link||null,mode_label:e.mode_label||null}))};try{let i=await fetch(`/api/admin/products/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),l=await i.json();if(!i.ok)throw Error(l.message||"Не удалось обновить товар.");e({title:"Товар обновлен",description:`Товар "${r.name}" был успешно обновлен.`}),s.push("/admin/products")}catch(s){e({title:"Ошибка",description:s.message||"Произошла ошибка при обновлении товара.",variant:"destructive"})}finally{C(!1)}};return Y||U?(0,r.jsxs)("div",{className:"flex items-center justify-center h-full",children:[(0,r.jsx)(f.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,r.jsx)("p",{className:"ml-3 text-muted-foreground",children:"Загрузка данных товара..."})]}):V?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-primary flex items-center",children:[(0,r.jsx)(_.A,{className:"mr-2 h-6 w-6"}),"Редактировать товар: ",Q.getValues("name")]}),(0,r.jsxs)(o.$,{onClick:()=>s.push("/admin/products"),variant:"outline",className:"border-primary text-primary hover:bg-primary/10",children:[(0,r.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"К списку товаров"]})]}),(0,r.jsx)(p.Zp,{className:"shadow-lg",children:(0,r.jsx)(p.Wu,{className:"pt-6",children:(0,r.jsxs)("form",{onSubmit:Q.handleSubmit(en),children:[(0,r.jsxs)(L.tU,{defaultValue:"general",className:"w-full",children:[(0,r.jsxs)(L.j7,{className:"grid w-full grid-cols-2 md:grid-cols-3 lg:grid-cols-6 mb-6",children:[(0,r.jsxs)(L.Xi,{value:"general",children:[(0,r.jsx)(b.A,{className:"mr-1.5 h-4 w-4"}),"Общие"]}),(0,r.jsxs)(L.Xi,{value:"gallery",children:[(0,r.jsx)(y.A,{className:"mr-1.5 h-4 w-4"}),"Галерея"]}),(0,r.jsxs)(L.Xi,{value:"description",children:[(0,r.jsx)(v.A,{className:"mr-1.5 h-4 w-4"}),"Описание"]}),(0,r.jsxs)(L.Xi,{value:"features",children:[(0,r.jsx)(N.A,{className:"mr-1.5 h-4 w-4"}),"Функции"]}),(0,r.jsxs)(L.Xi,{value:"os",children:[(0,r.jsx)(w.A,{className:"mr-1.5 h-4 w-4"}),"ОС"]}),(0,r.jsxs)(L.Xi,{value:"pricing",children:[(0,r.jsx)(k.A,{className:"mr-1.5 h-4 w-4"}),"Стоимость"]})]}),(0,r.jsxs)(L.av,{value:"general",className:"space-y-4",children:[(0,r.jsx)(p.aR,{className:"px-0 py-2",children:(0,r.jsxs)(p.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,r.jsx)(b.A,{className:"mr-2 h-5 w-5 text-primary"})," Основная информация"]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-name",className:"text-foreground",children:"Название товара"}),(0,r.jsx)(d.p,{id:"edit-name",...Q.register("name"),placeholder:"UnitHack для Warface",className:"mt-1",disabled:n}),Q.formState.errors.name&&(0,r.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-slug",className:"text-foreground",children:"Slug (URL)"}),(0,r.jsx)(d.p,{id:"edit-slug",...Q.register("slug"),placeholder:"unithack-warface",className:"mt-1",disabled:n}),Q.formState.errors.slug&&(0,r.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.slug.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-game_slug",className:"text-foreground",children:"Категория (Игра)"}),(0,r.jsx)(i.xI,{control:Q.control,name:"game_slug",render:({field:e})=>(0,r.jsxs)(u.l6,{onValueChange:e.onChange,value:e.value||"",disabled:n||U,children:[(0,r.jsx)(u.bq,{className:"w-full mt-1",children:(0,r.jsx)(u.yv,{placeholder:U?"Загрузка категорий...":"Выберите игру"})}),(0,r.jsx)(u.gC,{children:M.map(e=>(0,r.jsx)(u.eb,{value:e.slug,children:e.name},e.id))})]})}),Q.formState.errors.game_slug&&(0,r.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.game_slug.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-status",className:"text-foreground",children:"Статус"}),(0,r.jsx)(i.xI,{control:Q.control,name:"status",render:({field:e})=>(0,r.jsxs)(u.l6,{onValueChange:e.onChange,value:e.value,disabled:n,children:[(0,r.jsx)(u.bq,{className:"w-full mt-1",children:(0,r.jsx)(u.yv,{placeholder:"Выберите статус"})}),(0,r.jsxs)(u.gC,{children:[(0,r.jsx)(u.eb,{value:"safe",children:"Безопасен (safe)"}),(0,r.jsx)(u.eb,{value:"updating",children:"Обновляется (updating)"}),(0,r.jsx)(u.eb,{value:"risky",children:"Рискованно (risky)"}),(0,r.jsx)(u.eb,{value:"unknown",children:"Неизвестно (unknown)"})]})]})}),Q.formState.errors.status&&(0,r.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.status.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-status_text",className:"text-foreground",children:"Текст статуса (опционально)"}),(0,r.jsx)(d.p,{id:"edit-status_text",...Q.register("status_text"),placeholder:"Например, Безопасен с 01.01.2024",className:"mt-1",disabled:n})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-price_text",className:"text-foreground",children:'Текст цены (напр. "от 100₽")'}),(0,r.jsx)(d.p,{id:"edit-price_text",...Q.register("price_text"),placeholder:"от 150₽",className:"mt-1",disabled:n}),Q.formState.errors.price_text&&(0,r.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.price_text.message})]})]}),(0,r.jsxs)(L.av,{value:"gallery",className:"space-y-4",children:[(0,r.jsx)(p.aR,{className:"px-0 py-2",children:(0,r.jsxs)(p.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,r.jsx)(y.A,{className:"mr-2 h-5 w-5 text-primary"})," Медиафайлы"]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-image_url",className:"text-foreground",children:"URL основного изображения"}),(0,r.jsx)(d.p,{id:"edit-image_url",...Q.register("image_url"),placeholder:"https://example.com/image.jpg",className:"mt-1",disabled:n}),Q.formState.errors.image_url&&(0,r.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.image_url.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-data_ai_hint",className:"text-foreground",children:"Подсказка для AI (для фото)"}),(0,r.jsx)(d.p,{id:"edit-data_ai_hint",...Q.register("data_ai_hint"),placeholder:"warface cheat icon",className:"mt-1",disabled:n})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-gallery_image_urls",className:"text-foreground",children:"URL изображений галереи (через запятую)"}),(0,r.jsx)(m.T,{id:"edit-gallery_image_urls",...Q.register("gallery_image_urls"),placeholder:"url1.jpg,url2.png,url3.webp",className:"mt-1 min-h-[60px]",disabled:n})]})]}),(0,r.jsxs)(L.av,{value:"description",className:"space-y-4",children:[(0,r.jsxs)(p.aR,{className:"px-0 py-2",children:[(0,r.jsxs)(p.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,r.jsx)(v.A,{className:"mr-2 h-5 w-5 text-primary"})," Описание"]}),(0,r.jsx)(p.BT,{className:"text-muted-foreground",children:"Эти поля являются общими для товара. PVE/PVP специфичные детали можно указать в описании ниже или создать отдельные товары."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-short_description",className:"text-foreground",children:"Краткое описание"}),(0,r.jsx)(m.T,{id:"edit-short_description",...Q.register("short_description"),placeholder:"Краткое описание товара...",className:"mt-1 min-h-[60px]",disabled:n}),Q.formState.errors.short_description&&(0,r.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.short_description.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-long_description",className:"text-foreground",children:"Полное описание (Поддержка HTML)"}),(0,r.jsx)(m.T,{id:"edit-long_description",...Q.register("long_description"),placeholder:"Детальное описание товара, его особенности и преимущества...",className:"mt-1 min-h-[120px]",disabled:n})]})]}),(0,r.jsxs)(L.av,{value:"features",className:"space-y-6",children:[(0,r.jsxs)(p.aR,{className:"px-0 py-2",children:[(0,r.jsxs)(p.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,r.jsx)(N.A,{className:"mr-2 h-5 w-5 text-primary"})," Функционал (Общий)"]}),(0,r.jsx)(p.BT,{className:"text-muted-foreground",children:"Укажите общие функции товара."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-mode",className:"text-foreground",children:"Основной режим товара (для фильтрации)"}),(0,r.jsx)(i.xI,{control:Q.control,name:"mode",render:({field:e})=>(0,r.jsxs)(u.l6,{onValueChange:s=>e.onChange(s===F?null:s),value:e.value||F,disabled:n,children:[(0,r.jsx)(u.bq,{className:"w-full mt-1",children:(0,r.jsx)(u.yv,{placeholder:"Выберите режим"})}),(0,r.jsxs)(u.gC,{children:[(0,r.jsx)(u.eb,{value:F,children:"Не указан"}),(0,r.jsx)(u.eb,{value:"PVE",children:"PVE"}),(0,r.jsx)(u.eb,{value:"PVP",children:"PVP"}),(0,r.jsx)(u.eb,{value:"BOTH",children:"BOTH (Оба)"})]})]})}),Q.formState.errors.mode&&(0,r.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.formState.errors.mode.message})]}),el(H,T,z,"aim","functions_aim_title","functions_aim_description"),el(W,Z,G,"wh","functions_esp_title","functions_esp_description"),el(J,O,D,"misc","functions_misc_title","functions_misc_description")]}),(0,r.jsxs)(L.av,{value:"os",className:"space-y-4",children:[(0,r.jsx)(p.aR,{className:"px-0 py-2",children:(0,r.jsxs)(p.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,r.jsx)(w.A,{className:"mr-2 h-5 w-5 text-primary"})," Системные требования"]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-system_os",className:"text-foreground",children:"ОС"}),(0,r.jsx)(d.p,{id:"edit-system_os",...Q.register("system_os"),placeholder:"Windows 10/11",className:"mt-1",disabled:n})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-system_build",className:"text-foreground",children:"Сборка Windows"}),(0,r.jsx)(d.p,{id:"edit-system_build",...Q.register("system_build"),placeholder:"2004 - 22H2",className:"mt-1",disabled:n})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-system_gpu",className:"text-foreground",children:"Видеокарта"}),(0,r.jsx)(d.p,{id:"edit-system_gpu",...Q.register("system_gpu"),placeholder:"Nvidia / AMD",className:"mt-1",disabled:n})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:"edit-system_cpu",className:"text-foreground",children:"Процессор"}),(0,r.jsx)(d.p,{id:"edit-system_cpu",...Q.register("system_cpu"),placeholder:"Intel / AMD",className:"mt-1",disabled:n})]})]})]}),(0,r.jsxs)(L.av,{value:"pricing",className:"space-y-4",children:[(0,r.jsx)(p.aR,{className:"px-0 py-2",children:(0,r.jsxs)(p.ZB,{className:"text-xl text-foreground flex items-center",children:[(0,r.jsx)(k.A,{className:"mr-2 h-5 w-5 text-primary"})," Варианты цен"]})}),ee.map((e,s)=>(0,r.jsxs)("div",{className:"space-y-3 p-4 border border-border/30 rounded-md bg-muted/20 shadow-sm",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:`pricing_options.${s}.duration_days`,className:"text-xs text-muted-foreground",children:"Длительность (дни)"}),(0,r.jsx)(d.p,{type:"number",...Q.register(`pricing_options.${s}.duration_days`),className:"mt-1 h-9",disabled:n}),Q.formState.errors.pricing_options?.[s]?.duration_days&&(0,r.jsx)("p",{className:"text-xs text-destructive mt-1",children:Q.formState.errors.pricing_options?.[s]?.duration_days?.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:`pricing_options.${s}.mode_label`,className:"text-xs text-muted-foreground",children:"Название режима (опционально)"}),(0,r.jsx)(d.p,{...Q.register(`pricing_options.${s}.mode_label`),placeholder:"PVP / BattleRoyale",className:"mt-1 h-9",disabled:n}),Q.formState.errors.pricing_options?.[s]?.mode_label&&(0,r.jsx)("p",{className:"text-xs text-destructive mt-1",children:Q.formState.errors.pricing_options?.[s]?.mode_label?.message})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:`pricing_options.${s}.price_gh`,className:"text-xs text-muted-foreground",children:"Цена (GH)"}),(0,r.jsx)(d.p,{type:"number",step:"0.01",...Q.register(`pricing_options.${s}.price_gh`),className:"mt-1 h-9",disabled:n}),Q.formState.errors.pricing_options?.[s]?.price_gh&&(0,r.jsx)("p",{className:"text-xs text-destructive mt-1",children:Q.formState.errors.pricing_options?.[s]?.price_gh?.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:`pricing_options.${s}.price_rub`,className:"text-xs text-muted-foreground",children:"Цена (RUB)"}),(0,r.jsx)(d.p,{type:"number",step:"0.01",...Q.register(`pricing_options.${s}.price_rub`),className:"mt-1 h-9",disabled:n}),Q.formState.errors.pricing_options?.[s]?.price_rub&&(0,r.jsx)("p",{className:"text-xs text-destructive mt-1",children:Q.formState.errors.pricing_options?.[s]?.price_rub?.message})]}),(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>et(s),className:"text-destructive hover:bg-destructive/10 h-9 w-9",disabled:n||ee.length<=1,children:(0,r.jsx)(A.A,{className:"h-4 w-4"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{htmlFor:`pricing_options.${s}.payment_link`,className:"text-xs text-muted-foreground",children:"Ссылка на оплату (для RUB)"}),(0,r.jsx)(d.p,{type:"url",...Q.register(`pricing_options.${s}.payment_link`),placeholder:"https://yoomoney.ru/...",className:"mt-1 h-9",disabled:n}),Q.formState.errors.pricing_options?.[s]?.payment_link&&(0,r.jsx)("p",{className:"text-xs text-destructive mt-1",children:Q.formState.errors.pricing_options?.[s]?.payment_link?.message})]})]},e.id||`new-${s}`)),(0,r.jsxs)(o.$,{type:"button",variant:"outline",size:"sm",onClick:()=>es({duration_days:1,price_rub:0,price_gh:0,payment_link:"",mode_label:""}),disabled:n,className:"border-primary text-primary hover:bg-primary/10",children:[(0,r.jsx)(S.A,{className:"mr-2 h-4 w-4"})," Добавить вариант цены"]})]})]}),(0,r.jsx)("div",{className:"flex justify-end pt-8",children:(0,r.jsxs)(o.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",disabled:n||U||Y,children:[n?(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,n?"Сохранение...":"Сохранить изменения"]})})]})})})]}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("p",{className:"text-destructive",children:"Не удалось загрузить товар для редактирования."})})}},56737:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]])},57207:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71429:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=t(65239),a=t(48088),i=t(88170),l=t.n(i),n=t(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let d={children:["",{children:["admin",{children:["products",{children:["[slug]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17666)),"/var/www/html/src/app/admin/products/[slug]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,99111)),"/var/www/html/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/var/www/html/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/var/www/html/src/app/admin/products/[slug]/edit/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/products/[slug]/edit/page",pathname:"/admin/products/[slug]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},73595:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},79551:e=>{"use strict";e.exports=require("url")},85763:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>n});var r=t(60687),a=t(43210),i=t(41360),l=t(4780);let n=i.bL,o=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.B8,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));o.displayName=i.B8.displayName;let d=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.l9,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=i.l9.displayName;let c=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.UC,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));c.displayName=i.UC.displayName},90834:(e,s,t)=>{Promise.resolve().then(t.bind(t,43152))}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4447,6724,377,1658,8123,8030,4670,2340,4519,5524],()=>t(71429));module.exports=r})();