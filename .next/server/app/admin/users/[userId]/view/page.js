(()=>{var e={};e.id=1840,e.ids=[1840,5524],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6211:(e,r,s)=>{"use strict";s.d(r,{A0:()=>l,BF:()=>d,Hj:()=>c,XI:()=>i,nA:()=>m,nd:()=>o});var t=s(60687),a=s(43210),n=s(4780);let i=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",e),...r})}));i.displayName="Table";let l=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",e),...r}));l.displayName="TableHeader";let d=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...r}));d.displayName="TableBody",a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let c=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...r}));c.displayName="TableRow";let o=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));o.displayName="TableHead";let m=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));m.displayName="TableCell",a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption"},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14764:(e,r,s)=>{Promise.resolve().then(s.bind(s,59356))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27916:(e,r,s)=>{Promise.resolve().then(s.bind(s,85662))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29373:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c});var t=s(65239),a=s(48088),n=s(88170),i=s.n(n),l=s(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(r,d);let c={children:["",{children:["admin",{children:["users",{children:["[userId]",{children:["view",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,85662)),"/var/www/html/src/app/admin/users/[userId]/view/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,99111)),"/var/www/html/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/var/www/html/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["/var/www/html/src/app/admin/users/[userId]/view/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/users/[userId]/view/page",pathname:"/admin/users/[userId]/view",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},29935:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>D});var t=s(60687),a=s(43210),n=s(85814),i=s.n(n),l=s(16189),d=s(59059),c=s(48206),o=s(24790),m=s(90746),x=s(88853),u=s(35995),h=s(18329),p=s(19379),f=s(36558),j=s(27629),g=s(76976),N=s(58369),y=s(90594),v=s(74158),b=s(4780),w=s(29523),_=s(42692),A=s(96834);let R=[{href:"/admin",label:"Дашборд",icon:d.A,baseRoute:"/admin"},{href:"/admin/users",label:"Пользователи",icon:c.A,baseRoute:"/admin/users"},{href:"/admin/products",label:"Товары",icon:o.A,baseRoute:"/admin/products"},{href:"/admin/categories",label:"Категории",icon:m.A,baseRoute:"/admin/categories"},{href:"/admin/cases",label:"Кейсы",icon:x.A,baseRoute:"/admin/cases"},{href:"/admin/promocodes",label:"Промокоды",icon:u.A,baseRoute:"/admin/promocodes"},{href:"/admin/reviews",label:"Отзывы",icon:h.A,baseRoute:"/admin/reviews",dataTestId:"admin-reviews-link"},{href:"/admin/orders",label:"Заказы",icon:p.A,baseRoute:"/admin/orders"},{href:"/admin/accounting",label:"Бухгалтерия",icon:f.A,baseRoute:"/admin/accounting"},{href:"/statuses",label:"Статус Читов",icon:j.A,baseRoute:"/statuses"},{href:"/admin/tickets",label:"Тикеты",icon:g.A,baseRoute:"/admin/tickets"}],k={href:"/admin/site-settings",label:"Настройки Сайта",icon:N.A,baseRoute:"/admin/site-settings"},I={href:"/admin/test-payments",label:"Тестовые Платежи",icon:y.A,baseRoute:"/admin/test-payments"};function C(){let e=(0,l.usePathname)(),[r,s]=(0,a.useState)(!1),[n,d]=(0,a.useState)(!0),[c,o]=(0,a.useState)(0);(0,a.useCallback)(async()=>{try{let e=await fetch("/api/admin/reviews/pending-count");if(e.ok){let r=await e.json();o(r.count)}else console.warn("Failed to fetch pending review count.")}catch(e){console.error("Error fetching pending review count:",e)}},[]);let m=(r,s)=>{let t=s||r;return"/admin"===t&&"/admin"===e||e.startsWith(t)&&(e===t||"/"===e.charAt(t.length))},x=[...R];return!n&&r&&x.push(I),x.push(k),(0,t.jsxs)("aside",{className:"w-64 bg-card text-card-foreground border-r border-border flex-shrink-0 hidden md:flex flex-col",children:[(0,t.jsx)("div",{className:"p-4 border-b border-border",children:(0,t.jsx)(i(),{href:"/admin",className:"flex items-center gap-2",children:(0,t.jsx)("span",{className:"text-xl font-semibold text-primary",children:"Admin Panel"})})}),(0,t.jsx)(_.F,{className:"flex-1",children:(0,t.jsx)("nav",{className:"px-2 py-4 space-y-1",children:x.map(e=>{let r=m(e.href,e.baseRoute),s="admin-reviews-link"===e.dataTestId;return(0,t.jsx)(w.$,{asChild:!0,variant:r?"secondary":"ghost",className:(0,b.cn)("w-full justify-start relative",r?"text-primary bg-primary/10":"text-foreground/70 hover:text-primary hover:bg-primary/5"),children:(0,t.jsxs)(i(),{href:e.href,className:"flex items-center w-full",children:[(0,t.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),(0,t.jsx)("span",{className:"flex-grow",children:e.label}),s&&c>0&&(0,t.jsx)(A.E,{variant:"destructive",className:"ml-auto h-5 px-1.5 text-xs rounded-full",children:c}),r&&!s&&(0,t.jsx)(v.A,{className:"ml-auto h-4 w-4"}),r&&s&&0===c&&(0,t.jsx)(v.A,{className:"ml-auto h-4 w-4"})]})},e.href)})})}),(0,t.jsx)("div",{className:"p-4 border-t border-border mt-auto"})]})}var P=s(55506),S=s(60368),H=s(10453),M=s(29848),B=s(44802),F=s(63213);function Z({theme:e,toggleTheme:r}){let{currentUser:s}=(0,F.A)(),a=(0,l.useRouter)();return(0,t.jsxs)("header",{className:"h-16 bg-card text-card-foreground border-b border-border flex items-center justify-between px-6 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>a.push("/account"),className:"text-primary hover:text-primary/80 hover:bg-primary/10 border-primary",children:[(0,t.jsx)(P.A,{className:"mr-2 h-4 w-4"}),"Назад в ЛК"]}),(0,t.jsx)(w.$,{asChild:!0,variant:"outline",size:"sm",className:"text-primary hover:text-primary/80 hover:bg-primary/10 border-primary",children:(0,t.jsxs)(i(),{href:"/",children:[(0,t.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Перейти на сайт"]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(w.$,{variant:"ghost",size:"icon",onClick:r,className:"text-primary hover:text-primary/80 hover:bg-primary/10",children:["light"===e?(0,t.jsx)(H.A,{className:"h-5 w-5"}):(0,t.jsx)(M.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Toggle theme"})]}),s&&(0,t.jsx)(w.$,{asChild:!0,variant:"ghost",className:"text-primary hover:text-primary/80 hover:bg-primary/10",children:(0,t.jsxs)(i(),{href:"/account/settings",children:[(0,t.jsx)(B.A,{className:"mr-2 h-5 w-5"}),s.username]})})]})]})}var $=s(14947);function D({children:e}){let{currentUser:r,loading:s}=(0,F.A)();(0,l.useRouter)();let[n,i]=(0,a.useState)("dark");return s||!r||"admin"!==r.role?(0,t.jsx)("div",{className:"flex h-screen items-center justify-center bg-background text-foreground",children:(0,t.jsx)("p",{children:"Загрузка или проверка прав доступа..."})}):(0,t.jsxs)("div",{className:"flex h-screen bg-background text-foreground",children:[(0,t.jsx)(C,{}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,t.jsx)(Z,{theme:n,toggleTheme:()=>{i(e=>"light"===e?"dark":"light")}}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto p-6 md:p-8 bg-muted/30",children:e}),(0,t.jsx)($.l,{})]})]})}},31441:(e,r,s)=>{Promise.resolve().then(s.bind(s,29935))},33873:e=>{"use strict";e.exports=require("path")},42692:(e,r,s)=>{"use strict";s.d(r,{$:()=>d,F:()=>l});var t=s(60687),a=s(43210),n=s(68123),i=s(4780);let l=a.forwardRef(({className:e,children:r,...s},a)=>(0,t.jsxs)(n.bL,{ref:a,className:(0,i.cn)("relative overflow-hidden",e),...s,children:[(0,t.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(d,{}),(0,t.jsx)(n.OK,{})]}));l.displayName=n.bL.displayName;let d=a.forwardRef(({className:e,orientation:r="vertical",...s},a)=>(0,t.jsx)(n.VM,{ref:a,orientation:r,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:(0,t.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})}));d.displayName=n.VM.displayName},44493:(e,r,s)=>{"use strict";s.d(r,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>l,wL:()=>m});var t=s(60687),a=s(43210),n=s(4780);let i=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));i.displayName="Card";let l=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("h3",{ref:s,className:(0,n.cn)("text-xl font-normal uppercase tracking-wider leading-none",e),...r}));d.displayName="CardTitle";let c=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let o=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...r}));o.displayName="CardContent";let m=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r}));m.displayName="CardFooter"},44610:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(82614).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},52831:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(82614).A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},59356:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>w});var t=s(60687),a=s(43210),n=s(16189),i=s(63213),l=s(29867),d=s(44493),c=s(29523),o=s(11516),m=s(55817),x=s(44802),u=s(8872),h=s(52831),p=s(75511),f=s(94493),j=s(48206),g=s(36558),N=s(44610),y=s(85763),v=s(6211),b=s(4780);function w(){var e;let r=(0,n.useParams)(),s=(0,n.useRouter)(),{currentUser:w,loading:_}=(0,i.A)(),{toast:A}=(0,l.dj)();r.userId;let[R,k]=(0,a.useState)(null),[I,C]=(0,a.useState)(!0),[P,S]=(0,a.useState)([]),[H,M]=(0,a.useState)(!0),[B,F]=(0,a.useState)([]),[Z,$]=(0,a.useState)(!0),[D,T]=(0,a.useState)([]),[z,G]=(0,a.useState)(!0),[X,q]=(0,a.useState)([]),[L,E]=(0,a.useState)(!0),[W,U]=(0,a.useState)([]),[O,V]=(0,a.useState)(!0),[K,J]=(0,a.useState)(null),[Q,Y]=(0,a.useState)(!1),ee=e=>{switch(e){case"deposit":return"Пополнение";case"purchase_product":return"Покупка товара";case"open_case":return"Открытие кейса";case"sell_prize":return"Продажа приза";case"referral_bonus":return"Реферальный бонус";case"admin_adjustment":return"Коррекция (Админ)";default:return e}},er=e=>{switch(e){case"kept":return"Оставлен";case"sold":return"Продан";case"pending":return"Ожидает";default:return e}},es=e=>e?new Date(e).toLocaleString("ru-RU",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return _||I?(0,t.jsxs)("div",{className:"flex justify-center items-center h-full",children:[(0,t.jsx)(o.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,t.jsx)("p",{className:"ml-3 text-muted-foreground",children:"Загрузка данных пользователя..."})]}):R?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-primary tracking-tight",children:["Детали пользователя: ",R.username]}),(0,t.jsxs)(c.$,{onClick:()=>s.push("/admin/users"),variant:"outline",className:"border-primary text-primary hover:bg-primary/10",children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"К списку пользователей"]})]}),(0,t.jsxs)(d.Zp,{className:"shadow-lg",children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"text-xl text-primary flex items-center",children:[(0,t.jsx)(x.A,{className:"mr-2 h-6 w-6"}),"Основная информация"]})}),(0,t.jsxs)(d.Wu,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-muted-foreground",children:"ID Пользователя:"}),(0,t.jsx)("p",{className:"text-foreground",children:R.id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-muted-foreground",children:"Логин:"}),(0,t.jsx)("p",{className:"text-foreground",children:R.username})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-muted-foreground",children:"Email:"}),(0,t.jsx)("p",{className:"text-foreground",children:R.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-muted-foreground",children:"Роль:"}),(0,t.jsx)("p",{className:"text-foreground",children:(e=>{switch(e){case"admin":return"Администратор";case"booster":return"Бустер";case"client":return"Клиент";default:return e||"Неизвестно"}})(R.role)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-muted-foreground",children:"Баланс:"}),(0,t.jsxs)("p",{className:"text-foreground font-semibold",children:["number"!=typeof(e=R.balance)||null===e||isNaN(e)?"0.00":e.toFixed(2)," GH"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-muted-foreground",children:"Дата регистрации:"}),(0,t.jsx)("p",{className:"text-foreground",children:R.created_at?new Date(R.created_at).toLocaleString("ru-RU"):"N/A"})]}),R.referral_code&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-muted-foreground",children:"Реферальный код:"}),(0,t.jsx)("p",{className:"text-foreground font-mono bg-muted/50 px-2 py-1 rounded-sm inline-block",children:R.referral_code})]}),Q&&R.referred_by_user_id&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium text-muted-foreground",children:["Приглашен (ID: ",R.referred_by_user_id,"):"]}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:"Загрузка..."})]}),!Q&&K&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-muted-foreground",children:"Приглашен:"}),(0,t.jsxs)("p",{className:"text-foreground",children:[K.username," (ID: ",R.referred_by_user_id,")"]})]}),!Q&&!K&&R.referred_by_user_id&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium text-muted-foreground",children:["Приглашен (ID: ",R.referred_by_user_id,"):"]}),(0,t.jsx)("p",{className:"text-destructive text-xs",children:"Пригласитель не найден"})]}),R.telegram_id&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-muted-foreground",children:"Telegram ID:"}),(0,t.jsx)("p",{className:"text-foreground",children:R.telegram_id})]})]})]}),(0,t.jsxs)(y.tU,{defaultValue:"balance_transactions",className:"w-full",children:[(0,t.jsxs)(y.j7,{className:"grid w-full grid-cols-2 md:grid-cols-3 lg:grid-cols-5",children:[(0,t.jsxs)(y.Xi,{value:"balance_transactions",children:[(0,t.jsx)(u.A,{className:"mr-1.5 h-4 w-4"}),"Транзакции"]}),(0,t.jsxs)(y.Xi,{value:"purchase_history",children:[(0,t.jsx)(h.A,{className:"mr-1.5 h-4 w-4"}),"Покупки"]}),(0,t.jsxs)(y.Xi,{value:"case_history",children:[(0,t.jsx)(p.A,{className:"mr-1.5 h-4 w-4"}),"Кейсы"]}),(0,t.jsxs)(y.Xi,{value:"inventory",children:[(0,t.jsx)(f.A,{className:"mr-1.5 h-4 w-4"}),"Инвентарь"]}),(0,t.jsxs)(y.Xi,{value:"referrals",children:[(0,t.jsx)(j.A,{className:"mr-1.5 h-4 w-4"}),"Рефералы"]})]}),(0,t.jsx)(y.av,{value:"balance_transactions",children:(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"text-lg text-primary flex items-center",children:[(0,t.jsx)(g.A,{className:"mr-2 h-5 w-5"}),"История транзакций баланса"]})}),(0,t.jsx)(d.Wu,{children:H?(0,t.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,t.jsx)(o.A,{className:"h-6 w-6 animate-spin text-primary"}),(0,t.jsx)("p",{className:"ml-2 text-muted-foreground",children:"Загрузка транзакций..."})]}):P.length>0?(0,t.jsxs)(v.XI,{children:[(0,t.jsx)(v.A0,{children:(0,t.jsxs)(v.Hj,{children:[(0,t.jsx)(v.nd,{className:"text-primary",children:"ID"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Дата"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Тип"}),(0,t.jsx)(v.nd,{className:"text-right text-primary",children:"Сумма (GH)"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Описание"})]})}),(0,t.jsx)(v.BF,{children:P.map(e=>(0,t.jsxs)(v.Hj,{children:[(0,t.jsx)(v.nA,{className:"font-medium text-foreground/90",children:e.id}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs",children:es(e.created_at)}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs",children:ee(e.transaction_type)}),(0,t.jsxs)(v.nA,{className:(0,b.cn)("text-right font-medium text-xs",e.amount_gh>0?"text-green-500":"text-red-500"),children:[e.amount_gh>0?"+":"",e.amount_gh.toFixed(2)]}),(0,t.jsx)(v.nA,{className:"text-foreground/80 text-xs",children:e.description||"-"})]},e.id))})]}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"История транзакций баланса пуста."})})]})}),(0,t.jsx)(y.av,{value:"purchase_history",children:(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"text-lg text-primary flex items-center",children:[(0,t.jsx)(N.A,{className:"mr-2 h-5 w-5"}),"История покупок"]})}),(0,t.jsx)(d.Wu,{children:Z?(0,t.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,t.jsx)(o.A,{className:"h-6 w-6 animate-spin text-primary"}),(0,t.jsx)("p",{className:"ml-2 text-muted-foreground",children:"Загрузка..."})]}):B.length>0?(0,t.jsxs)(v.XI,{children:[(0,t.jsx)(v.A0,{children:(0,t.jsxs)(v.Hj,{children:[(0,t.jsx)(v.nd,{className:"text-primary",children:"ID"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Товар"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Дата"}),(0,t.jsx)(v.nd,{className:"text-right text-primary",children:"Сумма (GH)"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Статус"})]})}),(0,t.jsx)(v.BF,{children:B.map(e=>(0,t.jsxs)(v.Hj,{children:[(0,t.jsx)(v.nA,{className:"font-medium text-foreground/90",children:e.id}),(0,t.jsxs)(v.nA,{className:"text-foreground/90 text-xs",children:[e.product_name||`Продукт ID: ${e.product_id}`,e.product_pricing_option_duration_days&&` (${e.product_pricing_option_duration_days} дн.)`]}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs",children:es(e.purchase_date)}),(0,t.jsxs)(v.nA,{className:"text-right text-red-500 font-medium text-xs",children:["-",e.amount_paid_gh.toFixed(2)]}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs capitalize",children:"completed"===e.status?"Завершено":e.status})]},e.id))})]}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"История покупок пуста."})})]})}),(0,t.jsx)(y.av,{value:"case_history",children:(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"text-lg text-primary flex items-center",children:[(0,t.jsx)(p.A,{className:"mr-2 h-5 w-5"}),"История открытия кейсов"]})}),(0,t.jsx)(d.Wu,{children:z?(0,t.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,t.jsx)(o.A,{className:"h-6 w-6 animate-spin text-primary"}),(0,t.jsx)("p",{className:"ml-2 text-muted-foreground",children:"Загрузка..."})]}):D.length>0?(0,t.jsxs)(v.XI,{children:[(0,t.jsx)(v.A0,{children:(0,t.jsxs)(v.Hj,{children:[(0,t.jsx)(v.nd,{className:"text-primary",children:"ID Открытия"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Кейс"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Приз"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Дата"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Действие"}),(0,t.jsx)(v.nd,{className:"text-right text-primary",children:"Продано за (GH)"})]})}),(0,t.jsx)(v.BF,{children:D.map(e=>(0,t.jsxs)(v.Hj,{children:[(0,t.jsx)(v.nA,{className:"font-medium text-foreground/90",children:e.id}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs",children:e.case_name||`Кейс ID: ${e.case_id}`}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs",children:e.prize_name||`Приз ID: ${e.won_prize_id}`}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs",children:es(e.opened_at)}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs",children:er(e.action_taken)}),(0,t.jsx)(v.nA,{className:"text-right text-xs text-primary",children:"sold"===e.action_taken&&e.sold_value_gh?`${e.sold_value_gh.toFixed(2)}`:"-"})]},e.id))})]}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"История открытия кейсов пуста."})})]})}),(0,t.jsx)(y.av,{value:"inventory",children:(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"text-lg text-primary flex items-center",children:[(0,t.jsx)(f.A,{className:"mr-2 h-5 w-5"}),"Инвентарь призов"]})}),(0,t.jsx)(d.Wu,{children:L?(0,t.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,t.jsx)(o.A,{className:"h-6 w-6 animate-spin text-primary"}),(0,t.jsx)("p",{className:"ml-2 text-muted-foreground",children:"Загрузка..."})]}):X.length>0?(0,t.jsxs)(v.XI,{children:[(0,t.jsx)(v.A0,{children:(0,t.jsxs)(v.Hj,{children:[(0,t.jsx)(v.nd,{className:"text-primary",children:"ID"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Название"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Получен"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Истекает"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Код"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Статус"})]})}),(0,t.jsx)(v.BF,{children:X.map(e=>(0,t.jsxs)(v.Hj,{children:[(0,t.jsx)(v.nA,{className:"font-medium text-foreground/90",children:e.id}),(0,t.jsxs)(v.nA,{className:"text-foreground/90 text-xs",children:[e.product_name,e.duration_days?` (${e.duration_days} дн.)`:""]}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs",children:es(e.acquired_at)}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs",children:e.expires_at?es(e.expires_at):"Бессрочно"}),(0,t.jsx)(v.nA,{className:"text-foreground/90 font-mono text-xs",children:e.activation_code||"-"}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs",children:e.is_used?"Использован":"Активен"})]},e.id))})]}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"Инвентарь пуст."})})]})}),(0,t.jsx)(y.av,{value:"referrals",children:(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"text-lg text-primary flex items-center",children:[(0,t.jsx)(j.A,{className:"mr-2 h-5 w-5"}),"Приглашенные пользователи"]})}),(0,t.jsx)(d.Wu,{children:O?(0,t.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,t.jsx)(o.A,{className:"h-6 w-6 animate-spin text-primary"}),(0,t.jsx)("p",{className:"ml-2 text-muted-foreground",children:"Загрузка..."})]}):W.length>0?(0,t.jsxs)(v.XI,{children:[(0,t.jsx)(v.A0,{children:(0,t.jsxs)(v.Hj,{children:[(0,t.jsx)(v.nd,{className:"text-primary",children:"ID"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Логин"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Дата регистрации"}),(0,t.jsx)(v.nd,{className:"text-primary",children:"Статус"}),(0,t.jsx)(v.nd,{className:"text-right text-primary",children:"Бонус (GH)"})]})}),(0,t.jsx)(v.BF,{children:W.map(e=>(0,t.jsxs)(v.Hj,{children:[(0,t.jsx)(v.nA,{className:"font-medium text-foreground/90",children:e.referred_user_id}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs",children:e.referred_username||"N/A"}),(0,t.jsx)(v.nA,{className:"text-foreground/90 text-xs",children:es(e.created_at)}),(0,t.jsx)(v.nA,{className:(0,b.cn)("text-xs","completed"===e.status?"text-primary":"text-muted-foreground"),children:"completed"===e.status?"Завершен":"pending_purchase"===e.status?"Ожидает покупки":"Истек"}),(0,t.jsx)(v.nA,{className:"text-right text-xs text-primary",children:e.reward_amount_gh?`+${e.reward_amount_gh.toFixed(2)}`:"-"})]},e.id))})]}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"Этот пользователь никого не пригласил."})})]})})]})]}):(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-lg text-destructive",children:"Пользователь не найден."}),(0,t.jsxs)(c.$,{onClick:()=>s.back(),variant:"outline",className:"mt-4 border-primary text-primary hover:bg-primary/10",children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Назад к списку"]})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66289:(e,r,s)=>{Promise.resolve().then(s.bind(s,99111))},70440:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});var t=s(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},74722:(e,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var s in r)Object.defineProperty(e,s,{enumerable:!0,get:r[s]})}(r,{normalizeAppPath:function(){return n},normalizeRscURL:function(){return i}});let t=s(85531),a=s(35499);function n(e){return(0,t.ensureLeadingSlash)(e.split("/").reduce((e,r,s,t)=>!r||(0,a.isGroupSegment)(r)||"@"===r[0]||("page"===r||"route"===r)&&s===t.length-1?e:e+"/"+r,""))}function i(e){return e.replace(/\.rsc($|\?)/,"$1")}},75511:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(82614).A)("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},79551:e=>{"use strict";e.exports=require("url")},85531:(e,r)=>{"use strict";function s(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ensureLeadingSlash",{enumerable:!0,get:function(){return s}})},85662:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/var/www/html/src/app/admin/users/[userId]/view/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/var/www/html/src/app/admin/users/[userId]/view/page.tsx","default")},85763:(e,r,s)=>{"use strict";s.d(r,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>l});var t=s(60687),a=s(43210),n=s(41360),i=s(4780);let l=n.bL,d=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)(n.B8,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...r}));d.displayName=n.B8.displayName;let c=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)(n.l9,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...r}));c.displayName=n.l9.displayName;let o=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)(n.UC,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r}));o.displayName=n.UC.displayName},94493:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(82614).A)("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]])},96834:(e,r,s)=>{"use strict";s.d(r,{E:()=>l});var t=s(60687);s(43210);var a=s(24224),n=s(4780);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:r,...s}){return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:r}),e),...s})}},99111:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/var/www/html/src/app/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/var/www/html/src/app/admin/layout.tsx","default")}};var r=require("../../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[4447,6724,377,1658,8123,2340,4519],()=>s(29373));module.exports=t})();