(()=>{var e={};e.id=5743,e.ids=[5743],e.modules={2601:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/var/www/html/src/app/admin/site-settings/payment/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/var/www/html/src/app/admin/site-settings/payment/page.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18853:(e,t,r)=>{"use strict";r.d(t,{X:()=>o});var s=r(43210),n=r(66156);function o(e){let[t,r]=s.useState(void 0);return(0,n.N)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,n;if(!Array.isArray(t)||!t.length)return;let o=t[0];if("borderBoxSize"in o){let e=o.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,n=t.blockSize}else s=e.offsetWidth,n=e.offsetHeight;r({width:s,height:n})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20579:(e,t,r)=>{Promise.resolve().then(r.bind(r,94990))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33583:(e,t,r)=>{Promise.resolve().then(r.bind(r,59007))},33873:e=>{"use strict";e.exports=require("path")},35950:(e,t,r)=>{"use strict";r.d(t,{Separator:()=>i});var s=r(60687),n=r(43210),o=r(62369),a=r(4780);let i=n.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},i)=>(0,s.jsx)(o.b,{ref:i,decorative:r,orientation:t,className:(0,a.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...n}));i.displayName=o.b.displayName},41360:(e,t,r)=>{"use strict";r.d(t,{UC:()=>W,B8:()=>V,bL:()=>H,l9:()=>$});var s=r(43210),n=r(70569),o=r(11273),a=r(9510),i=r(98599),l=r(96963),d=r(14163),c=r(13495),m=r(65551),u=r(43),f=r(60687),p="rovingFocusGroup.onEntryFocus",y={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[x,g,b]=(0,a.N)(h),[v,_]=(0,o.A)(h,[b]),[w,j]=v(h),N=s.forwardRef((e,t)=>(0,f.jsx)(x.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,f.jsx)(x.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,f.jsx)(k,{...e,ref:t})})}));N.displayName=h;var k=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:o,loop:a=!1,dir:l,currentTabStopId:h,defaultCurrentTabStopId:x,onCurrentTabStopIdChange:b,onEntryFocus:v,preventScrollOnEntryFocus:_=!1,...j}=e,N=s.useRef(null),k=(0,i.s)(t,N),A=(0,u.jH)(l),[R=null,C]=(0,m.i)({prop:h,defaultProp:x,onChange:b}),[M,S]=s.useState(!1),T=(0,c.c)(v),I=g(r),F=s.useRef(!1),[L,E]=s.useState(0);return s.useEffect(()=>{let e=N.current;if(e)return e.addEventListener(p,T),()=>e.removeEventListener(p,T)},[T]),(0,f.jsx)(w,{scope:r,orientation:o,dir:A,loop:a,currentTabStopId:R,onItemFocus:s.useCallback(e=>C(e),[C]),onItemShiftTab:s.useCallback(()=>S(!0),[]),onFocusableItemAdd:s.useCallback(()=>E(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>E(e=>e-1),[]),children:(0,f.jsx)(d.sG.div,{tabIndex:M||0===L?-1:0,"data-orientation":o,...j,ref:k,style:{outline:"none",...e.style},onMouseDown:(0,n.m)(e.onMouseDown,()=>{F.current=!0}),onFocus:(0,n.m)(e.onFocus,e=>{let t=!F.current;if(e.target===e.currentTarget&&t&&!M){let t=new CustomEvent(p,y);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=I().filter(e=>e.focusable);P([e.find(e=>e.active),e.find(e=>e.id===R),...e].filter(Boolean).map(e=>e.ref.current),_)}}F.current=!1}),onBlur:(0,n.m)(e.onBlur,()=>S(!1))})})}),A="RovingFocusGroupItem",R=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:o=!0,active:a=!1,tabStopId:i,...c}=e,m=(0,l.B)(),u=i||m,p=j(A,r),y=p.currentTabStopId===u,h=g(r),{onFocusableItemAdd:b,onFocusableItemRemove:v}=p;return s.useEffect(()=>{if(o)return b(),()=>v()},[o,b,v]),(0,f.jsx)(x.ItemSlot,{scope:r,id:u,focusable:o,active:a,children:(0,f.jsx)(d.sG.span,{tabIndex:y?0:-1,"data-orientation":p.orientation,...c,ref:t,onMouseDown:(0,n.m)(e.onMouseDown,e=>{o?p.onItemFocus(u):e.preventDefault()}),onFocus:(0,n.m)(e.onFocus,()=>p.onItemFocus(u)),onKeyDown:(0,n.m)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){p.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let n=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return C[n]}(e,p.orientation,p.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let s=r.indexOf(e.currentTarget);r=p.loop?function(e,t){return e.map((r,s)=>e[(t+s)%e.length])}(r,s+1):r.slice(s+1)}setTimeout(()=>P(r))}})})})});R.displayName=A;var C={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function P(e,t=!1){let r=document.activeElement;for(let s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}var M=r(46059),S="Tabs",[T,I]=(0,o.A)(S,[_]),F=_(),[L,E]=T(S),z=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,onValueChange:n,defaultValue:o,orientation:a="horizontal",dir:i,activationMode:c="automatic",...p}=e,y=(0,u.jH)(i),[h,x]=(0,m.i)({prop:s,onChange:n,defaultProp:o});return(0,f.jsx)(L,{scope:r,baseId:(0,l.B)(),value:h,onValueChange:x,orientation:a,dir:y,activationMode:c,children:(0,f.jsx)(d.sG.div,{dir:y,"data-orientation":a,...p,ref:t})})});z.displayName=S;var D="TabsList",G=s.forwardRef((e,t)=>{let{__scopeTabs:r,loop:s=!0,...n}=e,o=E(D,r),a=F(r);return(0,f.jsx)(N,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:s,children:(0,f.jsx)(d.sG.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:t})})});G.displayName=D;var B="TabsTrigger",U=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,disabled:o=!1,...a}=e,i=E(B,r),l=F(r),c=O(i.baseId,s),m=Y(i.baseId,s),u=s===i.value;return(0,f.jsx)(R,{asChild:!0,...l,focusable:!o,active:u,children:(0,f.jsx)(d.sG.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":m,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:c,...a,ref:t,onMouseDown:(0,n.m)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(s)}),onKeyDown:(0,n.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(s)}),onFocus:(0,n.m)(e.onFocus,()=>{let e="manual"!==i.activationMode;u||o||!e||i.onValueChange(s)})})})});U.displayName=B;var K="TabsContent",q=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,forceMount:o,children:a,...i}=e,l=E(K,r),c=O(l.baseId,n),m=Y(l.baseId,n),u=n===l.value,p=s.useRef(u);return s.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,f.jsx)(M.C,{present:o||u,children:({present:r})=>(0,f.jsx)(d.sG.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!r,id:m,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:r&&a})})});function O(e,t){return`${e}-trigger-${t}`}function Y(e,t){return`${e}-content-${t}`}q.displayName=K;var H=z,V=G,$=U,W=q},51861:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(65239),n=r(48088),o=r(88170),a=r.n(o),i=r(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["admin",{children:["site-settings",{children:["payment",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2601)),"/var/www/html/src/app/admin/site-settings/payment/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,59007)),"/var/www/html/src/app/admin/site-settings/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"/var/www/html/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/var/www/html/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/var/www/html/src/app/admin/site-settings/payment/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/admin/site-settings/payment/page",pathname:"/admin/site-settings/payment",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},56896:(e,t,r)=>{"use strict";r.d(t,{S:()=>l});var s=r(60687),n=r(43210),o=r(40211),a=r(58450),i=r(4780);let l=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)(o.bL,{ref:r,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,s.jsx)(o.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(a.A,{className:"h-4 w-4"})})}));l.displayName=o.bL.displayName},58450:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},59007:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/var/www/html/src/app/admin/site-settings/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/var/www/html/src/app/admin/site-settings/layout.tsx","default")},60907:(e,t,r)=>{Promise.resolve().then(r.bind(r,2601))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return o},normalizeRscURL:function(){return a}});let s=r(85531),n=r(35499);function o(e){return(0,s.ensureLeadingSlash)(e.split("/").reduce((e,t,r,s)=>!t||(0,n.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===s.length-1?e:e+"/"+t,""))}function a(e){return e.replace(/\.rsc($|\?)/,"$1")}},79551:e=>{"use strict";e.exports=require("url")},81321:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(60687),n=r(44493),o=r(58369),a=r(73595),i=r(8824),l=r(27247),d=r(14283),c=r(29596),m=r(59824),u=r(48206),f=r(85814),p=r.n(f),y=r(16189),h=r(4780);let x=[{href:"/admin/site-settings/general",label:"Общие",icon:o.A,baseRoute:"/admin/site-settings/general"},{href:"/admin/site-settings/banners",label:"Баннеры",icon:a.A,baseRoute:"/admin/site-settings/banners"},{href:"/admin/site-settings/notifications",label:"Уведомления",icon:i.A,baseRoute:"/admin/site-settings/notifications"},{href:"/admin/site-settings/smtp",label:"SMTP",icon:l.A,baseRoute:"/admin/site-settings/smtp"},{href:"/admin/site-settings/telegram",label:"Telegram",icon:d.A,baseRoute:"/admin/site-settings/telegram"},{href:"/admin/site-settings/payment",label:"Платежный шлюз",icon:c.A,baseRoute:"/admin/site-settings/payment"},{href:"/admin/site-settings/license",label:"Лицензия",icon:m.A,baseRoute:"/admin/site-settings/license"},{href:"/admin/site-settings/boosters",label:"Бустеры",icon:u.A,baseRoute:"/admin/site-settings/boosters"}];function g({children:e}){let t=(0,y.usePathname)(),r=(e,r)=>r?t===r||t.startsWith(r)&&t.length>r.length&&"/"===t.charAt(r.length):t===e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(n.Zp,{className:"shadow-lg",children:(0,s.jsxs)(n.aR,{children:[(0,s.jsxs)(n.ZB,{className:"text-2xl font-bold text-primary flex items-center",children:[(0,s.jsx)(o.A,{className:"mr-2 h-6 w-6"}),"Настройки Сайта"]}),(0,s.jsx)(n.BT,{className:"text-muted-foreground",children:"Управление глобальными настройками и конфигурациями сайта."})]})}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-6",children:[(0,s.jsx)("aside",{className:"md:col-span-1",children:(0,s.jsx)("nav",{className:"space-y-1",children:x.map(e=>{let t=r(e.href,e.baseRoute);return(0,s.jsxs)(p(),{href:e.href,className:(0,h.cn)("flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",t?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted/50 hover:text-foreground"),children:[(0,s.jsx)(e.icon,{className:"mr-2 h-5 w-5"}),e.label]},e.href)})})}),(0,s.jsx)("main",{className:"md:col-span-3",children:e})]})]})}},83721:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(43210);function n(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},85531:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},85763:(e,t,r)=>{"use strict";r.d(t,{Xi:()=>d,av:()=>c,j7:()=>l,tU:()=>i});var s=r(60687),n=r(43210),o=r(41360),a=r(4780);let i=o.bL,l=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)(o.B8,{ref:r,className:(0,a.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));l.displayName=o.B8.displayName;let d=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)(o.l9,{ref:r,className:(0,a.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));d.displayName=o.l9.displayName;let c=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)(o.UC,{ref:r,className:(0,a.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));c.displayName=o.UC.displayName},93415:(e,t,r)=>{Promise.resolve().then(r.bind(r,81321))},94990:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var s=r(60687),n=r(43210),o=r(27605),a=r(63442),i=r(45880),l=r(44493),d=r(89667),c=r(80013),m=r(29523),u=r(56896),f=r(85763),p=r(58450),y=r(11516),h=r(78726);let x=(0,r(82614).A)("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);var g=r(29596),b=r(21028),v=r(99196),_=r(29867),w=r(35950);let j=i.Ik({yoomoney_shop_id:i.Yj().optional().nullable(),yoomoney_secret_key:i.Yj().optional().nullable(),yoomoney_notify_payment_succeeded:i.zM().default(!0),yoomoney_notify_payment_waiting_for_capture:i.zM().default(!1),yoomoney_notify_payment_canceled:i.zM().default(!0),yoomoney_notify_refund_succeeded:i.zM().default(!0),is_test_mode_active:i.zM().default(!0)}),N=[{id:"yoomoney_notify_payment_succeeded",label:"Успешный платеж",description:"Уведомление о полностью успешном платеже.",eventName:"payment.succeeded",icon:p.A},{id:"yoomoney_notify_payment_waiting_for_capture",label:"Платеж ожидает подтверждения",description:"Платеж создан, ожидает захвата (capture).",eventName:"payment.waiting_for_capture",icon:y.A},{id:"yoomoney_notify_payment_canceled",label:"Отмена/Ошибка платежа",description:"Платеж отменен или произошла ошибка при оплате.",eventName:"payment.canceled",icon:h.A},{id:"yoomoney_notify_refund_succeeded",label:"Успешный возврат",description:"Уведомление об успешном возврате средств покупателю.",eventName:"refund.succeeded",icon:x}];function k(){let{toast:e}=(0,_.dj)(),[t,r]=(0,n.useState)(!1),[i,h]=(0,n.useState)(!0),[x,k]=(0,n.useState)(""),A=(0,o.mN)({resolver:(0,a.u)(j),defaultValues:{yoomoney_shop_id:"",yoomoney_secret_key:"",yoomoney_notify_payment_succeeded:!0,yoomoney_notify_payment_waiting_for_capture:!1,yoomoney_notify_payment_canceled:!0,yoomoney_notify_refund_succeeded:!0,is_test_mode_active:!0}});(0,n.useCallback)(async()=>{h(!0);try{let e=await fetch("/api/admin/site-settings/payment");if(!e.ok){let t=await e.json().catch(()=>({message:"Failed to fetch payment settings"}));throw Error(t.message)}let t=await e.json();A.reset({yoomoney_shop_id:t.yoomoney_shop_id||"",yoomoney_secret_key:"",yoomoney_notify_payment_succeeded:void 0===t.yoomoney_notify_payment_succeeded||t.yoomoney_notify_payment_succeeded,yoomoney_notify_payment_waiting_for_capture:void 0!==t.yoomoney_notify_payment_waiting_for_capture&&t.yoomoney_notify_payment_waiting_for_capture,yoomoney_notify_payment_canceled:void 0===t.yoomoney_notify_payment_canceled||t.yoomoney_notify_payment_canceled,yoomoney_notify_refund_succeeded:void 0===t.yoomoney_notify_refund_succeeded||t.yoomoney_notify_refund_succeeded,is_test_mode_active:void 0===t.is_test_mode_active||t.is_test_mode_active})}catch(t){e({title:"Ошибка загрузки настроек",description:t.message,variant:"destructive"})}finally{h(!1)}},[A,e]);let R=async t=>{r(!0);let s={...t};t.yoomoney_secret_key&&""!==t.yoomoney_secret_key.trim()||delete s.yoomoney_secret_key;try{let t=await fetch("/api/admin/site-settings/payment",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await t.json();if(!t.ok)throw Error(r.message||"Не удалось сохранить настройки.");e({title:"Настройки сохранены",description:"Настройки платежного шлюза успешно обновлены."}),r.settings?A.reset({...r.settings,yoomoney_secret_key:"",is_test_mode_active:!!r.settings.is_test_mode_active}):A.setValue("yoomoney_secret_key","")}catch(t){e({title:"Ошибка сохранения",description:t.message,variant:"destructive"})}finally{r(!1)}};return i?(0,s.jsxs)("div",{className:"flex items-center justify-center p-10",children:[(0,s.jsx)(y.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ml-3 text-muted-foreground",children:"Загрузка настроек платежей..."})]}):(0,s.jsxs)(l.Zp,{className:"shadow-lg",children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsxs)(l.ZB,{className:"text-xl font-bold text-primary flex items-center",children:[(0,s.jsx)(g.A,{className:"mr-2 h-5 w-5"}),"Настройки Платежного Шлюза"]}),(0,s.jsx)(l.BT,{className:"text-muted-foreground",children:"Управление интеграцией с YooMoney Касса и тестовым режимом."})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)("form",{onSubmit:A.handleSubmit(R),children:[(0,s.jsxs)(f.tU,{defaultValue:"yoomoney",className:"w-full",children:[(0,s.jsxs)(f.j7,{className:"grid w-full grid-cols-2 mb-6",children:[(0,s.jsx)(f.Xi,{value:"yoomoney",children:"YooMoney Касса"}),(0,s.jsx)(f.Xi,{value:"test_mode",children:"Тестовый Режим"})]}),(0,s.jsxs)(f.av,{value:"yoomoney",className:"space-y-6",children:[(0,s.jsx)(l.BT,{className:"text-sm text-muted-foreground mb-4",children:"Настройте интеграцию с YooMoney для приема реальных платежей."}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{htmlFor:"yoomoney_shop_id",className:"text-foreground",children:"Shop ID (Идентификатор магазина)"}),(0,s.jsx)(d.p,{id:"yoomoney_shop_id",...A.register("yoomoney_shop_id"),placeholder:"123456",className:"mt-1",disabled:t})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{htmlFor:"yoomoney_secret_key",className:"text-foreground",children:"Секретный ключ"}),(0,s.jsx)(d.p,{id:"yoomoney_secret_key",type:"password",...A.register("yoomoney_secret_key"),placeholder:"•••••••• (оставьте пустым, чтобы не менять)",className:"mt-1",disabled:t})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(c.Label,{className:"text-foreground flex items-center",children:[(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4 text-primary/80"}),"URL для HTTP-уведомлений (Webhook)"]}),(0,s.jsx)(d.p,{value:`${x}/api/payment/yoomoney-webhook`,readOnly:!0,className:"mt-1 bg-muted text-muted-foreground",disabled:t}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Скопируйте этот URL и вставьте в настройках вашего магазина YooMoney Касса."})]}),(0,s.jsx)(w.Separator,{className:"my-6"}),(0,s.jsx)("h4",{className:"text-md font-medium text-foreground",children:"Какие HTTP-уведомления от YooMoney обрабатывать:"}),(0,s.jsx)("div",{className:"space-y-3",children:N.map(e=>(0,s.jsxs)("div",{className:"flex items-start p-2.5 border border-border/30 rounded-md",children:[(0,s.jsx)(o.xI,{control:A.control,name:e.id,render:({field:r})=>(0,s.jsx)(u.S,{id:e.id,checked:r.value,onCheckedChange:r.onChange,className:"mt-1 mr-3 border-primary data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:t})}),(0,s.jsxs)("div",{className:"grid gap-1 leading-none",children:[(0,s.jsxs)(c.Label,{htmlFor:e.id,className:"text-foreground font-medium flex items-center cursor-pointer",children:[(0,s.jsx)(e.icon,{className:"mr-2 h-4 w-4 text-primary/80"}),e.label]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Событие YooMoney: ",(0,s.jsx)("code",{className:"text-xs bg-muted/80 px-1 py-0.5 rounded-sm",children:e.eventName}),". ",e.description]})]})]},e.id))})]}),(0,s.jsxs)(f.av,{value:"test_mode",className:"space-y-6",children:[(0,s.jsx)(l.BT,{className:"text-sm text-muted-foreground",children:"В тестовом режиме все пополнения баланса будут создаваться как заявки, требующие ручного одобрения администратором. Реальная оплата через YooMoney производиться не будет."}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,s.jsx)(o.xI,{control:A.control,name:"is_test_mode_active",render:({field:e})=>(0,s.jsx)(u.S,{id:"is_test_mode_active",checked:e.value,onCheckedChange:e.onChange,className:"border-primary data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:t})}),(0,s.jsx)(c.Label,{htmlFor:"is_test_mode_active",className:"text-lg font-medium leading-none text-foreground",children:"Включить тестовый режим платежей"})]}),A.watch("is_test_mode_active")&&(0,s.jsxs)("div",{className:"p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-md",children:[(0,s.jsx)(v.A,{className:"inline h-4 w-4 mr-1.5 text-yellow-600"}),(0,s.jsx)("span",{className:"text-sm text-yellow-700",children:'Тестовый режим активен. Пополнения будут обрабатываться через заявки в разделе "Тестовые Платежи".'})]}),!A.watch("is_test_mode_active")&&(0,s.jsxs)("div",{className:"p-4 bg-green-500/10 border border-green-500/30 rounded-md",children:[(0,s.jsx)(p.A,{className:"inline h-4 w-4 mr-1.5 text-green-600"}),(0,s.jsx)("span",{className:"text-sm text-green-700",children:"Тестовый режим отключен. Платежи будут обрабатываться через YooMoney Касса."})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end pt-8 border-t border-border/30 mt-8",children:(0,s.jsxs)(m.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",disabled:t||i,children:[t&&(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Сохранить настройки платежей"]})})]})})]})}},99196:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,6724,377,1658,8123,9935,4519,5524],()=>r(51861));module.exports=s})();