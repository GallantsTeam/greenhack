exports.id=5524,exports.ids=[5524],exports.modules={29935:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>V});var s=a(60687),t=a(43210),n=a(85814),i=a.n(n),l=a(16189),o=a(59059),d=a(48206),c=a(24790),m=a(90746),f=a(88853),u=a(35995),h=a(18329),x=a(19379),p=a(36558),b=a(27629),v=a(76976),g=a(58369),y=a(90594),j=a(74158),N=a(4780),w=a(29523),R=a(42692),A=a(96834);let C=[{href:"/admin",label:"Дашборд",icon:o.A,baseRoute:"/admin"},{href:"/admin/users",label:"Пользователи",icon:d.A,baseRoute:"/admin/users"},{href:"/admin/products",label:"Товары",icon:c.A,baseRoute:"/admin/products"},{href:"/admin/categories",label:"Категории",icon:m.A,baseRoute:"/admin/categories"},{href:"/admin/cases",label:"Кейсы",icon:f.A,baseRoute:"/admin/cases"},{href:"/admin/promocodes",label:"Промокоды",icon:u.A,baseRoute:"/admin/promocodes"},{href:"/admin/reviews",label:"Отзывы",icon:h.A,baseRoute:"/admin/reviews",dataTestId:"admin-reviews-link"},{href:"/admin/orders",label:"Заказы",icon:x.A,baseRoute:"/admin/orders"},{href:"/admin/accounting",label:"Бухгалтерия",icon:p.A,baseRoute:"/admin/accounting"},{href:"/statuses",label:"Статус Читов",icon:b.A,baseRoute:"/statuses"},{href:"/admin/tickets",label:"Тикеты",icon:v.A,baseRoute:"/admin/tickets"}],k={href:"/admin/site-settings",label:"Настройки Сайта",icon:g.A,baseRoute:"/admin/site-settings"},T={href:"/admin/test-payments",label:"Тестовые Платежи",icon:y.A,baseRoute:"/admin/test-payments"};function $(){let e=(0,l.usePathname)(),[r,a]=(0,t.useState)(!1),[n,o]=(0,t.useState)(!0),[d,c]=(0,t.useState)(0);(0,t.useCallback)(async()=>{try{let e=await fetch("/api/admin/reviews/pending-count");if(e.ok){let r=await e.json();c(r.count)}else console.warn("Failed to fetch pending review count.")}catch(e){console.error("Error fetching pending review count:",e)}},[]);let m=(r,a)=>{let s=a||r;return"/admin"===s&&"/admin"===e||e.startsWith(s)&&(e===s||"/"===e.charAt(s.length))},f=[...C];return!n&&r&&f.push(T),f.push(k),(0,s.jsxs)("aside",{className:"w-64 bg-card text-card-foreground border-r border-border flex-shrink-0 hidden md:flex flex-col",children:[(0,s.jsx)("div",{className:"p-4 border-b border-border",children:(0,s.jsx)(i(),{href:"/admin",className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"text-xl font-semibold text-primary",children:"Admin Panel"})})}),(0,s.jsx)(R.F,{className:"flex-1",children:(0,s.jsx)("nav",{className:"px-2 py-4 space-y-1",children:f.map(e=>{let r=m(e.href,e.baseRoute),a="admin-reviews-link"===e.dataTestId;return(0,s.jsx)(w.$,{asChild:!0,variant:r?"secondary":"ghost",className:(0,N.cn)("w-full justify-start relative",r?"text-primary bg-primary/10":"text-foreground/70 hover:text-primary hover:bg-primary/5"),children:(0,s.jsxs)(i(),{href:e.href,className:"flex items-center w-full",children:[(0,s.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),(0,s.jsx)("span",{className:"flex-grow",children:e.label}),a&&d>0&&(0,s.jsx)(A.E,{variant:"destructive",className:"ml-auto h-5 px-1.5 text-xs rounded-full",children:d}),r&&!a&&(0,s.jsx)(j.A,{className:"ml-auto h-4 w-4"}),r&&a&&0===d&&(0,s.jsx)(j.A,{className:"ml-auto h-4 w-4"})]})},e.href)})})}),(0,s.jsx)("div",{className:"p-4 border-t border-border mt-auto"})]})}var z=a(55506),F=a(60368),S=a(10453),E=a(29848),L=a(44802),M=a(63213);function P({theme:e,toggleTheme:r}){let{currentUser:a}=(0,M.A)(),t=(0,l.useRouter)();return(0,s.jsxs)("header",{className:"h-16 bg-card text-card-foreground border-b border-border flex items-center justify-between px-6 shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>t.push("/account"),className:"text-primary hover:text-primary/80 hover:bg-primary/10 border-primary",children:[(0,s.jsx)(z.A,{className:"mr-2 h-4 w-4"}),"Назад в ЛК"]}),(0,s.jsx)(w.$,{asChild:!0,variant:"outline",size:"sm",className:"text-primary hover:text-primary/80 hover:bg-primary/10 border-primary",children:(0,s.jsxs)(i(),{href:"/",children:[(0,s.jsx)(F.A,{className:"mr-2 h-4 w-4"}),"Перейти на сайт"]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(w.$,{variant:"ghost",size:"icon",onClick:r,className:"text-primary hover:text-primary/80 hover:bg-primary/10",children:["light"===e?(0,s.jsx)(S.A,{className:"h-5 w-5"}):(0,s.jsx)(E.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]}),a&&(0,s.jsx)(w.$,{asChild:!0,variant:"ghost",className:"text-primary hover:text-primary/80 hover:bg-primary/10",children:(0,s.jsxs)(i(),{href:"/account/settings",children:[(0,s.jsx)(L.A,{className:"mr-2 h-5 w-5"}),a.username]})})]})]})}var I=a(14947);function V({children:e}){let{currentUser:r,loading:a}=(0,M.A)();(0,l.useRouter)();let[n,i]=(0,t.useState)("dark");return a||!r||"admin"!==r.role?(0,s.jsx)("div",{className:"flex h-screen items-center justify-center bg-background text-foreground",children:(0,s.jsx)("p",{children:"Загрузка или проверка прав доступа..."})}):(0,s.jsxs)("div",{className:"flex h-screen bg-background text-foreground",children:[(0,s.jsx)($,{}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,s.jsx)(P,{theme:n,toggleTheme:()=>{i(e=>"light"===e?"dark":"light")}}),(0,s.jsx)("main",{className:"flex-1 overflow-y-auto p-6 md:p-8 bg-muted/30",children:e}),(0,s.jsx)(I.l,{})]})]})}},31441:(e,r,a)=>{Promise.resolve().then(a.bind(a,29935))},42692:(e,r,a)=>{"use strict";a.d(r,{$:()=>o,F:()=>l});var s=a(60687),t=a(43210),n=a(68123),i=a(4780);let l=t.forwardRef(({className:e,children:r,...a},t)=>(0,s.jsxs)(n.bL,{ref:t,className:(0,i.cn)("relative overflow-hidden",e),...a,children:[(0,s.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(o,{}),(0,s.jsx)(n.OK,{})]}));l.displayName=n.bL.displayName;let o=t.forwardRef(({className:e,orientation:r="vertical",...a},t)=>(0,s.jsx)(n.VM,{ref:t,orientation:r,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...a,children:(0,s.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})}));o.displayName=n.VM.displayName},44493:(e,r,a)=>{"use strict";a.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>m});var s=a(60687),t=a(43210),n=a(4780);let i=t.forwardRef(({className:e,...r},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));i.displayName="Card";let l=t.forwardRef(({className:e,...r},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));l.displayName="CardHeader";let o=t.forwardRef(({className:e,...r},a)=>(0,s.jsx)("h3",{ref:a,className:(0,n.cn)("text-xl font-normal uppercase tracking-wider leading-none",e),...r}));o.displayName="CardTitle";let d=t.forwardRef(({className:e,...r},a)=>(0,s.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let c=t.forwardRef(({className:e,...r},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent";let m=t.forwardRef(({className:e,...r},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r}));m.displayName="CardFooter"},66289:(e,r,a)=>{Promise.resolve().then(a.bind(a,99111))},70440:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});var s=a(31658);let t=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},96834:(e,r,a)=>{"use strict";a.d(r,{E:()=>l});var s=a(60687);a(43210);var t=a(24224),n=a(4780);let i=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:r,...a}){return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),e),...a})}},99111:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});let s=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/var/www/html/src/app/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/var/www/html/src/app/admin/layout.tsx","default")}};