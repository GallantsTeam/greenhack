{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement, \n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3 \n    ref={ref}\n    className={cn(\n      \"text-xl font-normal uppercase tracking-wider leading-none\", \n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement, \n  React.HTMLAttributes<HTMLParagraphElement> \n>(({ className, ...props }, ref) => (\n  <p \n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AACA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,6DACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/account/purchase-history/page.tsx"],"sourcesContent":["'use client';\n\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { ShoppingBag, Loader2 } from \"lucide-react\"; \nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useEffect, useState } from \"react\";\nimport type { Purchase } from \"@/types\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Separator } from \"@/components/ui/separator\";\n\ninterface PurchaseHistoryItem extends Purchase {\n  product_name?: string; // Optional, as it's joined\n  product_pricing_option_duration_days?: number; // Optional\n}\n\n\nexport default function PurchaseHistoryPage() {\n  const { currentUser } = useAuth();\n  const { toast } = useToast();\n  const [purchaseHistory, setPurchaseHistory] = useState<PurchaseHistoryItem[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchHistory = async () => {\n      if (!currentUser?.id) {\n        setIsLoading(false);\n        return;\n      }\n      setIsLoading(true);\n      try {\n        const response = await fetch(`/api/user/${currentUser.id}/purchase-history`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch purchase history');\n        }\n        const data: PurchaseHistoryItem[] = await response.json();\n        setPurchaseHistory(data);\n      } catch (error) {\n        console.error(\"Error fetching purchase history:\", error);\n        toast({ title: \"Ошибка\", description: \"Не удалось загрузить историю покупок.\", variant: \"destructive\" });\n        setPurchaseHistory([]);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchHistory();\n  }, [currentUser?.id, toast]);\n\n\n  const formatPurchaseDate = (dateString: string | undefined) => {\n    if (!dateString) return 'N/A';\n    return new Date(dateString).toLocaleString('ru-RU', {\n      year: 'numeric', month: 'long', day: 'numeric',\n      hour: '2-digit', minute: '2-digit'\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <h1 className=\"text-3xl font-bold text-primary tracking-tight\">История Покупок</h1>\n      <Card className=\"shadow-lg\">\n        <CardHeader>\n           <CardTitle className=\"text-xl text-primary flex items-center\">\n            <ShoppingBag className=\"mr-2 h-6 w-6\"/>\n            Ваши транзакции\n          </CardTitle>\n          <CardDescription className=\"text-muted-foreground\">\n            Список всех ваших покупок товаров и услуг.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"min-h-[200px] flex items-center justify-center\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n            </div>\n          ) : purchaseHistory.length > 0 ? (\n            <ul className=\"space-y-4\">\n              {purchaseHistory.map((purchase) => (\n                <li key={purchase.id} className=\"p-4 border border-border rounded-md shadow-sm\">\n                  <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center\">\n                    <div>\n                      <h4 className=\"text-lg font-semibold text-foreground\">\n                        {purchase.product_name || `Товар ID: ${purchase.product_id}`}\n                        {purchase.product_pricing_option_duration_days && ` (${purchase.product_pricing_option_duration_days} дн.)`}\n                      </h4>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Дата: {formatPurchaseDate(purchase.purchase_date)}\n                      </p>\n                    </div>\n                    <div className=\"mt-2 sm:mt-0 text-right\">\n                      <p className=\"text-lg font-bold text-primary\">\n                        -{purchase.amount_paid_gh.toFixed(2)} <span className=\"text-gradient-gh\">GH</span>\n                      </p>\n                      <p className=\"text-xs text-muted-foreground capitalize\">\n                        {purchase.status === 'completed' ? 'Завершено' : purchase.status}\n                      </p>\n                    </div>\n                  </div>\n                  {purchase.description && (\n                     <p className=\"text-xs text-muted-foreground mt-1 pt-1 border-t border-dashed border-border/50\">{purchase.description}</p>\n                  )}\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <div className=\"min-h-[200px] flex items-center justify-center border-2 border-dashed border-border rounded-lg\">\n              <p className=\"text-muted-foreground\">История покупок пока пуста.</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}