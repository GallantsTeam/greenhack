{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/mysql.ts"],"sourcesContent":["\n'use server'; // Add this directive\n\nimport mysql from 'mysql2/promise';\n\nconst connectionConfig = {\n  host: process.env.DB_HOST,\n  user: process.env.DB_USER,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_NAME,\n  connectionLimit: 10, // Optional: connection pool limit\n  namedPlaceholders: true, // Important for using object parameters\n  // Add SSL options if your Jino.ru MySQL requires it\n  // ssl: {\n  //   // ca: fs.readFileSync('/path/to/ca-cert.pem'), // if you have a CA cert\n  //   rejectUnauthorized: false // Be cautious with this in production, true is more secure\n  // }\n};\n\nlet pool: mysql.Pool | null = null;\n\nfunction getPool(): mysql.Pool {\n  if (!pool) {\n    if (!process.env.DB_HOST || !process.env.DB_USER || !process.env.DB_NAME) { // Password can be empty for some local setups\n      console.error(\"Database environment variables DB_HOST, DB_USER, or DB_NAME are not set.\");\n      throw new Error(\"Database environment variables are not fully set. Please check your .env.local file.\");\n    }\n    try {\n      pool = mysql.createPool(connectionConfig);\n      console.log(\"MySQL connection pool created successfully.\");\n\n      // Test the pool by getting a connection (optional, but good for early feedback)\n      pool.getConnection()\n        .then(connection => {\n          console.log(\"Successfully connected to database via pool.\");\n          connection.release();\n        })\n        .catch(err => {\n          console.error(\"Failed to get a connection from pool on startup:\", err);\n          // Depending on severity, you might want to invalidate the pool or exit\n          // For now, we'll let further queries fail if the pool is truly unusable.\n        });\n\n    } catch (error) {\n      console.error(\"Failed to create MySQL connection pool:\", error);\n      // Ensure pool remains null if creation fails\n      pool = null;\n      throw new Error(\"Database connection pool could not be created.\");\n    }\n  }\n  return pool;\n}\n\nexport async function query(sql: string, params?: any[] | object): Promise<any> {\n  const currentPool = getPool(); // This will throw if pool cannot be initialized\n\n  let connection;\n  try {\n    connection = await currentPool.getConnection();\n    console.log(`Executing SQL: ${sql} with params: ${params ? JSON.stringify(params) : 'No params'}`);\n    const [results] = await connection.execute(sql, params);\n    return results;\n  } catch (error: any) {\n    console.error('Database query error:', error.message, error.code, error.sqlMessage, error.sql);\n    throw new Error(`Database query failed: ${error.message}`);\n  } finally {\n    if (connection) {\n      connection.release();\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;AAGA;;;;;AAEA,MAAM,mBAAmB;IACvB,MAAM,QAAQ,GAAG,CAAC,OAAO;IACzB,MAAM,QAAQ,GAAG,CAAC,OAAO;IACzB,UAAU,QAAQ,GAAG,CAAC,WAAW;IACjC,UAAU,QAAQ,GAAG,CAAC,OAAO;IAC7B,iBAAiB;IACjB,mBAAmB;AAMrB;AAEA,IAAI,OAA0B;AAE9B,SAAS;IACP,IAAI,CAAC,MAAM;QACT,IAAI,CAAC,QAAQ,GAAG,CAAC,OAAO,IAAI,CAAC,QAAQ,GAAG,CAAC,OAAO,IAAI,CAAC,QAAQ,GAAG,CAAC,OAAO,EAAE;YACxE,QAAQ,KAAK,CAAC;YACd,MAAM,IAAI,MAAM;QAClB;QACA,IAAI;YACF,OAAO,iIAAA,CAAA,UAAK,CAAC,UAAU,CAAC;YACxB,QAAQ,GAAG,CAAC;YAEZ,gFAAgF;YAChF,KAAK,aAAa,GACf,IAAI,CAAC,CAAA;gBACJ,QAAQ,GAAG,CAAC;gBACZ,WAAW,OAAO;YACpB,GACC,KAAK,CAAC,CAAA;gBACL,QAAQ,KAAK,CAAC,oDAAoD;YAClE,uEAAuE;YACvE,yEAAyE;YAC3E;QAEJ,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2CAA2C;YACzD,6CAA6C;YAC7C,OAAO;YACP,MAAM,IAAI,MAAM;QAClB;IACF;IACA,OAAO;AACT;AAEO,eAAe,uCAAG,GAAH,MAAM,GAAW,EAAE,MAAuB;IAC9D,MAAM,cAAc,WAAW,gDAAgD;IAE/E,IAAI;IACJ,IAAI;QACF,aAAa,MAAM,YAAY,aAAa;QAC5C,QAAQ,GAAG,CAAC,CAAC,eAAe,EAAE,IAAI,cAAc,EAAE,SAAS,KAAK,SAAS,CAAC,UAAU,aAAa;QACjG,MAAM,CAAC,QAAQ,GAAG,MAAM,WAAW,OAAO,CAAC,KAAK;QAChD,OAAO;IACT,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,yBAAyB,MAAM,OAAO,EAAE,MAAM,IAAI,EAAE,MAAM,UAAU,EAAE,MAAM,GAAG;QAC7F,MAAM,IAAI,MAAM,CAAC,uBAAuB,EAAE,MAAM,OAAO,EAAE;IAC3D,SAAU;QACR,IAAI,YAAY;YACd,WAAW,OAAO;QACpB;IACF;AACF;;;IAjBsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/data.ts"],"sourcesContent":["\nimport type { Category, Product, CaseItem, Prize, ProductPricingOption, Purchase, InventoryItem, Referral, BalanceTransaction } from '@/types';\nimport { query } from './mysql'; \n\n// Fetch all \"categories\" (which are now games derived from products)\nexport const getAllCategories = async (): Promise<Category[]> => {\n  try {\n    const results = await query(\n      `SELECT DISTINCT \n         g.id as id, \n         g.slug as slug,\n         g.name as name, \n         g.description as description,\n         g.min_price as min_price,\n         g.image_url as imageUrl, \n         g.logo_url as logoUrl, \n         g.banner_url as banner_url,\n         g.platform as platform,\n         g.tags as tags,\n         g.data_ai_hint as dataAiHint,\n         g.hero_bullet_points as hero_bullet_points,\n         (SELECT COUNT(*) FROM products p WHERE p.game_slug = g.slug) as product_count \n       FROM games g\n       ORDER BY g.name ASC`\n    );\n    \n    return results.map((row: any) => ({\n      id: row.id, \n      name: row.name,\n      slug: String(row.slug).trim(), // Trimmed slug\n      description: row.description,\n      min_price: parseFloat(row.min_price) || 0,\n      imageUrl: (row.imageUrl || `https://placehold.co/800x400.png?text=${encodeURIComponent(row.name)}`).trim(),\n      logoUrl: (row.logoUrl || `https://placehold.co/150x150.png?text=${encodeURIComponent(row.name.substring(0,3))}`).trim(),\n      banner_url: row.banner_url ? String(row.banner_url).trim() : null,\n      platform: row.platform,\n      tags: typeof row.tags === 'string' ? row.tags.split(',').map((tag: string) => tag.trim()).filter(Boolean) : [],\n      dataAiHint: `${row.dataAiHint || String(row.name).toLowerCase()} game icon`,\n      hero_bullet_points: typeof row.hero_bullet_points === 'string' ? row.hero_bullet_points.split('\\n').map((bp: string) => bp.trim()).filter(Boolean) : [],\n      product_count: parseInt(row.product_count) || 0,\n    }));\n  } catch (error) {\n    console.error(\"Error fetching categories:\", error);\n    return [];\n  }\n};\n\n// Fetch a single \"category\" (game) by its slug\nexport const getCategoryBySlug = async (slug: string): Promise<Category | undefined> => {\n  try {\n    const results = await query(\n      `SELECT DISTINCT \n         g.id as id,\n         g.slug as slug,\n         g.name as name,\n         g.description as description,\n         g.min_price as min_price,\n         g.image_url as imageUrl,\n         g.logo_url as logoUrl,\n         g.banner_url as banner_url,\n         g.platform as platform,\n         g.tags as tags,\n         g.data_ai_hint as dataAiHint,\n         g.hero_bullet_points as hero_bullet_points,\n         (SELECT COUNT(*) FROM products p WHERE p.game_slug = g.slug) as product_count\n       FROM games g\n       WHERE g.slug = ?`,\n      [slug.trim()] // Trim slug before query\n    );\n    if (results.length === 0) return undefined;\n    const row = results[0];\n    return {\n      id: row.id,\n      name: row.name,\n      slug: String(row.slug).trim(), // Trimmed slug\n      description: row.description,\n      min_price: parseFloat(row.min_price) || 0,\n      imageUrl: (row.imageUrl || `https://placehold.co/800x400.png?text=${encodeURIComponent(row.name)}`).trim(),\n      logoUrl: (row.logoUrl || `https://placehold.co/150x150.png?text=${encodeURIComponent(row.name.substring(0,3))}`).trim(),\n      banner_url: row.banner_url ? String(row.banner_url).trim() : null,\n      platform: row.platform,\n      tags: typeof row.tags === 'string' ? row.tags.split(',').map((tag: string) => tag.trim()).filter(tag => tag) : [],\n      dataAiHint: `${row.dataAiHint || String(row.name).toLowerCase()} game icon`,\n      hero_bullet_points: typeof row.hero_bullet_points === 'string' ? row.hero_bullet_points.split('\\n').map((bp: string) => bp.trim()).filter(Boolean) : [],\n      product_count: parseInt(row.product_count) || 0,\n    };\n  } catch (error) {\n    console.error(`Error fetching category by slug ${slug}:`, error);\n    return undefined;\n  }\n};\n\n// Fetch all products from the database\nexport const getAllProducts = async (): Promise<Product[]> => {\n  try {\n    const results = await query(\n      `SELECT \n         p.id, p.name, p.slug, p.game_slug, p.image_url, \n         p.status, p.status_text, \n         p.short_description, p.long_description, p.data_ai_hint,\n         p.mode, p.gallery_image_urls,\n         p.functions_aim_title, p.functions_aim, p.functions_aim_description,\n         p.functions_esp_title, p.functions_wallhack, p.functions_esp_description,\n         p.functions_misc_title, p.functions_misc, p.functions_misc_description,\n         p.system_os, p.system_build, p.system_gpu, p.system_cpu,\n         p.price_text,\n         p.retrieval_modal_intro_text,\n         p.retrieval_modal_antivirus_text,\n         p.retrieval_modal_antivirus_link_text,\n         p.retrieval_modal_antivirus_link_url,\n         p.retrieval_modal_launcher_text,\n         p.retrieval_modal_launcher_link_text,\n         p.retrieval_modal_launcher_link_url,\n         p.retrieval_modal_key_paste_text,\n         p.retrieval_modal_support_text,\n         p.retrieval_modal_support_link_text,\n         p.retrieval_modal_support_link_url,\n         p.retrieval_modal_how_to_run_link,\n         p.created_at, p.updated_at,\n         (SELECT MIN(ppo.price_rub) FROM product_pricing_options ppo WHERE ppo.product_id = p.id AND ppo.is_rub_payment_visible = TRUE) as min_price_rub_calculated,\n         (SELECT MIN(ppo.price_gh) FROM product_pricing_options ppo WHERE ppo.product_id = p.id AND ppo.is_gh_payment_visible = TRUE) as min_price_gh_calculated,\n         COALESCE(g.name, p.game_slug) as gameName,\n         g.logo_url as gameLogoUrl,\n         g.platform as gamePlatform\n       FROM products p\n       LEFT JOIN games g ON p.game_slug = g.slug \n       ORDER BY p.name ASC`\n    );\n    \n    return results.map((row: any) => ({\n      id: String(row.id).trim(), // Trimmed id (product slug)\n      name: row.name,\n      slug: String(row.slug).trim(), // Trimmed slug\n      game_slug: String(row.game_slug).trim(), // Trimmed game_slug\n      image_url: row.image_url ? String(row.image_url).trim() : null,\n      imageUrl: (row.image_url || `https://placehold.co/300x350.png?text=${encodeURIComponent(row.name)}`).trim(),\n      status: (row.status ? String(row.status).toLowerCase() : 'unknown') as Product['status'],\n      status_text: row.status_text,\n      price: parseFloat(row.min_price_rub_calculated || '0'), \n      min_price_rub: row.min_price_rub_calculated ? parseFloat(row.min_price_rub_calculated) : undefined,\n      min_price_gh: row.min_price_gh_calculated ? parseFloat(row.min_price_gh_calculated) : undefined,\n      price_text: row.price_text,\n      short_description: row.short_description,\n      long_description: row.long_description,\n      data_ai_hint: row.data_ai_hint || `${String(row.name).toLowerCase()} product`,\n      mode: row.mode,\n      gallery_image_urls: row.gallery_image_urls ? String(row.gallery_image_urls).split(',').map((url: string) => url.trim()).filter(Boolean) : [],\n      functions_aim_title: row.functions_aim_title,\n      functions_aim: row.functions_aim ? String(row.functions_aim).split(',').map((fn: string) => fn.trim()).filter(Boolean) : [],\n      functions_aim_description: row.functions_aim_description,\n      functions_esp_title: row.functions_esp_title,\n      functions_wallhack: row.functions_wallhack ? String(row.functions_wallhack).split(',').map((fn: string) => fn.trim()).filter(Boolean) : [],\n      functions_esp_description: row.functions_esp_description,\n      functions_misc_title: row.functions_misc_title,\n      functions_misc: row.functions_misc ? String(row.functions_misc).split(',').map((fn: string) => fn.trim()).filter(Boolean) : [],\n      functions_misc_description: row.functions_misc_description,\n      system_os: row.system_os,\n      system_build: row.system_build,\n      system_gpu: row.system_gpu,\n      system_cpu: row.system_cpu,\n      retrieval_modal_intro_text: row.retrieval_modal_intro_text,\n      retrieval_modal_antivirus_text: row.retrieval_modal_antivirus_text,\n      retrieval_modal_antivirus_link_text: row.retrieval_modal_antivirus_link_text, \n      retrieval_modal_antivirus_link_url: row.retrieval_modal_antivirus_link_url,   \n      retrieval_modal_launcher_text: row.retrieval_modal_launcher_text,\n      retrieval_modal_launcher_link_text: row.retrieval_modal_launcher_link_text, \n      retrieval_modal_launcher_link_url: row.retrieval_modal_launcher_link_url,   \n      retrieval_modal_key_paste_text: row.retrieval_modal_key_paste_text,\n      retrieval_modal_support_text: row.retrieval_modal_support_text,\n      retrieval_modal_support_link_text: row.retrieval_modal_support_link_text, \n      retrieval_modal_support_link_url: row.retrieval_modal_support_link_url,   \n      retrieval_modal_how_to_run_link: row.retrieval_modal_how_to_run_link,\n      created_at: row.created_at,\n      updated_at: row.updated_at,\n      gameName: row.gameName,\n      gameLogoUrl: row.gameLogoUrl ? String(row.gameLogoUrl).trim() : null,\n      gamePlatform: row.gamePlatform, \n    }));\n  } catch (error) {\n    console.error(\"Error fetching products:\", error);\n    return [];\n  }\n};\n\n\n// Fetch a single product by its slug, including new detailed fields\nexport const getProductBySlug = async (slug: string): Promise<Product | undefined> => {\n  try {\n    const productResults = await query(\n      `SELECT \n         p.id, p.name, p.slug, p.game_slug, p.image_url, \n         p.status, p.status_text, \n         p.short_description, p.long_description, p.data_ai_hint,\n         p.mode, p.gallery_image_urls,\n         p.functions_aim_title, p.functions_aim, p.functions_aim_description,\n         p.functions_esp_title, p.functions_wallhack, p.functions_esp_description,\n         p.functions_misc_title, p.functions_misc, p.functions_misc_description,\n         p.system_os, p.system_build, p.system_gpu, p.system_cpu,\n         p.price_text,\n         p.retrieval_modal_intro_text, \n         p.retrieval_modal_antivirus_text, \n         p.retrieval_modal_antivirus_link_text,\n         p.retrieval_modal_antivirus_link_url,\n         p.retrieval_modal_launcher_text,\n         p.retrieval_modal_launcher_link_text,\n         p.retrieval_modal_launcher_link_url,\n         p.retrieval_modal_key_paste_text,\n         p.retrieval_modal_support_text,\n         p.retrieval_modal_support_link_text,\n         p.retrieval_modal_support_link_url,\n         p.retrieval_modal_how_to_run_link,\n         p.created_at, p.updated_at,\n         COALESCE(g.name, p.game_slug) as gameName,\n         g.logo_url as gameLogoUrl,\n         g.platform as gamePlatform \n       FROM products p\n       LEFT JOIN games g ON p.game_slug = g.slug \n       WHERE p.slug = ?`,\n      [slug.trim()] // Trim slug before query\n    );\n    if (productResults.length === 0) return undefined;\n    const row = productResults[0];\n\n    const pricingOptionsResults = await query(\n      'SELECT * FROM product_pricing_options WHERE product_id = ? ORDER BY duration_days ASC, mode_label ASC',\n      [String(row.id).trim()] // Trim product.id when fetching options\n    );\n    \n    const pricing_options: ProductPricingOption[] = Array.isArray(pricingOptionsResults) ? pricingOptionsResults.map((opt: any) => ({\n      id: opt.id, \n      product_id: String(opt.product_id).trim(), // Trim product_id in options\n      duration_days: parseInt(opt.duration_days, 10),\n      price_rub: parseFloat(opt.price_rub),\n      price_gh: parseFloat(opt.price_gh),\n      payment_link: opt.payment_link || null,\n      mode_label: opt.mode_label || null, \n      created_at: opt.created_at,\n      // Added new fields with defaults\n      is_rub_payment_visible: opt.is_rub_payment_visible === undefined ? true : Boolean(opt.is_rub_payment_visible),\n      is_gh_payment_visible: opt.is_gh_payment_visible === undefined ? true : Boolean(opt.is_gh_payment_visible),\n      custom_payment_1_label: opt.custom_payment_1_label || null,\n      custom_payment_1_price_rub: opt.custom_payment_1_price_rub ? parseFloat(opt.custom_payment_1_price_rub) : null,\n      custom_payment_1_link: opt.custom_payment_1_link || null,\n      custom_payment_1_is_visible: opt.custom_payment_1_is_visible === undefined ? false : Boolean(opt.custom_payment_1_is_visible),\n      custom_payment_2_label: opt.custom_payment_2_label || null,\n      custom_payment_2_price_rub: opt.custom_payment_2_price_rub ? parseFloat(opt.custom_payment_2_price_rub) : null,\n      custom_payment_2_link: opt.custom_payment_2_link || null,\n      custom_payment_2_is_visible: opt.custom_payment_2_is_visible === undefined ? false : Boolean(opt.custom_payment_2_is_visible),\n    })) : [];\n    \n    const minRubOption = pricing_options.length > 0 ? pricing_options.filter(o => o.is_rub_payment_visible).reduce((min, p) => p.price_rub < min ? p.price_rub : min, pricing_options.filter(o => o.is_rub_payment_visible)[0]?.price_rub ?? Infinity) : 0;\n    const minGhOption = pricing_options.length > 0 ? pricing_options.filter(o => o.is_gh_payment_visible).reduce((min, p) => p.price_gh < min ? p.price_gh : min, pricing_options.filter(o => o.is_gh_payment_visible)[0]?.price_gh ?? Infinity) : 0;\n\n\n    return {\n      id: String(row.id).trim(), // Trimmed id (product slug)\n      name: row.name,\n      slug: String(row.slug).trim(), // Trimmed slug\n      game_slug: String(row.game_slug).trim(), // Trimmed game_slug\n      image_url: row.image_url ? String(row.image_url).trim() : null,\n      imageUrl: (row.image_url || `https://placehold.co/600x400.png?text=${encodeURIComponent(row.name)}`).trim(),\n      status: (row.status ? String(row.status).toLowerCase() : 'unknown') as Product['status'],\n      status_text: row.status_text || 'Статус неизвестен',\n      price: minRubOption === Infinity ? 0 : minRubOption, \n      min_price_rub: minRubOption === Infinity ? undefined : minRubOption,\n      min_price_gh: minGhOption === Infinity ? undefined : minGhOption,\n      price_text: row.price_text,\n      short_description: row.short_description,\n      long_description: row.long_description,\n      data_ai_hint: row.data_ai_hint || `${String(row.name).toLowerCase()} product`,\n      mode: row.mode,\n      gallery_image_urls: row.gallery_image_urls ? String(row.gallery_image_urls).split(',').map((url: string) => url.trim()).filter(Boolean) : [],\n      functions_aim_title: row.functions_aim_title,\n      functions_aim: row.functions_aim ? String(row.functions_aim).split(',').map((fn: string) => fn.trim()).filter(Boolean) : [],\n      functions_aim_description: row.functions_aim_description,\n      functions_esp_title: row.functions_esp_title,\n      functions_wallhack: row.functions_wallhack ? String(row.functions_wallhack).split(',').map((fn: string) => fn.trim()).filter(Boolean) : [],\n      functions_esp_description: row.functions_esp_description,\n      functions_misc_title: row.functions_misc_title,\n      functions_misc: row.functions_misc ? String(row.functions_misc).split(',').map((fn: string) => fn.trim()).filter(Boolean) : [],\n      functions_misc_description: row.functions_misc_description,\n      system_os: row.system_os,\n      system_build: row.system_build,\n      system_gpu: row.system_gpu,\n      system_cpu: row.system_cpu,\n      pricing_options: pricing_options.length > 0 ? pricing_options : [], \n      retrieval_modal_intro_text: row.retrieval_modal_intro_text,\n      retrieval_modal_antivirus_text: row.retrieval_modal_antivirus_text,\n      retrieval_modal_antivirus_link_text: row.retrieval_modal_antivirus_link_text, \n      retrieval_modal_antivirus_link_url: row.retrieval_modal_antivirus_link_url,   \n      retrieval_modal_launcher_text: row.retrieval_modal_launcher_text,\n      retrieval_modal_launcher_link_text: row.retrieval_modal_launcher_link_text, \n      retrieval_modal_launcher_link_url: row.retrieval_modal_launcher_link_url,   \n      retrieval_modal_key_paste_text: row.retrieval_modal_key_paste_text,\n      retrieval_modal_support_text: row.retrieval_modal_support_text,\n      retrieval_modal_support_link_text: row.retrieval_modal_support_link_text, \n      retrieval_modal_support_link_url: row.retrieval_modal_support_link_url,   \n      retrieval_modal_how_to_run_link: row.retrieval_modal_how_to_run_link,\n      created_at: row.created_at,\n      updated_at: row.updated_at,\n      gameName: row.gameName,\n      gameLogoUrl: row.gameLogoUrl ? String(row.gameLogoUrl).trim() : null,\n      gamePlatform: row.gamePlatform,\n    };\n  } catch (error) {\n    console.error(`Error fetching product by slug ${slug}:`, error);\n    return undefined;\n  }\n};\n\n// Fetch products belonging to a specific game slug\nexport const getProductsByCategorySlug = async (gameSlug: string): Promise<Product[]> => {\n  try {\n    const results = await query(\n      `SELECT \n         p.id, p.name, p.slug, p.game_slug, p.image_url, \n         p.status, p.status_text, \n         p.short_description, p.long_description, p.data_ai_hint,\n         (SELECT MIN(ppo.price_rub) FROM product_pricing_options ppo WHERE ppo.product_id = p.id AND ppo.is_rub_payment_visible = TRUE) as min_price_rub,\n         (SELECT MIN(ppo.price_gh) FROM product_pricing_options ppo WHERE ppo.product_id = p.id AND ppo.is_gh_payment_visible = TRUE) as min_price_gh,\n         p.price_text,\n         COALESCE(g.name, p.game_slug) as gameName,\n         g.logo_url as gameLogoUrl,\n         g.platform as gamePlatform \n       FROM products p\n       LEFT JOIN games g ON p.game_slug = g.slug \n       WHERE p.game_slug = ?\n       ORDER BY p.name ASC`,\n      [gameSlug.trim()] // Trim gameSlug before query\n    );\n    return results.map((row: any) => ({\n      id: String(row.id).trim(), // Trimmed id (product slug)\n      name: row.name,\n      slug: String(row.slug).trim(), // Trimmed slug\n      game_slug: String(row.game_slug).trim(), // Trimmed game_slug\n      image_url: row.image_url ? String(row.image_url).trim() : null,\n      imageUrl: (row.image_url || `https://placehold.co/300x350.png?text=${encodeURIComponent(row.name)}`).trim(),\n      status: (row.status ? String(row.status).toLowerCase() : 'unknown') as Product['status'],\n      status_text: row.status_text || 'Статус неизвестен',\n      price: parseFloat(row.min_price_rub || '0'),\n      min_price_rub: row.min_price_rub ? parseFloat(row.min_price_rub) : undefined,\n      min_price_gh: row.min_price_gh ? parseFloat(row.min_price_gh) : undefined,\n      price_text: row.price_text,\n      short_description: row.short_description,\n      long_description: row.long_description,\n      data_ai_hint: row.data_ai_hint || `${String(row.name).toLowerCase()} product`,\n      gameName: row.gameName,\n      gameLogoUrl: row.gameLogoUrl ? String(row.gameLogoUrl).trim() : null,\n      gamePlatform: row.gamePlatform, \n    }));\n  } catch (error) {\n    console.error(`Error fetching products for game slug ${gameSlug}:`, error);\n    return [];\n  }\n};\n\n// --- Case Data Fetching ---\nexport const getCaseById = async (caseId: string): Promise<CaseItem | null> => {\n  try {\n    const caseResults = await query('SELECT * FROM cases WHERE id = ? AND is_active = TRUE', [caseId.trim()]); // Trim caseId\n    if (caseResults.length === 0) {\n      console.warn(`Case with ID ${caseId} not found or not active.`);\n      return null;\n    }\n    const caseRow = caseResults[0];\n\n    const prizeResults = await query('SELECT * FROM case_prizes WHERE case_id = ?', [caseId.trim()]); // Trim caseId\n    const prizes: Prize[] = prizeResults.map((pRow: any) => ({\n      id: String(pRow.id).trim(), // Trimmed prize id\n      case_id: String(pRow.case_id).trim(), // Trimmed case_id in prize\n      name: pRow.name,\n      prize_type: pRow.prize_type,\n      related_product_id: pRow.related_product_id ? String(pRow.related_product_id).trim() : null, // Trimmed related_product_id\n      duration_days: pRow.duration_days ? parseInt(pRow.duration_days, 10) : null,\n      days: pRow.duration_days ? parseInt(pRow.duration_days, 10) : null, \n      balance_gh_amount: pRow.balance_gh_amount ? parseFloat(pRow.balance_gh_amount) : undefined,\n      image_url: pRow.image_url ? String(pRow.image_url).trim() : null,\n      imageUrl: (pRow.image_url || `https://placehold.co/120x120.png?text=${encodeURIComponent(pRow.id)}`).trim(),\n      chance: parseFloat(pRow.chance),\n      sell_value_gh: pRow.sell_value_gh ? parseFloat(pRow.sell_value_gh) : undefined,\n      data_ai_hint: pRow.data_ai_hint || `${String(pRow.name).toLowerCase()} prize`,\n      mode_label: pRow.mode_label, \n    }));\n\n    return {\n      id: String(caseRow.id).trim(), // Trimmed case id\n      name: caseRow.name,\n      image_url: caseRow.image_url ? String(caseRow.image_url).trim() : null,\n      imageUrl: (caseRow.image_url || `https://placehold.co/300x300.png?text=Case`).trim(), \n      prizes: prizes,\n      base_price_gh: parseFloat(caseRow.base_price_gh),\n      description: caseRow.description,\n      data_ai_hint: caseRow.data_ai_hint || `${String(caseRow.name).toLowerCase()} case`,\n      is_active: Boolean(caseRow.is_active),\n      is_hot_offer: Boolean(caseRow.is_hot_offer),\n      timer_enabled: Boolean(caseRow.timer_enabled),\n      timer_ends_at: caseRow.timer_ends_at ? new Date(caseRow.timer_ends_at).toISOString() : null,\n      created_at: caseRow.created_at,\n    };\n  } catch (error) {\n    console.error(`Error fetching case by ID ${caseId}:`, error);\n    return null;\n  }\n};\n\nexport const getPurchaseHistory = async (userId: number): Promise<Purchase[]> => {\n  return []; \n};\n\nexport interface CaseOpeningRecord { \n  id: number;\n  user_id: number;\n  case_id: string;\n  won_prize_id: string;\n  opened_at?: string; \n  action_taken: 'kept' | 'sold' | 'pending';\n  sold_value_gh?: number | null;\n}\n\nexport const getCaseOpeningsHistory = async (userId: number): Promise<CaseOpeningRecord[]> => { \n return []; \n};\n\nexport const getUserInventory = async (userId: number): Promise<InventoryItem[]> => {\n  return []; \n};\n\nexport const getReferralData = async (userId: number): Promise<{ referrals: Referral[], totalEarned: number }> => {\n  return { referrals: [], totalEarned: 0 }; \n};\n\nexport const getBalanceTransactions = async (userId: number): Promise<BalanceTransaction[]> => {\n  return []; \n};\n    \n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 638, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 654, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement, \n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3 \n    ref={ref}\n    className={cn(\n      \"text-xl font-normal uppercase tracking-wider leading-none\", \n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement, \n  React.HTMLAttributes<HTMLParagraphElement> \n>(({ className, ...props }, ref) => (\n  <p \n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AACA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,6DACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 735, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE","debugId":null}},
    {"offset": {"line": 777, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-primary bg-transparent text-primary hover:bg-primary/10 hover:text-primary/90\", // Updated for primary color border and text\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 837, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ProductCard.tsx"],"sourcesContent":["\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport type { Product } from '@/types';\nimport { Card, CardContent, CardTitle } from '@/components/ui/card'; \nimport { cn } from '@/lib/utils';\nimport { CheckCircle, RefreshCw, AlertTriangle, ShieldQuestion, ShoppingCart, ArrowRight } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\n\n\ninterface ProductCardProps {\n  product: Product;\n  className?: string;\n}\n\nconst ProductCard = ({ product, className }: ProductCardProps) => {\n  const statusDetailsMap = {\n    safe: { text: 'Безопасен', icon: CheckCircle, glow: 'primary', iconColor: 'text-icon-color', badgeClass: 'bg-primary/20 text-primary border-primary/40' },\n    updating: { text: 'На обновлении', icon: RefreshCw, glow: 'sky', iconColor: 'text-sky-400', badgeClass: 'bg-sky-500/20 text-sky-400 border-sky-500/40 animate-pulse' },\n    risky: { text: 'Не безопасен', icon: AlertTriangle, glow: 'red', iconColor: 'text-red-400', badgeClass: 'bg-red-600/20 text-red-400 border-red-600/40' },\n    unknown: { text: 'На обновлении', icon: RefreshCw, glow: 'sky', iconColor: 'text-sky-400', badgeClass: 'bg-sky-500/20 text-sky-400 border-sky-500/40 animate-pulse' },\n  };\n\n  const currentStatus = statusDetailsMap[product.status] || statusDetailsMap.unknown;\n  const StatusIcon = currentStatus.icon;\n\n\n  const glowClasses = {\n    primary: 'hover:shadow-[0_0_15px_3px_hsl(var(--icon-color-hsl)/0.4)] border-icon-color', \n    orange: 'hover:shadow-[0_0_15px_3px_rgba(251,146,60,0.4)] border-orange-500/70', \n    red: 'hover:shadow-[0_0_15px_3px_rgba(239,68,68,0.4)] border-red-500/70',\n    sky: 'hover:shadow-[0_0_15px_3px_rgba(56,189,248,0.4)] border-sky-500/70', \n  };\n  const effectiveGlowClass = currentStatus.glow ? glowClasses[currentStatus.glow as keyof typeof glowClasses] : 'hover:border-icon-color/50';\n\n  const formatValue = (value: number | undefined | null): string => {\n    if (typeof value !== 'number' || value === null || isNaN(value)) {\n      return '';\n    }\n    if (value % 1 === 0) {\n      return value.toLocaleString('ru-RU', { minimumFractionDigits: 0, maximumFractionDigits: 0 });\n    }\n    return value.toLocaleString('ru-RU', { minimumFractionDigits: 0, maximumFractionDigits: 0 });\n  };\n\n  const formatPriceDisplay = (product: Product) => {\n    const hasRubPrice = product.min_price_rub !== undefined && product.min_price_rub !== null && product.min_price_rub >= 0;\n    const hasGhPrice = product.min_price_gh !== undefined && product.min_price_gh !== null && product.min_price_gh >= 0;\n\n    const rubPriceFormatted = hasRubPrice ? `${formatValue(product.min_price_rub!)} ₽` : '';\n    const ghPriceFormatted = hasGhPrice ? `${formatValue(product.min_price_gh!)} GH` : '';\n\n    if (hasRubPrice && hasGhPrice) {\n      return `от ${rubPriceFormatted} / ${ghPriceFormatted}`;\n    }\n    if (hasRubPrice) {\n      return `от ${rubPriceFormatted}`;\n    }\n    if (hasGhPrice) {\n      return `от ${ghPriceFormatted}`;\n    }\n    return product.price_text || 'Подробнее';\n  };\n\n  return (\n    <Card\n      className={cn(\n        \"overflow-hidden shadow-lg hover:shadow-primary/20 transition-all duration-300 ease-in-out transform hover:-translate-y-1 h-full flex flex-col border-2 border-card hover:border-icon-color/70 rounded-xl group\",\n        effectiveGlowClass,\n        className\n      )}\n    >\n      <Link href={`/products/${product.slug}`} className=\"block flex flex-col flex-grow\">\n        <div className=\"relative w-full h-52 md:h-56 overflow-hidden\">\n          <Image\n            src={product.imageUrl || product.image_url || 'https://placehold.co/400x300.png'}\n            alt={product.name}\n            layout=\"fill\"\n            objectFit=\"cover\"\n            className=\"transition-transform duration-500 ease-out group-hover:scale-110\"\n            data-ai-hint={product.data_ai_hint || `${product.name} game art`}\n          />\n           {product.gameLogoUrl && (\n            <div className=\"absolute top-3 right-3 bg-background/80 p-1.5 rounded-md shadow-md\">\n              <Image src={product.gameLogoUrl} alt={`${product.gameName || 'Game'} logo`} width={28} height={28} data-ai-hint=\"game logo icon\"/>\n            </div>\n          )}\n        </div>\n\n        <div className=\"p-4 flex flex-col flex-grow justify-between bg-card/50\">\n          <div>\n            <CardTitle className=\"text-lg md:text-xl font-semibold text-icon-color group-hover:text-primary transition-colors mb-1 truncate\" title={product.name}>\n              {product.name}\n            </CardTitle>\n            <Badge variant={currentStatus.badgeClass?.includes('primary') ? 'default' : currentStatus.badgeClass?.includes('orange') || currentStatus.badgeClass?.includes('sky') ? 'secondary' : currentStatus.badgeClass?.includes('red') ? 'destructive' : 'outline'} className={cn(\"text-xs py-0.5 px-2 mb-2\", currentStatus.badgeClass)}>\n                {StatusIcon && <StatusIcon className={cn(\"h-3 w-3 mr-1\", currentStatus.iconColor, product.status === 'updating' || product.status === 'unknown' ? 'animate-pulse' : '')} />}\n                {currentStatus.text}\n            </Badge>\n            {product.short_description && (\n              <CardContent className=\"text-xs md:text-sm text-muted-foreground mb-3 line-clamp-2 p-0\">\n                {product.short_description}\n              </CardContent>\n            )}\n          </div>\n          <div className=\"mt-auto flex items-center justify-between pt-2\">\n             <p className=\"text-base md:text-lg font-bold text-icon-color\">{formatPriceDisplay(product)}</p>\n            <Button variant=\"ghost\" size=\"sm\" className=\"text-icon-color hover:text-primary/80 hover:bg-transparent p-0 h-auto text-sm\">\n              Перейти <ArrowRight className=\"ml-1.5 h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      </Link>\n    </Card>\n  );\n};\n\nexport default ProductCard;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1082, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/CategoryScroller.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/CategoryScroller.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/CategoryScroller.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAuS,GACpU,qEACA","debugId":null}},
    {"offset": {"line": 1096, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/CategoryScroller.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/CategoryScroller.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/CategoryScroller.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAmR,GAChT,iDACA","debugId":null}},
    {"offset": {"line": 1110, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 1120, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/games/%5BgameId%5D/page.tsx"],"sourcesContent":["\nimport { getCategoryBySlug, getProductsByCategorySlug, getAllCategories } from '@/lib/data';\nimport type { Product, Category } from '@/types';\nimport Image from 'next/image';\nimport { notFound } from 'next/navigation';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription, CardFooter } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { AlertCircle, CheckCircle, ChevronsRight, GamepadIcon, List, Loader2, ShoppingCart, ShieldQuestion, RefreshCw, Tag, Home } from 'lucide-react';\nimport Link from 'next/link';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\nimport ProductCard from '@/components/ProductCard'; \nimport CategoryScroller from '@/components/CategoryScroller'; \n// Removed Breadcrumbs import\n\nexport async function generateStaticParams() {\n  const categories = await getAllCategories();\n  return categories.map(category => ({ gameId: category.slug }));\n}\n\nconst statusDetailsMap = {\n  safe: { text: 'Безопасен', icon: CheckCircle, colorClass: 'text-primary', badgeClass: 'bg-primary/20 text-primary border-primary/40' },\n  updating: { text: 'Обновляется', icon: RefreshCw, colorClass: 'text-orange-400', badgeClass: 'bg-orange-500/20 text-orange-300 border-orange-500/40' },\n  risky: { text: 'Рискованно', icon: AlertCircle, colorClass: 'text-red-400', badgeClass: 'bg-red-600/20 text-red-400 border-red-600/40' },\n  unknown: { text: 'Неизвестно', icon: ShieldQuestion, colorClass: 'text-muted-foreground', badgeClass: 'bg-muted/50 text-muted-foreground border-muted-foreground/30' },\n};\n\nexport default async function GameDetailPage({ params }: { params: { gameId: string } }) {\n  const category = await getCategoryBySlug(params.gameId);\n\n  if (!category) {\n    notFound();\n  }\n\n  const products = await getProductsByCategorySlug(category.slug);\n  const allCategoriesForScroller = await getAllCategories(); \n\n  // Breadcrumb items definition removed\n\n  return (\n    <div className=\"bg-background text-foreground\">\n      {/* Hero Section */}\n      <section className=\"relative h-[40vh] md:h-[50vh] lg:h-[60vh] flex items-end px-6 pb-6 md:px-10 md:pb-10 text-white overflow-hidden\"> {/* Removed pt-6 md:pt-10 */}\n        <Image\n          src={category.banner_url || category.imageUrl} \n          alt={`${category.name} Banner`}\n          layout=\"fill\"\n          objectFit=\"cover\"\n          style={{ objectPosition: 'center top' }}\n          priority\n          className=\"absolute inset-0 z-0 opacity-40\"\n          data-ai-hint={`${category.slug} game banner`}\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-background via-background/70 to-transparent z-10\" />\n        <div className=\"container mx-auto relative z-20 flex flex-col md:flex-row items-end justify-between\">\n          <div className=\"flex items-center gap-4\">\n            {category.logoUrl && (\n              <div className=\"relative w-20 h-20 md:w-28 md:h-28 rounded-md overflow-hidden shadow-lg border-2 border-primary/30 bg-card/50 p-1\">\n                <Image\n                  src={category.logoUrl}\n                  alt={`${category.name} Logo`}\n                  layout=\"fill\"\n                  objectFit=\"contain\"\n                  data-ai-hint={`${category.slug} game logo`}\n                />\n              </div>\n            )}\n            <div>\n              {/* Breadcrumbs component removed */}\n              <h1 className=\"text-3xl md:text-4xl lg:text-5xl font-bold uppercase tracking-wider text-foreground [text-shadow:_2px_2px_8px_hsl(var(--background)/0.8)] mt-4 md:mt-0\">{category.name}</h1>\n            </div>\n          </div>\n           <div className=\"mt-4 md:mt-0 md:ml-8 text-muted-foreground max-w-md md:text-right\">\n            <ul className=\"space-y-1.5\"> \n              {(category.hero_bullet_points && category.hero_bullet_points.length > 0) ? (\n                category.hero_bullet_points.map((point, index) => (\n                  <li key={index} className=\"flex items-center justify-end text-lg md:text-xl\"> {/* Increased font size */}\n                    <ChevronsRight className=\"h-5 w-5 md:h-6 md:w-6 text-primary mr-1.5 shrink-0\" /> {/* Increased icon size */}\n                    {point}\n                  </li>\n                ))\n              ) : category.description ? (\n                 <li className=\"flex items-center justify-end text-lg md:text-xl\">\n                    <ChevronsRight className=\"h-5 w-5 md:h-6 md:w-6 text-primary mr-1.5 shrink-0\" />\n                    {category.description.length > 100 ? `${category.description.substring(0, 97)}...` : category.description}\n                  </li>\n              ) : null}\n              {category.min_price > 0 && (\n                 <li className=\"flex items-center justify-end text-lg md:text-xl\">\n                    <ChevronsRight className=\"h-5 w-5 md:h-6 md:w-6 text-primary mr-1.5 shrink-0\" />\n                    Цены от {category.min_price.toFixed(0)}₽\n                  </li>\n              )}\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Category Scroller */}\n      <CategoryScroller categories={allCategoriesForScroller} currentSlug={category.slug} />\n      \n      {/* Products Section */}\n      <div className=\"container mx-auto px-4 py-8\">\n        <p className=\"text-sm text-muted-foreground mb-6\">\n          {products.length} {products.length === 1 ? 'продукт' : products.length >= 2 && products.length <= 4 ? 'продукта' : 'продуктов'}\n        </p>\n        \n        {products && products.length > 0 ? (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n            {products.map((product: Product) => (\n              <ProductCard key={product.id} product={product} />\n            ))}\n          </div>\n        ) : (\n          <div className=\"flex flex-col items-center justify-center py-10 text-center\">\n            <AlertCircle className=\"h-12 w-12 text-muted-foreground mb-4\" />\n            <p className=\"text-muted-foreground text-lg\">Товары для этой игры еще не добавлены.</p>\n            <p className=\"text-sm text-muted-foreground\">Загляните позже!</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}