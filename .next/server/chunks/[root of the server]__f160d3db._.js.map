{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/mysql.ts"],"sourcesContent":["\n'use server'; // Add this directive\n\nimport mysql from 'mysql2/promise';\n\nconst connectionConfig = {\n  host: process.env.DB_HOST,\n  user: process.env.DB_USER,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_NAME,\n  connectionLimit: 10, // Optional: connection pool limit\n  namedPlaceholders: true, // Important for using object parameters\n  // Add SSL options if your Jino.ru MySQL requires it\n  // ssl: {\n  //   // ca: fs.readFileSync('/path/to/ca-cert.pem'), // if you have a CA cert\n  //   rejectUnauthorized: false // Be cautious with this in production, true is more secure\n  // }\n};\n\nlet pool: mysql.Pool | null = null;\n\nfunction getPool(): mysql.Pool {\n  if (!pool) {\n    if (!process.env.DB_HOST || !process.env.DB_USER || !process.env.DB_NAME) { // Password can be empty for some local setups\n      console.error(\"Database environment variables DB_HOST, DB_USER, or DB_NAME are not set.\");\n      throw new Error(\"Database environment variables are not fully set. Please check your .env.local file.\");\n    }\n    try {\n      pool = mysql.createPool(connectionConfig);\n      console.log(\"MySQL connection pool created successfully.\");\n\n      // Test the pool by getting a connection (optional, but good for early feedback)\n      pool.getConnection()\n        .then(connection => {\n          console.log(\"Successfully connected to database via pool.\");\n          connection.release();\n        })\n        .catch(err => {\n          console.error(\"Failed to get a connection from pool on startup:\", err);\n          // Depending on severity, you might want to invalidate the pool or exit\n          // For now, we'll let further queries fail if the pool is truly unusable.\n        });\n\n    } catch (error) {\n      console.error(\"Failed to create MySQL connection pool:\", error);\n      // Ensure pool remains null if creation fails\n      pool = null;\n      throw new Error(\"Database connection pool could not be created.\");\n    }\n  }\n  return pool;\n}\n\nexport async function query(sql: string, params?: any[] | object): Promise<any> {\n  const currentPool = getPool(); // This will throw if pool cannot be initialized\n\n  let connection;\n  try {\n    connection = await currentPool.getConnection();\n    console.log(`Executing SQL: ${sql} with params: ${params ? JSON.stringify(params) : 'No params'}`);\n    const [results] = await connection.execute(sql, params);\n    return results;\n  } catch (error: any) {\n    console.error('Database query error:', error.message, error.code, error.sqlMessage, error.sql);\n    throw new Error(`Database query failed: ${error.message}`);\n  } finally {\n    if (connection) {\n      connection.release();\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;AAGA;;;;;AAEA,MAAM,mBAAmB;IACvB,MAAM,QAAQ,GAAG,CAAC,OAAO;IACzB,MAAM,QAAQ,GAAG,CAAC,OAAO;IACzB,UAAU,QAAQ,GAAG,CAAC,WAAW;IACjC,UAAU,QAAQ,GAAG,CAAC,OAAO;IAC7B,iBAAiB;IACjB,mBAAmB;AAMrB;AAEA,IAAI,OAA0B;AAE9B,SAAS;IACP,IAAI,CAAC,MAAM;QACT,IAAI,CAAC,QAAQ,GAAG,CAAC,OAAO,IAAI,CAAC,QAAQ,GAAG,CAAC,OAAO,IAAI,CAAC,QAAQ,GAAG,CAAC,OAAO,EAAE;YACxE,QAAQ,KAAK,CAAC;YACd,MAAM,IAAI,MAAM;QAClB;QACA,IAAI;YACF,OAAO,mIAAA,CAAA,UAAK,CAAC,UAAU,CAAC;YACxB,QAAQ,GAAG,CAAC;YAEZ,gFAAgF;YAChF,KAAK,aAAa,GACf,IAAI,CAAC,CAAA;gBACJ,QAAQ,GAAG,CAAC;gBACZ,WAAW,OAAO;YACpB,GACC,KAAK,CAAC,CAAA;gBACL,QAAQ,KAAK,CAAC,oDAAoD;YAClE,uEAAuE;YACvE,yEAAyE;YAC3E;QAEJ,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2CAA2C;YACzD,6CAA6C;YAC7C,OAAO;YACP,MAAM,IAAI,MAAM;QAClB;IACF;IACA,OAAO;AACT;AAEO,eAAe,uCAAG,GAAH,MAAM,GAAW,EAAE,MAAuB;IAC9D,MAAM,cAAc,WAAW,gDAAgD;IAE/E,IAAI;IACJ,IAAI;QACF,aAAa,MAAM,YAAY,aAAa;QAC5C,QAAQ,GAAG,CAAC,CAAC,eAAe,EAAE,IAAI,cAAc,EAAE,SAAS,KAAK,SAAS,CAAC,UAAU,aAAa;QACjG,MAAM,CAAC,QAAQ,GAAG,MAAM,WAAW,OAAO,CAAC,KAAK;QAChD,OAAO;IACT,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,yBAAyB,MAAM,OAAO,EAAE,MAAM,IAAI,EAAE,MAAM,UAAU,EAAE,MAAM,GAAG;QAC7F,MAAM,IAAI,MAAM,CAAC,uBAAuB,EAAE,MAAM,OAAO,EAAE;IAC3D,SAAU;QACR,IAAI,YAAY;YACd,WAAW,OAAO;QACpB;IACF;AACF;;;IAjBsB;;AAAA,iPAAA","debugId":null}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/site-settings-public/route.ts"],"sourcesContent":["\n// src/app/api/site-settings-public/route.ts\nimport { NextRequest, NextResponse } from 'next/server';\nimport { query } from '@/lib/mysql';\nimport type { SiteSettings } from '@/types';\n\nconst SETTINGS_ROW_ID = 1; // Assuming settings are stored in a single row with id=1\n\nexport async function GET(request: NextRequest) {\n  try {\n    const results = await query(\n        'SELECT site_name, site_description, logo_url, footer_text, ' +\n        'contact_vk_label, contact_vk_url, ' +\n        'contact_telegram_bot_label, contact_telegram_bot_url, ' +\n        'contact_email_label, contact_email_address, ' +\n        'footer_marketplace_text, footer_marketplace_logo_url, footer_marketplace_link_url, footer_marketplace_is_visible, ' +\n        'faq_page_main_title, faq_page_contact_prompt_text, ' +\n        'rules_page_content, offer_page_content, ' + // Ensure these are selected\n        'homepage_popular_categories_title, homepage_advantages, homepage_show_case_opening_block, ' +\n        'homepage_case_opening_title, homepage_case_opening_subtitle ' +\n        'FROM site_settings WHERE id = ? LIMIT 1',\n        [SETTINGS_ROW_ID]\n    );\n    \n    const defaults: Partial<SiteSettings> = {\n      site_name: 'Green Hack',\n      site_description: 'Лучшие читы для ваших любимых игр!',\n      logo_url: null,\n      footer_text: `© ${new Date().getFullYear()} Green Hack. Все права защищены.`,\n      contact_vk_label: 'Наша беседа VK',\n      contact_vk_url: 'https://vk.me/join/N50c5_sVvoiYHfL5cGe5/Vc2bvcEWGBGzAw=',\n      contact_telegram_bot_label: 'Наш Telegram Бот',\n      contact_telegram_bot_url: 'https://t.me/NetUnitOfficial_Bot',\n      contact_email_label: 'Email поддержки',\n      contact_email_address: 'support@greenhacks.ru',\n      footer_marketplace_text: 'Мы продаем на:',\n      footer_marketplace_logo_url: 'https://yougame.biz/images/rlm/logo/logoconcept4.png',\n      footer_marketplace_link_url: 'https://yougame.biz/members/263428/',\n      footer_marketplace_is_visible: true,\n      faq_page_main_title: 'Часто Задаваемые Вопросы',\n      faq_page_contact_prompt_text: 'Не нашли ответ на свой вопрос? Напишите в поддержку',\n      rules_page_content: '<p>Правила сайта еще не опубликованы.</p>', // Default for rules\n      offer_page_content: '<p>Текст публичной оферты еще не опубликован.</p>', // Default for offer\n      homepage_popular_categories_title: 'ПОПУЛЯРНЫЕ КАТЕГОРИИ',\n      homepage_advantages: [\n        {\"icon\": \"DollarSign\", \"text\": \"Доступные цены\"},\n        {\"icon\": \"Headphones\", \"text\": \"Отзывчивая поддержка\"},\n        {\"icon\": \"Dices\", \"text\": \"Большой выбор игр\"},\n        {\"icon\": \"ThumbsUp\", \"text\": \"Хорошие отзывы\"}\n      ],\n      homepage_show_case_opening_block: true,\n      homepage_case_opening_title: 'ИСПЫТАЙ УДАЧУ!',\n      homepage_case_opening_subtitle: 'Откройте кейс и получите шанс выиграть ценный приз'\n    };\n    \n    let dbSettings = {};\n    if (Array.isArray(results) && results.length > 0) {\n      dbSettings = results[0];\n    }\n    \n    const settings: SiteSettings = {\n        id: SETTINGS_ROW_ID,\n        site_name: (dbSettings as any).site_name || defaults.site_name,\n        site_description: (dbSettings as any).site_description || defaults.site_description,\n        logo_url: (dbSettings as any).logo_url || defaults.logo_url,\n        footer_text: (dbSettings as any).footer_text || defaults.footer_text,\n        contact_vk_label: (dbSettings as any).contact_vk_label || defaults.contact_vk_label,\n        contact_vk_url: (dbSettings as any).contact_vk_url || defaults.contact_vk_url,\n        contact_telegram_bot_label: (dbSettings as any).contact_telegram_bot_label || defaults.contact_telegram_bot_label,\n        contact_telegram_bot_url: (dbSettings as any).contact_telegram_bot_url || defaults.contact_telegram_bot_url,\n        contact_email_label: (dbSettings as any).contact_email_label || defaults.contact_email_label,\n        contact_email_address: (dbSettings as any).contact_email_address || defaults.contact_email_address,\n        footer_marketplace_text: (dbSettings as any).footer_marketplace_text || defaults.footer_marketplace_text,\n        footer_marketplace_logo_url: (dbSettings as any).footer_marketplace_logo_url || defaults.footer_marketplace_logo_url,\n        footer_marketplace_link_url: (dbSettings as any).footer_marketplace_link_url || defaults.footer_marketplace_link_url,\n        footer_marketplace_is_visible: (dbSettings as any).footer_marketplace_is_visible !== undefined ? Boolean((dbSettings as any).footer_marketplace_is_visible) : defaults.footer_marketplace_is_visible,\n        faq_page_main_title: (dbSettings as any).faq_page_main_title || defaults.faq_page_main_title,\n        faq_page_contact_prompt_text: (dbSettings as any).faq_page_contact_prompt_text || defaults.faq_page_contact_prompt_text,\n        rules_page_content: (dbSettings as any).rules_page_content || defaults.rules_page_content, // Use fetched or default\n        offer_page_content: (dbSettings as any).offer_page_content || defaults.offer_page_content, // Use fetched or default\n        homepage_popular_categories_title: (dbSettings as any).homepage_popular_categories_title || defaults.homepage_popular_categories_title,\n        homepage_advantages: (dbSettings as any).homepage_advantages ? (typeof (dbSettings as any).homepage_advantages === 'string' ? JSON.parse((dbSettings as any).homepage_advantages) : (dbSettings as any).homepage_advantages) : defaults.homepage_advantages,\n        homepage_show_case_opening_block: (dbSettings as any).homepage_show_case_opening_block !== undefined ? Boolean((dbSettings as any).homepage_show_case_opening_block) : defaults.homepage_show_case_opening_block,\n        homepage_case_opening_title: (dbSettings as any).homepage_case_opening_title || defaults.homepage_case_opening_title,\n        homepage_case_opening_subtitle: (dbSettings as any).homepage_case_opening_subtitle || defaults.homepage_case_opening_subtitle,\n    };\n    return NextResponse.json(settings);\n  } catch (error: any) {\n    console.error('API Public Site Settings GET Error:', error);\n    const defaultSettingsOnError: SiteSettings = {\n        id: SETTINGS_ROW_ID,\n        site_name: 'Green Hack (Error)',\n        site_description: 'Site description error.',\n        logo_url: null,\n        footer_text: `© ${new Date().getFullYear()} Green Hack.`,\n        contact_vk_label: 'VK', contact_vk_url: '#',\n        contact_telegram_bot_label: 'Telegram', contact_telegram_bot_url: '#',\n        contact_email_label: 'Email', contact_email_address: 'error@example.com',\n        footer_marketplace_text: 'Мы продаем на:', footer_marketplace_logo_url: 'https://yougame.biz/images/rlm/logo/logoconcept4.png',\n        footer_marketplace_link_url: 'https://yougame.biz/members/263428/', footer_marketplace_is_visible: true,\n        faq_page_main_title: 'Часто Задаваемые Вопросы (Ошибка)',\n        faq_page_contact_prompt_text: 'Свяжитесь с поддержкой (Ошибка).',\n        rules_page_content: '<p>Ошибка загрузки правил сайта.</p>',\n        offer_page_content: '<p>Ошибка загрузки публичной оферты.</p>',\n        homepage_popular_categories_title: 'ПОПУЛЯРНЫЕ КАТЕГОРИИ (Ошибка)',\n        homepage_advantages: [],\n        homepage_show_case_opening_block: true,\n        homepage_case_opening_title: 'ИСПЫТАЙ УДАЧУ! (Ошибка)',\n        homepage_case_opening_subtitle: 'Ошибка загрузки описания кейса.',\n    };\n    return NextResponse.json(defaultSettingsOnError, { status: 500 });\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}